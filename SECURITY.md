# Политика безопасности

## Поддерживаемые версии

В настоящее время проект находится в стадии активной разработки. Обновления безопасности применяются к следующим версиям:

| Версия | Поддержка          |
| ------ | ------------------ |
| main   | :white_check_mark: |
| < 1.0  | :x:                |

## Сообщение об уязвимостях

Мы серьезно относимся к безопасности проекта Slime Arena. Если вы обнаружили уязвимость, пожалуйста, сообщите нам об этом ответственно.

### Как сообщить об уязвимости

**НЕ СОЗДАВАЙТЕ публичный Issue для уязвимостей безопасности.**

Вместо этого:

1. **Отправьте email** на адрес: komleff@gmail.com
   - Тема: `[SECURITY] Slime Arena - <краткое описание>`
   - Опишите уязвимость подробно

2. **Используйте GitHub Security Advisories:**
   - Перейдите на: https://github.com/komleff/slime-arena/security/advisories
   - Нажмите "New draft security advisory"
   - Заполните форму с деталями

### Что включить в отчет

Пожалуйста, предоставьте следующую информацию:

- **Тип уязвимости** (например: XSS, SQL injection, недостаточная авторизация)
- **Местоположение** (файлы и строки кода, где находится уязвимость)
- **Шаги для воспроизведения** (подробная инструкция)
- **Потенциальное влияние** (что может сделать злоумышленник)
- **Возможные решения** (если у вас есть идеи)
- **Ваши контактные данные** (для дальнейшей коммуникации)

### Пример отчета

```
Тип: Cross-Site Scripting (XSS)

Местоположение: 
- Файл: src/scenes/GameScene.js
- Строка: 145
- Функция: displayPlayerName()

Описание:
Функция displayPlayerName() принимает пользовательский ввод имени игрока
и напрямую вставляет его в DOM без санитизации.

Шаги для воспроизведения:
1. Запустить игру
2. В поле ввода имени ввести: <script>alert('XSS')</script>
3. Нажать "Start Game"
4. Наблюдать выполнение скрипта

Потенциальное влияние:
- Выполнение произвольного JavaScript кода
- Кража cookies/session tokens
- Редирект на вредоносные сайты
- Фишинг атаки

Предлагаемое решение:
Использовать DOMPurify или встроенные методы санитизации перед
вставкой пользовательского ввода в DOM.

Контакты: security-researcher@example.com
```

### Процесс обработки

1. **Подтверждение получения** - в течение 48 часов
2. **Первичная оценка** - в течение 7 дней
3. **Разработка патча** - зависит от серьезности
4. **Публикация обновления** - координируется с репортером
5. **Публичное раскрытие** - после выпуска патча

### Временные рамки

- **Критические уязвимости**: исправление в течение 1-7 дней
- **Высокий приоритет**: исправление в течение 7-30 дней
- **Средний приоритет**: исправление в течение 30-90 дней
- **Низкий приоритет**: исправление в следующем релизе

## Классификация уязвимостей

### Критические
- Удаленное выполнение кода (RCE)
- SQL Injection с возможностью чтения/записи базы данных
- Доступ к чувствительным данным пользователей
- Обход аутентификации

### Высокий приоритет
- Cross-Site Scripting (XSS) в критичных местах
- Cross-Site Request Forgery (CSRF)
- Недостаточная авторизация
- Утечка чувствительной информации

### Средний приоритет
- XSS в некритичных местах
- Открытые редиректы
- Недостаточное логирование безопасности
- Уязвимости в зависимостях (без прямой эксплуатации)

### Низкий приоритет
- Раскрытие информации (не чувствительной)
- Проблемы конфигурации
- Устаревшие библиотеки без известных уязвимостей

## Программа вознаграждения

На данный момент у проекта нет официальной bug bounty программы. Однако мы:

- Публично поблагодарим вас в разделе Security.md (с вашего согласия)
- Укажем вас в списке контрибьюторов
- Предоставим специальный бейдж "Security Contributor"

## Рекомендации по безопасности для разработчиков

### Общие принципы

1. **Никогда не коммитьте секреты** в репозиторий
   - API ключи
   - Пароли
   - Токены
   - Приватные ключи

2. **Валидируйте все входные данные**
   - Проверяйте тип данных
   - Ограничивайте длину
   - Санитизируйте перед использованием

3. **Используйте безопасные библиотеки**
   - Регулярно обновляйте зависимости
   - Проверяйте на известные уязвимости
   - Используйте `npm audit` или `safety` (Python)

4. **Принцип наименьших привилегий**
   - Предоставляйте минимально необходимые права
   - Используйте белые списки вместо черных

### Для веб-версии

```javascript
// ❌ Плохо: Прямая вставка HTML
element.innerHTML = userInput;

// ✅ Хорошо: Безопасная вставка текста
element.textContent = userInput;

// ✅ Хорошо: Санитизация HTML
import DOMPurify from 'dompurify';
element.innerHTML = DOMPurify.sanitize(userInput);
```

```javascript
// ❌ Плохо: Небезопасная десериализация
const data = eval(userInput);

// ✅ Хорошо: Безопасный парсинг
try {
    const data = JSON.parse(userInput);
    // Валидация данных
} catch (e) {
    // Обработка ошибки
}
```

### Для сетевого взаимодействия

```javascript
// ❌ Плохо: HTTP без шифрования
const ws = new WebSocket('ws://game.example.com');

// ✅ Хорошо: Защищенное соединение
const ws = new WebSocket('wss://game.example.com');
```

### Хранение данных

```javascript
// ❌ Плохо: Хранение чувствительных данных в localStorage
localStorage.setItem('apiKey', apiKey);

// ✅ Хорошо: Использование переменных окружения
const apiKey = process.env.API_KEY;
```

### Проверка зависимостей

```bash
# Node.js
npm audit
npm audit fix

# Python
pip install safety
safety check

# Обновление зависимостей
npm update
pip install --upgrade -r requirements.txt
```

## Настройка инструментов безопасности

### GitHub Security Features

Включите следующие функции в настройках репозитория:

1. **Dependabot alerts** - автоматические уведомления об уязвимостях
2. **Dependabot security updates** - автоматические PR с обновлениями
3. **Secret scanning** - обнаружение случайно закоммиченных секретов
4. **Code scanning (CodeQL)** - статический анализ кода

### Pre-commit hooks

Добавьте pre-commit хуки для проверки безопасности:

```bash
# Установка pre-commit
pip install pre-commit

# Создание .pre-commit-config.yaml
cat > .pre-commit-config.yaml << EOF
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: check-yaml
      - id: detect-private-key
      - id: check-added-large-files
      
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.4.0
    hooks:
      - id: detect-secrets
EOF

# Установка хуков
pre-commit install
```

## CI/CD Security

Добавьте проверки безопасности в CI pipeline:

```yaml
# .github/workflows/security.yml
name: Security Checks

on: [push, pull_request]

jobs:
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Run npm audit
        run: npm audit --audit-level=moderate
        
      - name: Run Snyk security scan
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
          
      - name: Initialize CodeQL
        uses: github/codeql-action/init@v2
        with:
          languages: javascript
          
      - name: Perform CodeQL Analysis
        uses: github/codeql-action/analyze@v2
```

## История безопасности

На данный момент не было опубликованных уязвимостей безопасности.

### Будущие CVE будут перечислены здесь:

<!-- Шаблон для будущих записей:
### CVE-YYYY-XXXXX (Дата)
**Серьезность:** Critical/High/Medium/Low
**Затронутые версии:** x.x.x - y.y.y
**Описание:** Краткое описание уязвимости
**Решение:** Обновиться до версии z.z.z
**Благодарность:** Имя исследователя безопасности
-->

## Контакты

- **Email для вопросов безопасности:** komleff@gmail.com
- **GitHub Security Advisories:** https://github.com/komleff/slime-arena/security/advisories
- **PGP Key:** (будет добавлен позже)

## Благодарности

Спасибо следующим исследователям безопасности за ответственное раскрытие уязвимостей:

<!-- Будет заполнено по мере поступления отчетов -->

---

Последнее обновление: 2025-12-21

*Эта политика может быть обновлена в любое время. Пожалуйста, проверяйте регулярно.*
