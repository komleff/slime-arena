# Active Context

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–æ–∫—É—Å —Ä–∞–±–æ—Ç—ã.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
**–í–µ—Ç–∫–∞ feat/gameplay-mvp-classes ‚Äî PR #6 —Å–æ–∑–¥–∞–Ω (26 –¥–µ–∫–∞–±—Ä—è 2025)**

### –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:
- `feat: class abilities (Dash/Shield/Magnet) with visual effects and cooldown UI`

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–æ–≤

### –û—Ö–æ—Ç–Ω–∏–∫ ‚Äî –†—ã–≤–æ–∫ (Dash)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 3% –º–∞—Å—Å—ã |
| –ö—É–ª–¥–∞—É–Ω | 5 —Å–µ–∫ |
| –î–∏—Å—Ç–∞–Ω—Ü–∏—è | 80 –º |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 0.3 —Å–µ–∫ |
| –í–∏–∑—É–∞–ª | –û–≥–Ω–µ–Ω–Ω—ã–π —Å–ª–µ–¥ (5 –∫—Ä—É–≥–æ–≤ + —Ö–≤–æ—Å—Ç) |
| –§–ª–∞–≥ | FLAG_DASHING |

### –í–æ–∏–Ω ‚Äî –©–∏—Ç (Shield)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 4% –º–∞—Å—Å—ã |
| –ö—É–ª–¥–∞—É–Ω | 8 —Å–µ–∫ |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 3 —Å–µ–∫ |
| –í–∏–∑—É–∞–ª | –ì–æ–ª—É–±–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ (–∫—Ä—É–≥ r√ó1.4) |
| –§–ª–∞–≥ | FLAG_ABILITY_SHIELD |
| –ú–µ—Ö–∞–Ω–∏–∫–∞ | –ü–æ–ª–Ω–∞—è –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å, —Å–Ω–∏–º–∞–µ—Ç—Å—è –ø—Ä–∏ –∞—Ç–∞–∫–µ |

### –°–æ–±–∏—Ä–∞—Ç–µ–ª—å ‚Äî –ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ (Magnet)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–æ–∏–º–æ—Å—Ç—å | 1.5% –º–∞—Å—Å—ã |
| –ö—É–ª–¥–∞—É–Ω | 6 —Å–µ–∫ |
| –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 1.5 —Å–µ–∫ |
| –†–∞–¥–∏—É—Å | 150 –º |
| –°–∏–ª–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è | 50 –º/—Å |
| –í–∏–∑—É–∞–ª | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç + 8 –ª–∏–Ω–∏–π |
| –§–ª–∞–≥ | FLAG_MAGNETIZING |

## UI –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

### –ö–Ω–æ–ø–∫–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –ü–æ–∑–∏—Ü–∏—è: –ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª (70√ó70 px)
- –ò–∫–æ–Ω–∫–∞: ‚ö° (Dash), üõ°Ô∏è (Shield), üß≤ (Magnet)
- –ü–æ–¥–ø–∏—Å—å: "1" (–±–µ–ª–∞—è 16px —Å —Ç–µ–Ω—å—é)
- –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏: Q, 1, 2, 3

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫—É–ª–¥–∞—É–Ω–∞
- **–ì–æ—Ç–æ–≤–æ**: —è—Ä–∫–æ–µ –≥–æ–ª—É–±–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ + —Ä–∞–º–∫–∞ #64dcff
- **–ù–∞ –∫—É–ª–¥–∞—É–Ω–µ**: —Ç—ë–º–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π 80% + SVG –ø—Ä–æ–≥—Ä–µ—Å—Å-–∫—Ä—É–≥
- –¢–∞–π–º–µ—Ä: —Å–µ–∫—É–Ω–¥—ã —Å –¥–µ—Å—è—Ç—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä "5.2")

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (PR #6)

### –ö–ª–∏–µ–Ω—Ç
1. **client/src/main.ts**
   - –ö–Ω–æ–ø–∫–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å SVG –ø—Ä–æ–≥—Ä–µ—Å—Å-–∫—Ä—É–≥–æ–º
   - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: dash trail, shield glow, magnet field
   - –ò–∫–æ–Ω–∫–∏ –∫–ª–∞—Å—Å–æ–≤ –≤ –∏–º–µ–Ω–∞—Ö –∏–≥—Ä–æ–∫–æ–≤
   - –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ Q/1/2/3
   - –§—É–Ω–∫—Ü–∏—è `updateAbilityCooldown()`

### –°–µ—Ä–≤–µ—Ä
2. **server/src/rooms/ArenaRoom.ts**
   - `activateDash()`, `activateShield()`, `activateMagnet()`
   - Dash movement –≤ physicsSystem
   - Magnet pull –≤ updateOrbs
   - Shield –±–ª–æ–∫–∏—Ä—É–µ—Ç —É—Ä–æ–Ω –≤ processCombat
   - –§–ª–∞–≥–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ updatePlayerFlags
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ abilitySlot (–Ω–µ –ø–µ—Ä–µ–∑–∞—Ç–∏—Ä–∞–µ—Ç—Å—è)

3. **server/src/rooms/schema/GameState.ts**
   - `abilityCooldownTick` ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º
   - `dashEndTick`, `dashTargetX/Y` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - `shieldEndTick`, `magnetEndTick` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### Shared
4. **shared/src/constants.ts**
   - `FLAG_DASHING = 1 << 5`
   - `FLAG_MAGNETIZING = 1 << 6`

5. **shared/src/config.ts**
   - –¢–∏–ø—ã –∏ default –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è abilities.*
   - `hpMult` –¥–ª—è hunter/warrior

6. **shared/src/index.ts**
   - –≠–∫—Å–ø–æ—Ä—Ç FLAG_DASHING, FLAG_MAGNETIZING

### –ö–æ–Ω—Ñ–∏–≥
7. **config/balance.json**
   - –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è `abilities` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤—Å–µ—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π

## –ü—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ npm run build ‚Äî ok (122.36 kB gzip)
- ‚úÖ –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ö—É–ª–¥–∞—É–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ PR #6 —Å–æ–∑–¥–∞–Ω

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
- [ ] Code review PR #6
- [ ] Merge –≤ main
- [ ] –¢–µ—Å—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –í—ã–±—Ä–æ—Å–∞ (projectile ability)
- 066a1f8: merge: resolve conflicts with main (keep mass-as-hp system)
