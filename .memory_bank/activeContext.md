# Active Context

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–æ–∫—É—Å —Ä–∞–±–æ—Ç—ã.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
**–ë–∞–∑–∞:** main (18 —è–Ω–≤–∞—Ä—è 2026)
**–†–µ–ª–∏–∑:** v0.4.7
**GDD –≤–µ—Ä—Å–∏—è:** 3.3.2
**–¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞:** main
**Soft Launch Status:** ‚úÖ READY (6/6 –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

---

## üéØ –§–û–ö–£–°: –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è 24 —è–Ω–≤–∞—Ä—è 2026

**–¶–µ–ª—å:** –ü–æ–ª–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (demo flow)

```
BootScreen ‚Üí MainScreen ‚Üí LobbyScreen ‚Üí BattleScreen ‚Üí ResultsScreen ‚Üí Main
```

### –°—Ç–∞—Ç—É—Å —ç–∫—Ä–∞–Ω–æ–≤

| –≠–∫—Ä–∞–Ω | –°—Ç–∞—Ç—É—Å | –ó–∞–¥–∞—á–∞ |
|-------|--------|--------|
| BootScreen | üî¥ TODO | `slime-arena-iry` |
| MainScreen | üü° –ß–∞—Å—Ç–∏—á–Ω–æ | `slime-arena-w9y` |
| LobbyScreen | ‚úÖ –ì–æ—Ç–æ–≤ | ‚Äî |
| BattleScreen | ‚úÖ –ì–æ—Ç–æ–≤ | ‚Äî |
| ResultsScreen | üü° –ß–∞—Å—Ç–∏—á–Ω–æ | `slime-arena-tn7` |

### –ö–ª—é—á–µ–≤—ã–µ –∞—Å—Å–µ—Ç—ã

- **BootScreen:** `bg_loading_screen.png` + –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (—ç—Å–∫–∏–∑: `bg_loading_screen_fake.png`)
- **MainScreen:** –º–∞–∫–µ—Ç `assets/templates/main.html`, –≤—Å–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã –≥–æ—Ç–æ–≤—ã

### –ì—Ä–∞—Ñ–∏–∫

| –î–µ–Ω—å | –î–∞—Ç–∞ | –ó–∞–¥–∞—á–∞ |
|------|------|--------|
| –í—Å | 18.01 | PR #88 + BootScreen |
| –ü–Ω | 19.01 | MainScreen + ResultsScreen |
| –í—Ç | 20.01 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –°—Ä | 21.01 | (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ErrorModal |
| –ß—Ç | 22.01 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ mobile |
| –ü—Ç | 23.01 | **Code Freeze** |
| **–°–±** | **24.01** | **–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è** |

---

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (dev)
- Vite HMR —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `VITE_HMR_HOST`/`VITE_HMR_PROTOCOL` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –ø–æ LAN.
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `.env.local` —á–µ—Ä–µ–∑ `loadEnv()`.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ README.md (—Ä–∞–∑–¥–µ–ª "–î–æ—Å—Ç—É–ø —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤").

### –§–æ–∫—É—Å —Å–µ—Å—Å–∏–∏

- **[–ó–ê–í–ï–†–®–ï–ù–û] PR #93: Level Progress Bar Formula (18 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞: `(mass - deathMass) / (nextThreshold - deathMass) √ó 100%`
  - ‚úÖ levelThresholds = [180, 300, 500, 800, 1200, 1800] (–±–µ–∑ 100)
  - ‚úÖ minSlimeMass (50) ‚Äî –º–∞—Å—Å–∞ —Å–º–µ—Ä—Ç–∏, "–Ω–æ–ª—å" –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  - ‚úÖ –°–µ—Ä–≤–µ—Ä: newLevel = i + 2 (thresholds[0] = 180 = –ø–æ—Ä–æ–≥ lvl 2)
  - **–§–∞–π–ª—ã:** GameHUD.tsx, gameState.ts, balance.json, config.ts, ArenaRoom.ts

- **[–ó–ê–í–ï–†–®–ï–ù–û] PR #92: PlayAgain Race Condition (18 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≥–æ–Ω–∫–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Play Again"
  - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º –∞—Ä–µ–Ω–∞–º

- **[–í –†–ê–ë–û–¢–ï] slime-arena-8q9: PvP Bite Formula (18 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚è≥ –§–æ—Ä–º—É–ª–∞ —É–∫—É—Å–∞: attackerGain –æ—Ç –º–∞—Å—Å—ã –∞—Ç–∞–∫—É—é—â–µ–≥–æ, scatter –æ—Ç –º–∞—Å—Å—ã –∂–µ—Ä—Ç–≤—ã
  - **–í–µ—Ç–∫–∞:** sprint-12/fix-pvp-bite-formula

- **[–û–¢–ú–ï–ù–ï–ù–û] PR #87: WASD –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (17 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚ùå –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ç–º–µ–Ω—ë–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –£–¥–∞–ª–µ–Ω–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–µ–º
  - **Beads:** slime-arena-60x (closed ‚Äî –æ—Ç–∫–∞—Ç)

- **[–ó–ê–í–ï–†–®–ï–ù–û] PR #85: Battle UI improvements v0.4.6 (17 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚úÖ –°—Ç—Ä–µ–ª–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è —Ä–∏—Å—É–µ—Ç—Å—è –ø–æ–¥ —Å–ª–∞–π–º–æ–º
  - ‚úÖ –†–∞–∑–º–µ—Ä —Å—Ç—Ä–µ–ª–∫–∏ —É–º–µ–Ω—å—à–µ–Ω –≤ 2 —Ä–∞–∑–∞ (minLength 15, maxLength 40)
  - ‚úÖ –†–∞–¥–∏—É—Å —Å–µ–∫—Ç–æ—Ä–∞ —Ä—Ç–∞: 1.5 ‚Üí 1.3
  - ‚úÖ –û–∫–Ω–∞ —Ç–∞–ª–∞–Ω—Ç–æ–≤/—É–º–µ–Ω–∏–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ (0.6/0.5)
  - ‚úÖ –°–∏—è–Ω–∏–µ –ö–æ—Ä–æ–ª—è –ø–æ–¥ mouthSector, alpha 0.2+0.05
  - **Beads:** slime-arena-3o8, slime-arena-iqv, slime-arena-4n8, slime-arena-5ix (closed)

- **[–í –†–ê–ë–û–¢–ï] –ì—Ä–∞—Ñ–∏–∫–∞ –∞—Ä–µ–Ω—ã ‚Äî –ü–∞—Ä–∞–ª–ª–∞–∫—Å-—Ñ–æ–Ω (12 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚úÖ GDD-Art-Architecture v2.0 ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ü–µ–Ω—ã (Layer Cake)
  - ‚úÖ arena.css ‚Äî –±–∞–∑–æ–≤—ã–π CSS –ø–∞—Ä–∞–ª–ª–∞–∫—Å-—Ñ–æ–Ω–∞ (mobile-optimized)
  - ‚úÖ Mobile-First –ø—Ä–∞–≤–∏–ª–∞ –≤ CLAUDE.md –∏ AGENT_ROLES.md
  - ‚úÖ –ê—Å—Å–µ—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã (19 —Ñ–∞–π–ª–æ–≤)
  - ‚è≥ slime-arena-duo ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.ts (–¥–ª—è Developer)
  - **–í–µ—Ç–∫–∞:** `feature/graphics-arena-bg`
  - **PR:** #76

- **[–ó–ê–í–ï–†–®–ï–ù–û] PR #74: Env-based HMR config:**
  - ‚úÖ vite.config.ts: —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å loadEnv()
  - ‚úÖ README.md: –æ–±–Ω–æ–≤–ª—ë–Ω –ø–æ—Ä—Ç 5174 + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è HMR env vars

- **[–ó–ê–í–ï–†–®–ï–ù–û] AGENT_ROLES v1.4 ‚Äî –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤ (12 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚úÖ –ó–∞–ø—Ä–µ—Ç —Ä–∞–±–æ—Ç—ã —Å main –≤–µ—Ç–∫–æ–π –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
  - ‚úÖ –ó–∞–ø—Ä–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –¥–ª—è Art Director
  - ‚úÖ Mobile-First CSS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **[–ó–ê–í–ï–†–®–ï–ù–û] –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã UI ‚Äî Golden Master (11 —è–Ω–≤–∞—Ä—è 2026):**
  - ‚úÖ –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (LobbyScreen) ‚Äî –ø–æ–ª–Ω—ã–π –º–∞–∫–µ—Ç –≤ `assets/main.html`
  - ‚úÖ Jelly Button ‚Äî CSS-—Å—Ç–∏–ª—å –∫–Ω–æ–ø–∫–∏ —Å 3D-—ç—Ñ—Ñ–µ–∫—Ç–æ–º
  - ‚úÖ HUD –ø—Ä–æ—Ñ–∏–ª—è ‚Äî –∞–≤–∞—Ç–∞—Ä, —Ä–∞–º–∫–∞, –±–µ–π–¥–∂–∏ —É—Ä–æ–≤–Ω–µ–π, XP-–±–∞—Ä
  - ‚úÖ –í–∞–ª—é—Ç—ã ‚Äî –º–æ–Ω–µ—Ç—ã –∏ –≥–µ–º—ã —Å hover-–∞–Ω–∏–º–∞—Ü–∏–µ–π
  - ‚úÖ –ò–∫–æ–Ω–∫–∏ –º–µ–Ω—é ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ª–∏–¥–µ—Ä—ã, –≥–∞—Ä–¥–µ—Ä–æ–±
  - ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–∂ ‚Äî hero_skin_current —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –ª–µ–≤–∏—Ç–∞—Ü–∏–∏
  - **–ê—Å—Å–µ—Ç—ã (26 —Ñ–∞–π–ª–æ–≤ –≤ assets/):**
    - –§–æ–Ω—ã: `bg_main_menu.png`, `bg_loading_screen.png`
    - –ö–Ω–æ–ø–∫–∏: `btn_jelly_*.png` (4 —Ü–≤–µ—Ç–∞)
    - HUD: `hud_avatar_frame_cookie.png`, `hud_profile_base_chocolate.png`, `hud_level_badge_star_*.png` (4 —Ü–≤–µ—Ç–∞)
    - –ò–∫–æ–Ω–∫–∏: `icon_menu_*.png`, `icon_currency_*.png`, `icon_alert_cookie.png`, `icon_error_burnt.png`, `icon_wifi_broken.png`
    - –ü–µ—Ä—Å–æ–Ω–∞–∂: `hero_skin_current.png`, `hero_skin_current_alt.png`
  - **–ê—Ä—Ç-–¥–∏—Ä–µ–∫—Ç–æ—Ä (Gemini):** –ü–∞—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ Cookie Crash Arena —Å–æ–∑–¥–∞–Ω

- **[–ó–ê–í–ï–†–®–ï–ù–û] PR #61-66: Ads Documentation Improvements (MERGED):**
  - ‚úÖ PR #61: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –∞–Ω–≥–ª–∏—Ü–∏–∑–º "dev-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã" ‚Üí "–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
  - ‚úÖ PR #62: –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è parameter placement –≤ JSDoc
  - ‚úÖ PR #63: –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è "rewarded video" ‚Üí "(—Ä–µ–∫–ª–∞–º—ã —Å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ–º)"
  - ‚úÖ PR #64: –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è "preload API" ‚Üí "(API –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)"
  - ‚úÖ PR #65: –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è placement –≤ adsService.ts
  - ‚úÖ PR #66: –î–æ–±–∞–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è placement –≤ IAdsProvider/adsService

- **[–ó–ê–í–ï–†–®–ï–ù–û] Sprint 11.2: TalentSystem Integration (PR #57 MERGED):**
  - ‚úÖ slime-arena-eg7 ‚Äî ArenaRoom refactoring (‚àí418 —Å—Ç—Ä–æ–∫)
  - ‚úÖ recalculateTalentModifiers ‚Üí –¥–µ–ª–µ–≥–∞—Ü–∏—è –≤ –º–æ–¥—É–ª—å
  - ‚úÖ generateTalentCard ‚Üí –¥–µ–ª–µ–≥–∞—Ü–∏—è –≤ –º–æ–¥—É–ª—å
  - ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏: getTalentConfig, buildAbilityUpgradeId, parseAbilityUpgradeId

- **[–ó–ê–í–ï–†–®–ï–ù–û] Sprint 11: Tech Debt Refactoring (PR #56 MERGED):**
  - ‚úÖ 11.1: slime-arena-dm5 ‚Äî Daemon hooks (auto-commit, auto-push)
  - ‚úÖ 11.2: slime-arena-foh ‚Äî HUD frequency sync (—É–±—Ä–∞–Ω forceUpdate)
  - ‚úÖ 11.3: InputManager module created (558 —Å—Ç—Ä–æ–∫)
  - ‚úÖ 11.4: TalentSystem module created

### ‚úÖ –ê—É–¥–∏—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞ (—Å–µ—Å—Å–∏—è)
–£—Ç–æ—á–Ω—ë–Ω –∏ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å–ø–∏—Å–æ–∫ —Ç–µ—Ö–¥–æ–ª–≥–∞:
- –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è God Objects (ArenaRoom, main.ts)
- –ü–æ—Ä–æ–≥ –î–•–ü —Ç–µ–ø–µ—Ä—å –≥—Ä—É–∑–∏—Ç—Å—è –∏–∑ balance.json
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: TalentSystem, InputManager –º–æ–¥—É–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
