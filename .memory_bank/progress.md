# Progress
Отслеживание статуса задач.

## Контроль изменений
- **last_checked_commit**: ветка `fix/flighttz-smoothing-orb-density` (24.12.2025)
- **Резюме**: U2-стиль предиктивного сглаживания, Flight-TZ параметры, плотность орбов, фаза Results.

## Известные неопределённости
- **Система шаблонов**: Подтверждено отсутствие Bitrix или иных серверных шаблонизаторов. Проект является чистым SPA на Vite. UI создается динамически в рантайме.

## Статус выполнения
- [x] Инициализация Memory Bank.
- [x] Карта проекта и структура репозитория.
- [x] Документирование страниц и UI-компонентов.
- [x] Анализ legacy-кода и внешних расширений.
- [x] Проверка CI/CD и инфраструктуры.

## Задача: Плавность движения (ЗАВЕРШЕНА)
- [x] Шаг 1: Диагностика — метрики на клиенте (F3) и логирование сервера.
- [x] Шаг 2: Оптимизация буфера снапшотов (откат — подход был неверным).
- [x] Шаг 3: Анализ U2 EntitySmoother — ключевой инсайт.
- [x] Шаг 4: U2-стиль предиктивного сглаживания:
  - Визуальное состояние (`visualPlayers`, `visualOrbs`)
  - `smoothStep()` — догоняние с экспоненциальным затуханием ошибки
  - Предиктивная цель: `server_pos + velocity * lookAheadMs`
- [x] Шаг 5: Flight-TZ параметры на сервере (из balance.json).
- [x] Шаг 6: Плотность орбов (`density`) в физике.
- [x] Шаг 7: Тест детерминизма — пройден.
- [x] Шаг 8: Тестирование — "намного лучше!"
- [x] Шаг 9: Коммит и пуш ветки.
- [ ] Шаг 10: PR и мерж в main.

## Кандидаты на очистку (Candidate-for-cleanup)
- `legacy/`: Старая версия проекта, не используется в текущем пайплайне.
- `_ext/u2/`: Внешняя песочница Universe Unlimited, не относится к Slime Arena.
- `local/`: Содержит временные файлы и README, который дублирует часть документации.
- `docker/docker-compose.yml`: Требует исправления (отсутствуют Dockerfiles).

## Планы
- [ ] Завершение модульного разделения `ArenaRoom.ts` (Шаг 5).
- [ ] Оптимизация `main.ts` на клиенте.
- [ ] Внедрение Protobuf (согласно `docs/PROTOBUF_ADOPTION_PLAN.md`).
