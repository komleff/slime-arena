# Progress
Отслеживание статуса задач.

## Контроль изменений
- **last_checked_commit**: copilot/improve-joystick-control @ 3 января 2026
- **GDD версия**: v3.3.2
- **Резюме**: Улучшение управления fly-by-wire с контр-ускорением.

## Последние изменения

### Текущая работа: Улучшение джойстика (copilot/improve-joystick-control)
- **Контр-ускорение реализовано:** Активное гашение drift-эффекта при резких поворотах.
  - При смене направления > 30° система определяет перпендикулярную составляющую скорости
  - Применяется агрессивное торможение drift-компоненты за 150 мс
  - Активация при скорости > 50 м/с
  - Параметры добавлены в `balance.json` для всех классов
  - Изменён файл: `server/src/rooms/systems/movementSystems.ts`
  - Тесты детерминизма пройдены успешно

### Предыдущая работа: UX-улучшения (feat/ux-improvements, PR #25 смержен)
- **Шаг 1:** Собиратель получил `pull` как стартовое умение, `slow` перенесено в общий пул карточек.
- **Шаг 2:** Притяжение орбов к пасти (getMouthPoint: 1.9 радиуса), визуализация смещена.
- **Шаг 3:** Мышь не активирует джойстик. Управление ПК: курсор задаёт направление.
- **Шаг 4:** Клик мышью по карточкам умений/талантов, добавлены подсказки.
- **Шаг 5:** Баланс движения обновлён: тяга вперёд +1.5x, боковая/ретро и угловая тяга -1.5x.
- **Шаг 6:** Награды сундуков - вспышка и всплывающий текст (с названием награды/таланта).
- **Награды сундуков:** при таланте показывается карточка рядом с описанием и редкостью на пару секунд.
- **Фикс ПК-клика по таланту:** выбор карточки не теряется при частых input-пакетах.
- **Карточки талантов/умений:** выбор вынесен в боковые панели и не мешает управлению; клик мышью на ПК работает.
- **Карточки выбора:** скрываются только при крупной потере массы, мелкие потери не сворачивают.
- **Параметры классов:** приведены к GDD (collector: `eatingPowerMult` = 1.25, `radiusMult` = 1; warrior: `biteResistPct` = 0).
- **Замечания ревью:** минимальная масса scatter-орбов согласована, исправлена визуализация точки притяжения.
- **Замечания проверки:** выбор карточек убран из `input`, сбрасывается `pendingLavaScatterMass`, очищаются `pendingChestRewards`.
- **Интерфейс и эффекты:** ограничение размера `pendingChestRewards`, вынесены константы шипов и цветов, общая функция редкости талантов, `chests.onRemove` использует позицию из `chest`, `.claude/` добавлена в `.gitignore`.
- **Баланс:** отключены неработающие таланты `sense`, `regeneration`, `momentum`, `berserk`, `symbiosis`; `turnTorqueNm` = 24000 для всех `slimeConfigs`.
- **Known Issues 11.1-11.4:** Сетка ярче, поле обзора x2, шипастые препятствия с шипами и ⚠, scatter-орбы min 5 кг.
- **Документация:** GDD обновлен до версии 3.3.2 (все документы синхронизированы).

## Открытые задачи (copilot/improve-joystick-control)
- [x] Анализ текущей реализации fly-by-wire
- [x] Добавление логики контр-ускорения
- [x] Добавление параметров в balance.json
- [x] Тестирование (build + determinism tests)
- [x] Обновление документации
- [ ] Code review
- [ ] Security scan (CodeQL)
- [ ] Мерж PR
