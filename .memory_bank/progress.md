# Progress
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á.

## –ö–æ–Ω—Ç—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **last_checked_commit**: RELEASE v0.3.0 @ 7 —è–Ω–≤–∞—Ä—è 2026
- **–¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞**: main
- **–†–µ–ª–∏–∑ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞:** v0.3.0
- **GDD –≤–µ—Ä—Å–∏—è**: v3.3.2
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Soft Launch**: v1.5.6
- **Stage A+B+C MetaServer**: –ó–ê–í–ï–†–®–ï–ù–û
- **UI Refactoring**: –ó–ê–í–ï–†–®–ï–ù–û
- **README Update**: –ó–ê–í–ï–†–®–ï–ù–û
- **Sprint 1 Client Integration**: –ó–ê–í–ï–†–®–ï–ù–û

## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (UI Known Issues v0.3.0 Fixes)

### UI Known Issues v0.3.0 Fixes (PR #37)

**–í–µ—Ç–∫–∞:** `fix/ui-known-issues-v030`
**PR:** PR #37
**–°—Ç–∞—Ç—É—Å:** üü° –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ / Ready to Merge

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø–ª–∞–Ω –±—É–¥—É—â–µ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞ –ø–æ –º–æ–±–∏–ª—å–Ω–æ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é `docs/soft-launch/Sprint-Next-Mobile-Controls-Plan.md`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 15 issues –∏–∑ docs/soft-launch/Slime Arena v0.3.0 Known Issues.md:**

**P0: –ö–Ω–æ–ø–∫–∏ —É–º–µ–Ω–∏–π (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ):**
- ‚úÖ –ò–∫–æ–Ω–∫–∏ —Ç–µ–ø–µ—Ä—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ (–∏–∑ abilitySlot0/1/2 —á–µ—Ä–µ–∑ ABILITY_ICON_MAP)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ abilitySlots signal)
- ‚úÖ –ö—É–ª–¥–∞—É–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (syncAbilityCooldown –≤ hudTimer)

**P1: ResultsScreen:**
- ‚úÖ –ö—É–±–æ–∫ —É –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: –ò–º—è)
- ‚úÖ –ò–∫–æ–Ω–∫–∏ –∫–ª–∞—Å—Å–æ–≤ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ (classId –≤ LeaderboardEntry)
- ‚úÖ –ü–æ—Ä—è–¥–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –ö–ª–∞—Å—Å ‚Üí –£—Ä–æ–≤–µ–Ω—å ‚Üí –ú–∞—Å—Å–∞ ‚Üí –£–±–∏–π—Å—Ç–≤–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í –±–æ–π" –≤–º–µ—Å—Ç–æ "–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞"
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –∫–ª–∞—Å—Å" –≤–º–µ—Å—Ç–æ "–í—ã–π—Ç–∏ –≤ –º–µ–Ω—é"
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –ø–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ –∫–ª–∞—Å—Å–∞ (–ª–∏—à–Ω—è—è)

**P2: HUD cleanup:**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã Level –∏ MaxMass –∏–∑ PlayerStats
- ‚úÖ "–í—ã –ø–æ–≥–∏–±–ª–∏" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–∑–µ "playing"
- ‚úÖ Legacy levelIndicator –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω

**P2: –ü–µ—Ä–µ–¥ –±–æ–µ–º:**
- ‚úÖ –ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –Ω–µ –≤–∏–¥–∏—Ç Results –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–∞—Ç—á–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ selfInLeaderboard)

**P3: Safari safe-area:**
- ‚úÖ env(safe-area-inset-top/left) –¥–ª—è HUD —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (9):**
- `client/src/main.ts` ‚Äî syncAbilityCooldown/Slots –≤ hudTimer, classId –≤ leaderboard, levelIndicator disabled
- `client/src/ui/UIBridge.tsx` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç syncAbilitySlots
- `client/src/ui/components/AbilityButtons.tsx` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–∫–æ–Ω–∫–∏/—Å–ª–æ—Ç—ã –∏–∑ signal
- `client/src/ui/components/GameHUD.tsx` ‚Äî safe-area CSS, —É–¥–∞–ª–µ–Ω–∏–µ Level/MaxMass, phase check
- `client/src/ui/components/ResultsScreen.tsx` ‚Äî —Ç–µ–∫—Å—Ç—ã, –∏–∫–æ–Ω–∫–∏, –ø–æ—Ä—è–¥–æ–∫, –±–µ–∑ –∫–ª–∞—Å—Å-–≤—ã–±–æ—Ä–∞
- `client/src/ui/data/abilities.ts` ‚Äî ABILITY_ICON_MAP, SLOT_COLORS, getAbilityIcon()
- `client/src/ui/signals/gameState.ts` ‚Äî AbilitySlots interface, abilitySlots signal, classId
- `activeContext.md`
- `progress.md`

---

## –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (Sprint 1.9 AI Review)

### Sprint 1.9: AI Tester Review Fixes (–ó–ê–í–ï–†–®–ï–ù–û)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Client Integration Complete

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

- **MainMenu Error Display:** –ò–∑–º–µ–Ω–µ–Ω–æ `{error || authErrorMsg || mmError}` ‚Üí `{[error, authErrorMsg, mmError].filter(Boolean).join(' ‚Ä¢ ')}` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- **PowerShell Smoke Tests:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ ‚Äî Codex —Å–æ–æ–±—â–∞–ª –æ parse error –Ω–∞ —Å—Ç—Ä–æ–∫–µ 214, –Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (UTF-8, CRLF, proper newline). –õ–æ–∂–Ω–æ–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ.

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:** Telegram (–≤—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã) > –º–æ–±–∏–ª—å–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã > –ø–ª–∞–Ω—à–µ—Ç—ã —Å —Ç–∞—á-—Å–∫—Ä–∏–Ω–æ–º > –±—Ä–∞—É–∑–µ—Ä—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–º—ã—à—å/–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞) > –≥–∏–±—Ä–∏–¥–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç).

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `client/src/ui/components/MainMenu.tsx` (—Å—Ç—Ä–æ–∫–∞ 465)

---

### Sprint 1.8: Final Polish & Fixes (–ó–ê–í–ï–†–®–ï–ù–û)

**–ö–æ–º–º–∏—Ç:** fe73cd1
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Client Integration Complete

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **CD-1:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Architecture Part 4 (`platformType: dev`).
- **CD-3:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `DEFAULT_NICKNAME` –≤ `StandaloneAdapter`.
- **Review:** –ó–∞–∫—Ä—ã—Ç—ã –∑–∞–º–µ—á–∞–Ω–∏—è Codex (Config format, UUID risks).

### Sprint 1: Client ‚Üî MetaServer Integration (–ò—Ç–æ–≥–∏)

**Service Layer –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:**
- MetaServerClient (HTTP –∫–ª–∏–µ–Ω—Ç —Å retry, timeout, auth headers)
- AuthService (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ MetaServer, session restore)
- ConfigService (–∑–∞–≥—Ä—É–∑–∫–∞ RuntimeConfig —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- MatchmakingService (–æ—á–µ—Ä–µ–¥—å matchmaking —Å polling)

**Platform Adapters:**
- PlatformManager (–¥–µ—Ç–µ–∫—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Telegram/Standalone)
- TelegramAdapter (initData –∏–∑ window.Telegram.WebApp)
- StandaloneAdapter (localStorage userId + nickname)
- IAuthAdapter interface (–µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º)

**UI Integration:**
- Auth/Matchmaking signals –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ gameState.ts
- MainMenu.tsx: matchmaking status UI, cancel button
- UIBridge.tsx: onCancelMatchmaking callback
- main.ts: async initialization services

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (11):**
```
client/src/api/
‚îî‚îÄ‚îÄ metaServerClient.ts      ‚Äî HTTP –∫–ª–∏–µ–Ω—Ç —Å retry/timeout

client/src/platform/
‚îú‚îÄ‚îÄ IAuthAdapter.ts          ‚Äî –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ TelegramAdapter.ts       ‚Äî Telegram Mini App
‚îú‚îÄ‚îÄ StandaloneAdapter.ts     ‚Äî Dev/iframe —Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ PlatformManager.ts       ‚Äî –î–µ—Ç–µ–∫—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
‚îî‚îÄ‚îÄ index.ts                 ‚Äî –≠–∫—Å–ø–æ—Ä—Ç—ã

client/src/services/
‚îú‚îÄ‚îÄ authService.ts           ‚Äî –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ configService.ts         ‚Äî RuntimeConfig
‚îú‚îÄ‚îÄ matchmakingService.ts    ‚Äî Matchmaking queue
‚îî‚îÄ‚îÄ index.ts                 ‚Äî –≠–∫—Å–ø–æ—Ä—Ç—ã
```

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (4):**
- `client/src/ui/signals/gameState.ts` ‚Äî 80+ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ (auth/matchmaking signals)
- `client/src/ui/components/MainMenu.tsx` ‚Äî matchmaking status UI
- `client/src/ui/UIBridge.tsx` ‚Äî onCancelMatchmaking callback
- `client/src/main.ts` ‚Äî async service initialization

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- JWT –¥–ª—è joinToken (stateless validation –Ω–∞ MatchServer)
- Telegram + Standalone –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (prod + dev)
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ (–¥–ª—è MVP)

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ TypeScript build: PASS
- ‚úÖ Vite build: PASS
- ‚úÖ Ready for Sprint 2

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è (7 —è–Ω–≤–∞—Ä—è 2026)

### –ú–∏–ª—å–Ω—ã–π –∫–∞–º–µ–Ω—å: –†–µ–ª–∏–∑ v0.3.0
- ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑ `v0.3.0` –Ω–∞ GitHub.
- ‚úÖ –°–æ–∑–¥–∞–Ω `CHANGELOG.md` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏.
- ‚úÖ –í—Å–µ –ø–æ–¥–ø—Ä–æ–µ–∫—Ç—ã (`client`, `server`, `shared`) –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ –≤–µ—Ä—Å–∏–∏ 0.3.0.
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (PR #35).

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ README –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –ì–ª–∞–≤–Ω—ã–π README.md –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Å—Ç–µ–∫–æ–º –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –ø–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º—É, U2-—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—é –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞.
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ Docker-–æ–±—Ä–∞–∑—ã (v0.3.0).

### UI Refactoring Phase 2.7 ‚Äî Final Fixes

**–ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥ merge:**

- ‚úÖ Security: `rel="noopener noreferrer"` –¥–ª—è –≤–Ω–µ—à–Ω–µ–π —Å—Å—ã–ª–∫–∏ GitHub
- ‚úÖ Race condition: `activeRoom = null` –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤–Ω—É—Ç—Ä—å `.then()`/`.catch()`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `client/src/ui/components/MainMenu.tsx` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å—Å—ã–ª–æ–∫
- `client/src/main.ts` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ race condition –≤ onPlayAgain

**–û—Ç–ª–æ–∂–µ–Ω—ã –¥–ª—è Stage D (Soft Launch):**
- MetaServer integration (Auth, RuntimeConfig, MatchAssignment, MatchSummary)
- globalInputSeq reset (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- visualViewport.onresize (nice-to-have)

---

### UI Refactoring Phase 2.6 ‚Äî Round 2 Bug Fixes + Copilot Review

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Round 2:**

**User Testing fixes:**

- ‚úÖ R4-1: "–ü—Ä–∏–∑—Ä–∞–∫–∏" (–∏–≥—Ä–æ–∫–∏ –±–µ–∑ classId) ‚Äî —Ñ–∏–ª—å—Ç—Ä `player.classId < 0` –≤ render loop
- ‚úÖ R4-2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ HUD ‚Äî legacy HUD —Å–∫—Ä—ã—Ç (`hud.style.display = "none"`)
- ‚úÖ R4-4: "–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞" ‚Äî –∫–Ω–æ–ø–∫–∞ disabled –¥–æ –∫–æ–Ω—Ü–∞ —Ç–∞–π–º–µ—Ä–∞
- ‚úÖ R4-5: "–í –º–µ–Ω—é" ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã—Ö–æ–¥ —Å `room.leave()`
- ‚úÖ R4-6+7: –õ–æ–≥–∏–∫–∞ —Å–∫–∏–Ω–∞ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–µ–∑ —Å–º–µ–Ω—ã –∏–º–µ–Ω–∏, –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ
- ‚úÖ Ghost Movement: —Å–±—Ä–æ—Å `lastSentInput` –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

**Copilot AI Review fixes:**

- ‚úÖ C1: `.finally()` ‚Üí `.then() + .catch()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ C3: –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `room === activeRoom`
- ‚úÖ C4: injectStyles ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—ç—à–∞ –∏ DOM
- ‚úÖ C7: UIRoot ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ signal.value –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `client/src/main.ts` ‚Äî —Å–∫—Ä—ã—Ç–∏–µ legacy HUD, —Ñ–∏–ª—å—Ç—Ä –ø—Ä–∏–∑—Ä–∞–∫–æ–≤, —Å–±—Ä–æ—Å lastSentInput
- `client/src/ui/components/MainMenu.tsx` ‚Äî –≤–µ—Ä—Å–∏—è v0.3.0, –ª–æ–≥–∏–∫–∞ —Å–∫–∏–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –∏–º–µ–Ω–∏
- `client/src/ui/components/ResultsScreen.tsx` ‚Äî –∫–Ω–æ–ø–∫–∞ "–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞" —Å —Ç–∞–π–º–µ—Ä–æ–º
- `client/src/ui/UIBridge.tsx` ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ signal.value
- `client/src/ui/utils/injectStyles.ts` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (6 —è–Ω–≤–∞—Ä—è 2026)

### UI Refactoring Phase 2.5 ‚Äî Post-Implementation Bug Fixes

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 2 –±–∞–≥–∞ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

**POST-1 (P0): –õ–∏—à–Ω–∏–π —ç–∫—Ä–∞–Ω –º–µ–Ω—é –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–ª–∞—Å—Å–∞**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `setPhase("playing")` –≤ `setClassSelectMode(false)`
- –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –≤—ã–±–æ—Ä–∞ –∫–ª–∞—Å—Å–∞ Preact UI –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ "playing"
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –ª–∏—à–Ω–∏–π —ç–∫—Ä–∞–Ω –º–µ–Ω—é –ø–æ—Å–ª–µ —Å—á—ë—Ç—á–∏–∫–∞ –º–µ–∂–º–∞—Ç—á–µ–≤–æ–≥–æ –≤—ã–±–æ—Ä–∞

**POST-2 (P1): –ü—Ä–∏–∑—Ä–∞–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ –º–µ–∂–¥—É –º–∞—Ç—á–∞–º–∏**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `visualPlayers.clear()` –∏ `visualOrbs.clear()` –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ Results
- –û—á–∏—â–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –º–∞—Ç—á–∞–º–∏ –≤ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç "–ø—Ä–∏–∑—Ä–∞–∫–æ–≤" –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∏–≥—Ä—ã

**–ö–æ–º–º–∏—Ç:** c4c5c08

---

### UI Refactoring Phase 2 ‚Äî Bug Fixes (SDET Review)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 9 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ –∏–∑ SDET/Copilot review:**

**P0 (Critical):**
- ‚úÖ onPlay: selectClass vs connectToServer ‚Äî –º–µ–∂–¥—É –º–∞—Ç—á–∞–º–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º selectClass –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ visualPlayers.clear race condition ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `room === activeRoom`
- ‚úÖ wasInResultsPhase ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Ñ–∞–∑

**P1 (High):**
- ‚úÖ Results timer ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `matchTimer` signal –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ useEffect name overwrite ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ `playerName.value` –≤–º–µ—Å—Ç–æ closure-–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- ‚úÖ onPlayAgain room.leave() ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º `.finally()` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ activateAbilityFromUI movement ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `lastSentInput`

**P2 (Medium):**
- ‚úÖ Double setPhase ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ Results ‚Üí Playing/Menu
- ‚úÖ ui-root missing ‚Äî —Ç–µ–ø–µ—Ä—å `throw Error` –≤–º–µ—Å—Ç–æ `console.warn`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `client/src/main.ts` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UIBridge, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è race conditions
- `client/src/ui/components/ResultsScreen.tsx` ‚Äî matchTimer signal
- `client/src/ui/components/MainMenu.tsx` ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –∏–º–µ–Ω–∏
- `client/index.html` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `<div id="ui-root">`

---

## –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (5 —è–Ω–≤–∞—Ä—è 2026)

### UI Refactoring ‚Äî PR #32 Phase 1 (–≥–æ—Ç–æ–≤ –∫ merge)

**Copilot Review ‚Äî –≤—Å–µ 6 batch –ø—Ä–æ–π–¥–µ–Ω—ã (40+ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤):**

| Batch | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|-------|-------------|
| 1 | FLAG_IS_DEAD=16, parseFloat –¥–ª—è DPI, useMemo, DRY classes.ts |
| 2 | JSX —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π, stable keys, focus trap, –≤–µ—Ä—Å–∏—è v0.2.2 |
| 3 | isConnecting signal, MAX_ABILITY_SLOTS, visualViewport API |
| 4 | abilities.ts, rarity.ts, —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤, ModalType –±–µ–∑ null |
| 5 | –ø–æ—Ä—è–¥–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤, toFixed(1) –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ, position: fixed, devicePixelRatio |
| 6 | entry.place –∫–∞–∫ key, import FLAG_IS_DEAD from shared |

**–ö–æ–º–º–∏—Ç—ã PR #32:**
```
30b256f fix: import FLAG_IS_DEAD from shared, export abilities/rarity data
0443e82 fix: use entry.place as key in leaderboard
2202000 fix: address Copilot review batch 5
65c16bc fix: address Copilot review batch 4
b162752 fix: address Copilot review batch 3
5f4c186 fix: address Copilot review batch 2
ab89c18 docs: update progress.md with all Copilot review fixes
75dc235 fix: address remaining Copilot review comments
b4d3391 fix: address Copilot review feedback
d4b85b9 fix: memory leak and race conditions
2019135 feat(client): UI Refactoring - Preact migration and ScreenManager
```

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (13):**
```
client/src/ui/
‚îú‚îÄ‚îÄ signals/gameState.ts      ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (Preact Signals)
‚îú‚îÄ‚îÄ screens/ScreenManager.tsx ‚Äî —Å—Ç–µ–∫ —ç–∫—Ä–∞–Ω–æ–≤ –∏ –º–æ–¥–∞–ª–æ–∫
‚îú‚îÄ‚îÄ components/MainMenu.tsx   ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îú‚îÄ‚îÄ components/GameHUD.tsx    ‚Äî HUD (10 Hz throttled)
‚îú‚îÄ‚îÄ components/AbilityButtons.tsx ‚Äî –∫–Ω–æ–ø–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π (SVG)
‚îú‚îÄ‚îÄ components/TalentModal.tsx ‚Äî –≤—ã–±–æ—Ä —Ç–∞–ª–∞–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ components/ResultsScreen.tsx ‚Äî —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ data/classes.ts           ‚Äî –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤ (DRY)
‚îú‚îÄ‚îÄ data/abilities.ts         ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π (DRY)
‚îú‚îÄ‚îÄ data/rarity.ts            ‚Äî –¥–∞–Ω–Ω—ã–µ —Ä–µ–¥–∫–æ—Å—Ç–∏ (DRY)
‚îú‚îÄ‚îÄ utils/injectStyles.ts     ‚Äî —É—Ç–∏–ª–∏—Ç–∞ CSS injection
‚îú‚îÄ‚îÄ UIBridge.tsx              ‚Äî API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Canvas
‚îî‚îÄ‚îÄ index.ts                  ‚Äî —ç–∫—Å–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª—è
```

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (3):**
- `client/package.json` ‚Äî dependencies: preact, @preact/signals
- `client/vite.config.ts` ‚Äî JSX config –¥–ª—è Preact
- `client/tsconfig.json` ‚Äî jsxImportSource: "preact"

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –°–±–æ—Ä–∫–∞: `npm run build` –ø—Ä–æ—Ö–æ–¥–∏—Ç
- ‚úÖ Copilot Review: –≤—Å–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚è≥ Claude Review: –∑–∞–ø—Ä–æ—à–µ–Ω
- ‚è≥ Merge: –ø–æ—Å–ª–µ Claude review

### –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø ‚Äî Phase 2: Integration

–ü–æ—Å–ª–µ merge PR #32:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UIBridge –≤ main.ts
- –ó–∞–º–µ–Ω–∞ —Å—Ç–∞—Ä–æ–≥–æ DOM-–∫–æ–¥–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Canvas ‚Üî Preact

## –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (5 —è–Ω–≤–∞—Ä—è 2026)

### Stage A+B+C ‚Äî MetaServer Infrastructure (MERGED)

**RuntimeConfig Management (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ ConfigService):**
- –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è config versions (draft ‚Üí active ‚Üí archived)
- listConfigs, updateConfig, archiveConfig, deleteConfig, cloneConfig
- validateConfig —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- Admin HTTP API: /api/v1/config/admin/*

**A/B Testing Infrastructure (2 —Ñ–∞–π–ª–∞):**
- ABTestService (300+ —Å—Ç—Ä–æ–∫):
  - createTest —Å variants –∏ weights validation
  - Deterministic assignment –ø–æ SHA-256(userId:testId)
  - trackConversion —Å event_type –∏ event_value
  - getTestStats —Å conversion rates per variant
  - Test lifecycle: draft ‚Üí active ‚Üí paused ‚Üí completed
- abtest.ts routes:
  - User: GET /assignments, /assignment/:testId, POST /conversion
  - Admin: list, create, update state, stats, delete

**Payment Providers (4 —Ñ–∞–π–ª–∞):**
- IPaymentProvider interface:
  - createInvoice, verifyPayment, refundPayment, getPaymentStatus
- TelegramStarsProvider (Telegram Bot Payments API):
  - XTR currency (Telegram Stars)
  - Pre-checkout query handling
  - refundStarPayment support
- YandexPayProvider (YooKassa API):
  - RUB currency
  - Webhook handling (payment.succeeded, payment.canceled)
  - Idempotence-Key –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- PaymentProviderFactory:
  - Auto-init –ø–æ env vars (TELEGRAM_BOT_TOKEN, YANDEX_SHOP_ID)
  - getAvailableProviders() –¥–ª—è UI

**Analytics Service (2 —Ñ–∞–π–ª–∞):**
- AnalyticsService (250+ —Å—Ç—Ä–æ–∫):
  - Buffer-based tracking (flush –∫–∞–∂–¥—ã–µ 30s –∏–ª–∏ 100 events)
  - 25+ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö EventTypes
  - queryEvents —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
  - getStats —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π (hour/day/week)
  - Graceful shutdown —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º flush
- analytics.ts routes:
  - User: POST /track, /batch, GET /event-types
  - Admin: GET /admin/query, /admin/stats, POST /admin/flush

**HTTP Routes Stage C (3 —Ä–æ—É—Ç–∞):**
- configAdmin.ts: 9 endpoints –¥–ª—è config management
- payment.ts: 6 endpoints + 2 webhooks
- analytics.ts: 6 endpoints

**Database Migration:**
- 002_stage_c_monetization.sql:
  - ab_tests: –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å variants JSONB
  - ab_test_conversions: —Ç—Ä–µ–∫–∏–Ω–≥ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
  - analytics_events: —Å–æ–±—ã—Ç–∏—è —Å properties JSONB
  - purchase_receipts: –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**Smoke Tests:**
- meta-stage-c.test.ts: 15+ —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö –≤—Å–µ Stage C endpoints

**–§–∞–π–ª—ã Stage C:**
- –°–æ–∑–¥–∞–Ω–æ: 12 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–æ: 4 —Ñ–∞–π–ª–∞

**–û—Ü–µ–Ω–∫–∞ vs —Ñ–∞–∫—Ç:** Stage C –æ—Ü–µ–Ω—ë–Ω –≤ 8-10 –¥–Ω–µ–π, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∑–∞ 1 —Å–µ—Å—Å–∏—é.

### Stage B - Core Services (–ó–ê–í–ï–†–®–ï–ù–û)

**Platform Adapters (6 —Ñ–∞–π–ª–æ–≤):**
- IAuthProvider: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- DevAuthProvider: Dev-—Ä–µ–∂–∏–º (userId:nickname —Ñ–æ—Ä–º–∞—Ç)
- TelegramAuthProvider: Telegram Mini App (HMAC-SHA256 signature validation)
- YandexAuthProvider: Yandex Games SDK (JWT parsing, placeholder signature check)
- PokiAuthProvider: Poki SDK (player_id based)
- AuthProviderFactory: –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

**Core Services (4 —Å–µ—Ä–≤–∏—Å–∞):**
- MatchmakingService (228 —Å—Ç—Ä–æ–∫):
  - Redis ZSET-based queue (sorted by timestamp)
  - FIFO matchmaking: 2-8 –∏–≥—Ä–æ–∫–æ–≤ per match
  - 60-second timeout –¥–ª—è requests
  - processQueue() –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç—á–µ–π
  - Match assignment: roomId, roomHost, roomPort, matchId
- WalletService (256 —Å—Ç—Ä–æ–∫):
  - Idempotent add/deduct currency (soft/hard)
  - Balance checks –ø–µ—Ä–µ–¥ deduct
  - Transaction history (50 items limit)
  - Audit trail –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ShopService (166 —Å—Ç—Ä–æ–∫):
  - Offers –∏–∑ RuntimeConfig.shop.offers
  - Purchase: deduct currency ‚Üí unlock item/grant currency/enable battlepass
  - Idempotency —á–µ—Ä–µ–∑ transactions table
  - getUnlockedItems() –ø–æ —Ç–∏–ø—É
- AdsService (133 —Å—Ç—Ä–æ–∫–∏):
  - generateGrant() –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º —Ä–µ–∫–ª–∞–º—ã
  - grantId TTL: 5 –º–∏–Ω—É—Ç (Redis)
  - claimReward() –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (idempotent)
  - Rewards: soft/hard currency –∏–ª–∏ items

**HTTP Routes (4 —Ä–æ—É—Ç–∞):**
- /api/v1/matchmaking:
  - POST /join ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å
  - POST /cancel ‚Äî –ø–æ–∫–∏–Ω—É—Ç—å –æ—á–µ—Ä–µ–¥—å
  - GET /status ‚Äî —Å—Ç–∞—Ç—É—Å –∏ –ø–æ–∑–∏—Ü–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏
- /api/v1/wallet:
  - GET /balance ‚Äî —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
  - GET /transactions ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- /api/v1/shop:
  - GET /offers ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ñ—Ñ–µ—Ä—ã
  - POST /purchase ‚Äî –∫—É–ø–∏—Ç—å –∑–∞ –≤–∞–ª—é—Ç—É
  - GET /unlocked ‚Äî —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ items
- /api/v1/ads:
  - POST /grant ‚Äî —Å–æ–∑–¥–∞—Ç—å grant –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º
  - POST /claim ‚Äî claim reward –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
  - GET /grant/:grantId ‚Äî —Å—Ç–∞—Ç—É—Å grant

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- AuthService.verifyAndCreateSession() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IAuthProvider.verifyToken()
- MetaServer –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç AuthProviderFactory –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- Environment variables: TELEGRAM_BOT_TOKEN, YANDEX_APP_ID

**Smoke Tests (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–æ 11 —Ç–µ—Å—Ç–æ–≤):**
- Wallet balance check
- Matchmaking: join ‚Üí status ‚Üí cancel
- Shop offers list
- –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã Stage A —Ç–µ—Å—Ç—ã: health, config, auth, profile, idempotency

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**
- **Platform abstraction**: –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –ø–æ platformType (dev/telegram/yandex/poki)
- **Matchmaking**: Redis ZSET –¥–ª—è FIFO, match assignments —Ö—Ä–∞–Ω—è—Ç—Å—è 5 –º–∏–Ω—É—Ç
- **Wallet**: PostgreSQL transactions –¥–ª—è atomicity, idempotency –∫–ª—é—á: (user_id, operation_id)
- **Shop**: –û—Ñ—Ñ–µ—Ä—ã –∏–∑ RuntimeConfig ‚Üí –≥–∏–±–∫–æ—Å—Ç—å –¥–ª—è LiveOps
- **Ads**: Grant-based flow –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç reward farming

**–§–∞–π–ª—ã:**
- –°–æ–∑–¥–∞–Ω–æ 17 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–æ 3 —Ñ–∞–π–ª–∞ (AuthService.ts, server.ts, run-smoke-tests.ps1)

**–û—Ü–µ–Ω–∫–∞ vs —Ñ–∞–∫—Ç:** Stage B –æ—Ü–µ–Ω–µ–Ω –≤ 12-15 –¥–Ω–µ–π, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∑–∞ 1 —Å–µ—Å—Å–∏—é (–≤–º–µ—Å—Ç–µ —Å Stage A).

### Stage A - MetaServer Infrastructure (–ó–ê–í–ï–†–®–ï–ù–û)

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ë–î:**
- Docker Compose: PostgreSQL 16-alpine, Redis 7-alpine —Å health checks –∏ persistent volumes
- Database schema: 18 —Ç–∞–±–ª–∏—Ü —Å–æ–≥–ª–∞—Å–Ω–æ Architecture v4.2.5 Part 4 Appendix B
  - Core: users, sessions, profiles, wallets
  - Economy: transactions (—Å idempotency —á–µ—Ä–µ–∑ UNIQUE constraints), unlocked_items
  - Progression: battlepass_progress, mission_progress, achievements, daily_rewards
  - Ratings: player_ratings (Glicko-2: rating, rd, sigma)
  - Monetization: purchase_receipts
  - Social: social_invites, ab_tests
  - System: configs (RuntimeConfig versions), audit_log, match_results
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: runner —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π .sql —Ñ–∞–π–ª–æ–≤
- Connection pooling: PostgreSQL (max 20), Redis client

**MetaServer HTTP API:**
- Express.js 4.18 + CORS
- Endpoints:
  - GET /health ‚Äî health check
  - POST /api/v1/auth/verify ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - POST /api/v1/auth/logout ‚Äî revoke —Å–µ—Å—Å–∏–∏
  - GET /api/v1/config/runtime ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é RuntimeConfig
  - GET /api/v1/profile ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç auth)
  - POST /api/v1/profile/nickname ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∏–∫–Ω–µ–π–º (idempotent)
- Auth middleware: Bearer token validation
- Graceful shutdown handlers

**–°–µ—Ä–≤–∏—Å—ã:**
- ConfigService: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ RuntimeConfig, atomic activation
- AuthService: Opaque token auth (32-byte random, SHA-256 hash, 30-day sessions), platform-agnostic
- PlayerService: Profile management, nickname updates, XP progression

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**
- **Opaque tokens** –≤–º–µ—Å—Ç–æ JWT: –ø—Ä–æ—â–µ, revocable, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Architecture
- **Platform abstraction**: –≥–æ—Ç–æ–≤–æ –∫ –∞–¥–∞–ø—Ç–µ—Ä–∞–º Telegram, Yandex, Poki
- **Idempotency**: UNIQUE constraints –Ω–∞ (user_id, operation_id) –≤ transactions
- **Default RuntimeConfig**: v1.0.0 —Å paymentsEnabled: false

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- PowerShell smoke tests: 6 test cases (health, config, auth, profile, nickname update, idempotency)
- Bash-–≤–µ—Ä—Å–∏—è smoke tests

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- server/src/meta/README.md ‚Äî Quick start guide (Docker, migrations, API, development workflow)
- tests/smoke/README.md ‚Äî Manual test instructions + curl examples

**–§–∞–π–ª—ã:**
- –°–æ–∑–¥–∞–Ω–æ 13 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–æ 2 —Ñ–∞–π–ª–∞ (docker-compose.yml, server/package.json)

**–ì–æ—Ç–æ–≤–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**
```bash
docker-compose up postgres redis
npm run db:migrate
npm run dev:meta
./tests/smoke/run-smoke-tests.ps1
```

**–û—Ü–µ–Ω–∫–∞ vs —Ñ–∞–∫—Ç:** Stage A –æ—Ü–µ–Ω–µ–Ω –≤ 5-7 –¥–Ω–µ–π, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∑–∞ 1 —Å–µ—Å—Å–∏—é.

### –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Soft Launch

- **–°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ docs/soft-launch/:** 9 —Ñ–∞–π–ª–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞ v1.5.6
  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v4.2.5 (—á–∞—Å—Ç–∏ 1-4): 72,979 —Å—Ç—Ä–æ–∫ —Å—É–º–º–∞—Ä–Ω–æ
  - –¢–ó v1.4.7: 15,587 —Å—Ç—Ä–æ–∫
  - –ü–ª–∞–Ω v1.0.5: 11,080 —Å—Ç—Ä–æ–∫
  - –®–∞–±–ª–æ–Ω—ã v1.0.1: 5,848 —Å—Ç—Ä–æ–∫
  - AI Agent Guides v1.0.1: 6,944 —Å—Ç—Ä–æ–∫
  - –ò–Ω–¥–µ–∫—Å v1.5.6: 2,448 —Å—Ç—Ä–æ–∫
- **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏:** 21 —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ docs/archive/
  - TZ-SoftLaunch v1.0 (25,981 —Å—Ç—Ä–æ–∫ ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
  - –°—Ç–∞—Ä—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: v1.4, v1.5, v3.3
  - –°—Ç–∞—Ä—ã–µ GDD: v2.3, v2.4, v2.5
  - –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–ª–∞–Ω—ã: v1.7, v1.8, v3.3
  - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: AlbumDB, Flight TZ, UI Screens
- **–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤:** 3 —Ñ–∞–π–ª–∞ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–∞-–∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞.md (6,653 —Å—Ç—Ä–æ–∫)
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–∞-–∫–æ–¥–µ—Ä–∞.md (11,760 —Å—Ç—Ä–æ–∫)
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞.md (14,198 —Å—Ç—Ä–æ–∫)

### –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Soft Launch (—Å–æ—Å—Ç–∞–≤–ª–µ–Ω)

- **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 40-55 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π, 5 —ç—Ç–∞–ø–æ–≤
- **Stage A ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π (P0, 5-7 –¥–Ω–µ–π):**
  - Docker Compose: PostgreSQL, Redis
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
  - MetaServer (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π HTTP API)
  - Smoke-—Ç–µ—Å—Ç—ã –¥–ª—è stage
- **Stage B ‚Äî –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∏–Ω–∏–º—É–º (P0, 12-15 –¥–Ω–µ–π):**
  - –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è (IAuthProvider, IAdsProvider, IPaymentProvider)
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª—å
  - –ú–∞—Ç—á–º–µ–π–∫–∏–Ω–≥ (–æ—á–µ—Ä–µ–¥—å, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
  - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞ –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞
- **Stage C ‚Äî –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è & LiveOps (P1, 8-10 –¥–Ω–µ–π):**
  - –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (RuntimeConfig —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
  - –ú–∞–≥–∞–∑–∏–Ω (–æ—Ñ—Ñ–µ—Ä—ã, –ø–æ–∫—É–ø–∫–∏ –∑–∞ –≤–∞–ª—é—Ç—É)
  - –†–µ–∫–ª–∞–º–∞ —Å –Ω–∞–≥—Ä–∞–¥–æ–π (grantId-based)
  - A/B —Ç–µ—Å—Ç—ã (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
- **UI Refactoring (P0 —á–∞—Å—Ç–∏—á–Ω–æ, 10-12 –¥–Ω–µ–π):**
  - Preact –º–∏–≥—Ä–∞—Ü–∏—è
  - ScreenManager (—Å—Ç–µ–∫ —ç–∫—Ä–∞–Ω–æ–≤, –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞)
  - HUD –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 5-10 Hz)
  - Safe-area –∏ –∫–Ω–æ–ø–∫–∞ "–Ω–∞–∑–∞–¥"
- **Stage D ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (P0, 5-7 –¥–Ω–µ–π):**
  - Smoke-—Ç–µ—Å—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π
  - –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —ç–∫–æ–Ω–æ–º–∏–∫–∏
  - –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (targetCCU=500, RPS=100)

### –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

- **–†–µ–π—Ç–∏–Ω–≥:** Glicko-2 (initialRating=1500, initialRD=350, initialSigma=0.06)
- **–ú–∞—Ç—á–º–µ–π–∫–∏–Ω–≥:** –ë–æ—Ç—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã (botsPerMatch=1, botRatingStrategy=median, botsAffectRating=false)
- **–†–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏:** –û—Ç–∫–ª—é—á–µ–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ —Å–æ—Ñ—Ç-–ª–æ–Ω—á–∞ (features.json ‚Üí paymentsEnabled=false)
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** reconnectWindowMs=15000, summaryTTL=86400000
- **–¶–µ–ª–µ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** CCU=500, playersPerRoom=10, targetRooms=60

### –ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (v0.2.2)

- **–í—ã–ø—É—Å–∫ v0.2.2:** –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ README (—Å v0.2), –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ CI/CD, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≥–æ—Ç–æ–≤—ã –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ GHCR —á–µ—Ä–µ–∑ GitHub Actions.
- **[P0 FIX] –ó–∞–ª–∏–ø–∞–Ω–∏–µ –¥–∂–æ–π—Å—Ç–∏–∫–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–º–µ–Ω–∏–π (–ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï):** –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ - –±—Ä–∞—É–∑–µ—Ä—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç compatibility mouse events –Ω–∞ touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –∞–∫—Ç–∏–≤–∏—Ä—É—è `mouseState`. –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–ª–µ–Ω `if (isCoarsePointer) return;` –≤ `onMouseMove` –∏ `onMouseLeave`; `forceResetJoystickForAbility` —Ç–µ–ø–µ—Ä—å —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `mouseState.active = false`.
- **–£–ª—É—á—à–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Counter-acceleration):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä-—É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–ª—è –¥–∂–æ–π—Å—Ç–∏–∫–∞, –¥–æ–±–∞–≤–ª–µ–Ω—ã TypeScript-—Ç–∏–ø—ã (PR #30).
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (PR #29):** P0 Fix –∑–∞–ª–∏–ø–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ —É–º–µ–Ω–∏–π, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ mouse-—Å–æ–±—ã—Ç–∏–π –Ω–∞ touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–µ–Ω—Å–æ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞, –º–æ–¥—É–ª—å–Ω—ã–π –¥–∂–æ–π—Å—Ç–∏–∫.
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Docker:** –¥–æ–±–∞–≤–ª–µ–Ω—ã workflow –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–æ–≤ –≤ GHCR, –ø–ª—é—Å —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–≤–æ–¥ –ø–∞–∫–µ—Ç–æ–≤ –≤ public.
- **–ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Claude Opus 4.5):** –ü—Ä–æ–≤–µ–¥—ë–Ω –∞–Ω–∞–ª–∏–∑ God Objects, —Å–æ–∑–¥–∞–Ω `docs/Refactoring-Plan-Claude-Opus-4.5.md`. –í—ã—è–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: `ArenaRoom.ts` (4,026 —Å—Ç—Ä–æ–∫), `main.ts` (4,958 —Å—Ç—Ä–æ–∫), `config.ts` (2,982 —Å—Ç—Ä–æ–∫–∏). –û—Ü–µ–Ω–∫–∞: 18-29 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π, 3 —Ñ–∞–∑—ã.
- **–ú–æ–±–∏–ª—å–Ω—ã–π –≤–≤–æ–¥:** –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (maximum/minimum-scale, user-scalable=no) –Ω–∞ –≤—Ä–µ–º—è –º–∞—Ç—á–∞; –∑–∞—â–∏—Ç–∞ –æ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∂–µ—Å—Ç–∞–º–∏; –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–µ–Ω—Å–æ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–º–µ–Ω–∏–π.
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –¥–∂–æ–π—Å—Ç–∏–∫–∞:** –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ pointer/resize/visibility –∏ –∫–ª–∏–∫–æ–≤ —É–º–µ–Ω–∏–π (—Ñ–ª–∞–≥ `?debugJoystick=1`).
- **–†–µ–ª–∏–∑ v0.2:** –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ–ª–∏–∑–∞ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ GHCR, —Å—Å—ã–ª–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ README.
- **–®–∞–≥ 1:** –°–æ–±–∏—Ä–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª `pull` –∫–∞–∫ —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —É–º–µ–Ω–∏–µ, `slow` –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ –æ–±—â–∏–π –ø—É–ª –∫–∞—Ä—Ç–æ—á–µ–∫.
- **–®–∞–≥ 2:** –ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –æ—Ä–±–æ–≤ –∫ –ø–∞—Å—Ç–∏ (getMouthPoint: 1.9 —Ä–∞–¥–∏—É—Å–∞), –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–º–µ—â–µ–Ω–∞.
- **–®–∞–≥ 3:** –ú—ã—à—å –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –¥–∂–æ–π—Å—Ç–∏–∫. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–ö: –∫—É—Ä—Å–æ—Ä –∑–∞–¥–∞—ë—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
- **–®–∞–≥ 4:** –ö–ª–∏–∫ –º—ã—à—å—é –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º —É–º–µ–Ω–∏–π/—Ç–∞–ª–∞–Ω—Ç–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏.
- **–®–∞–≥ 5:** –ë–∞–ª–∞–Ω—Å –¥–≤–∏–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—ë–Ω: —Ç—è–≥–∞ –≤–ø–µ—Ä—ë–¥ +1.5x, –±–æ–∫–æ–≤–∞—è/—Ä–µ—Ç—Ä–æ –∏ —É–≥–ª–æ–≤–∞—è —Ç—è–≥–∞ -1.5x.
- **–®–∞–≥ 6:** –ù–∞–≥—Ä–∞–¥—ã —Å—É–Ω–¥—É–∫–æ–≤ - –≤—Å–ø—ã—à–∫–∞ –∏ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç (—Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –Ω–∞–≥—Ä–∞–¥—ã/—Ç–∞–ª–∞–Ω—Ç–∞).
- **–ù–∞–≥—Ä–∞–¥—ã —Å—É–Ω–¥—É–∫–æ–≤:** –ø—Ä–∏ —Ç–∞–ª–∞–Ω—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä—è–¥–æ–º —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Ä–µ–¥–∫–æ—Å—Ç—å—é –Ω–∞ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥.
- **–§–∏–∫—Å –ü–ö-–∫–ª–∏–∫–∞ –ø–æ —Ç–∞–ª–∞–Ω—Ç—É:** –≤—ã–±–æ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö input-–ø–∞–∫–µ—Ç–∞—Ö.
- **–ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞–ª–∞–Ω—Ç–æ–≤/—É–º–µ–Ω–∏–π:** –≤—ã–±–æ—Ä –≤—ã–Ω–µ—Å–µ–Ω –≤ –±–æ–∫–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏ –∏ –Ω–µ –º–µ—à–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é; –∫–ª–∏–∫ –º—ã—à—å—é –Ω–∞ –ü–ö —Ä–∞–±–æ—Ç–∞–µ—Ç.
- **–ö–∞—Ä—Ç–æ—á–∫–∏ –≤—ã–±–æ—Ä–∞:** —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä—É–ø–Ω–æ–π –ø–æ—Ç–µ—Ä–µ –º–∞—Å—Å—ã, –º–µ–ª–∫–∏–µ –ø–æ—Ç–µ—Ä–∏ –Ω–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Å–æ–≤:** –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ GDD (collector: `eatingPowerMult` = 1.25, `radiusMult` = 1; warrior: `biteResistPct` = 0).
- **–ó–∞–º–µ—á–∞–Ω–∏—è —Ä–µ–≤—å—é:** –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–∞—Å—Å–∞ scatter-–æ—Ä–±–æ–≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ—á–∫–∏ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è.
- **–ó–∞–º–µ—á–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏:** –≤—ã–±–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ —É–±—Ä–∞–Ω –∏–∑ `input`, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `pendingLavaScatterMass`, –æ—á–∏—â–∞—é—Ç—Å—è `pendingChestRewards`.
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã:** –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ `pendingChestRewards`, –≤—ã–Ω–µ—Å–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —à–∏–ø–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤, –æ–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏ —Ç–∞–ª–∞–Ω—Ç–æ–≤, `chests.onRemove` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏–∑ `chest`, `.claude/` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `.gitignore`.
- **–ë–∞–ª–∞–Ω—Å:** –æ—Ç–∫–ª—é—á–µ–Ω—ã –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ç–∞–ª–∞–Ω—Ç—ã `sense`, `regeneration`, `momentum`, `berserk`, `symbiosis`; `turnTorqueNm` = 24000 –¥–ª—è –≤—Å–µ—Ö `slimeConfigs`.
- **Known Issues 11.1-11.4:** –°–µ—Ç–∫–∞ —è—Ä—á–µ, –ø–æ–ª–µ –æ–±–∑–æ—Ä–∞ x2, —à–∏–ø–∞—Å—Ç—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è —Å —à–∏–ø–∞–º–∏ –∏ ‚ö†, scatter-–æ—Ä–±—ã min 5 –∫–≥.
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** GDD –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ 3.3.2 (–≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã).

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (feat/ux-improvements)
- [x] –®–∞–≥ 1: –°–æ–±–∏—Ä–∞—Ç–µ–ª—å ‚Äî —Å–º–µ–Ω–∞ —É–º–µ–Ω–∏—è.
- [x] –®–∞–≥ 2: –ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –æ—Ä–±–æ–≤ –∫ –ø–∞—Å—Ç–∏.
- [x] –®–∞–≥ 3: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–∂–æ–π—Å—Ç–∏–∫–∞ –¥–ª—è –º—ã—à–∏.
- [x] –®–∞–≥ 4: –ö–ª–∏–∫ –º—ã—à–∫–æ–π –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º.
- [x] –®–∞–≥ 5: –ë–∞–∑–æ–≤–∞—è —Ç—è–≥–∞ –∏ —É–≥–ª–æ–≤–æ–π –º–æ–º–µ–Ω—Ç x2.
- [x] –®–∞–≥ 6: –ù–∞–≥—Ä–∞–¥—ã —Å—É–Ω–¥—É–∫–æ–≤.
- [x] Known Issue 11.1: –°–µ—Ç–∫–∞ —è—Ä—á–µ + major-–ª–∏–Ω–∏–∏.
- [x] Known Issue 11.2: –ü–æ–ª–µ –æ–±–∑–æ—Ä–∞ x2.
- [x] Known Issue 11.3: –®–∏–ø–∞—Å—Ç—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ —à–∏–ø–∞–º–∏.
- [x] Known Issue 11.4: Scatter-–æ—Ä–±—ã min 5 –∫–≥.

**–í—Å–µ UX-—É–ª—É—á—à–µ–Ω–∏—è –∏ Known Issues –∑–∞–≤–µ—Ä—à–µ–Ω—ã!**

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (Soft Launch ‚Äî Stage A)

- [x] –ü–æ–¥–Ω—è—Ç—å PostgreSQL –∏ Redis –≤ Docker Compose
- [x] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (—Å—Ö–µ–º–∞ –∏–∑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã v4.2.5 Part 4, Appendix B)
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MetaServer —Å—Ç—Ä—É–∫—Ç—É—Ä—É (routes, services, db)
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã HTTP API (auth/verify, config/runtime, profile)
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ PostgreSQL –¥–ª—è stage (—á–µ—Ä–µ–∑ volume persistence)
- [x] –ù–∞–ø–∏—Å–∞—Ç—å smoke-—Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- [x] **–†–µ—à–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã:**
  - [x] Prisma vs pg –¥–ª—è PostgreSQL? (–í—ã–±—Ä–∞–Ω–æ: pg)
  - [x] JWT vs opaque tokens –¥–ª—è —Å–µ—Å—Å–∏–π? (–í—ã–±—Ä–∞–Ω–æ: opaque tokens)
  - [x] –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤: Git —Ñ–∞–π–ª—ã vs configs —Ç–∞–±–ª–∏—Ü–∞? (–í—ã–±—Ä–∞–Ω–æ: configs table + versioning)

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (Soft Launch ‚Äî Stage B)

- [x] –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è (IAuthProvider)
- [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Dev, Telegram, Yandex, Poki)
- [x] –°–µ—Ä–≤–∏—Å –º–∞—Ç—á–º–µ–π–∫–∏–Ω–≥–∞ (Redis queue)
- [x] –°–µ—Ä–≤–∏—Å –∫–æ—à–µ–ª—å–∫–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [x] –°–µ—Ä–≤–∏—Å –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- [x] –°–µ—Ä–≤–∏—Å —Ä–µ–∫–ª–∞–º—ã (Grants)

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (Soft Launch ‚Äî Stage C)

- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ (RuntimeConfig CRUD)
- [x] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Service + API)
- [x] –ü–ª–∞—Ç—ë–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Telegram Stars, Yandex Pay)
- [x] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Service + API)
- [x] Admin API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (UI Refactoring)

- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Preact + Vite
- [x] ScreenManager implementation
- [x] HUD Refactoring
- [x] Main Menu Refactoring
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UIBridge –≤ main.ts
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ DOM-–∫–æ–¥–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Flight Assist –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –¥–∂–æ–π—Å—Ç–∏–∫–∞ (—Å–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–Ω–æ—Å–æ–≤ –∏ –æ—Å—Ü–∏–ª–ª—è—Ü–∏–∏, —É–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏)

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (Sprint 1 ‚Äî Client Integration)

- [x] MetaServerClient HTTP –∫–ª–∏–µ–Ω—Ç
- [x] PlatformManager + Adapters (Telegram, Standalone)
- [x] AuthService (client)
- [x] ConfigService (client)
- [x] MatchmakingService (client)
- [x] Auth/Matchmaking signals –≤ gameState.ts
- [x] Matchmaking UI –≤ MainMenu.tsx
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.ts

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (Sprint 2 ‚Äî Server Integration)

- [ ] MatchResultService (`server/src/services/MatchResultService.ts`)
- [ ] match-results endpoint (`server/src/meta/routes/matchResults.ts`)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ArenaRoom.endMatch()
- [ ] joinToken validation –≤ ArenaRoom

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (Sprint 3 ‚Äî Stage D Testing)

- [ ] Smoke-—Ç–µ—Å—Ç—ã –ø–æ–ª–Ω–æ–≥–æ flow
- [ ] –¢–µ—Å—Ç—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã k6 (CCU=500)

## –û—Ç–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–∞—á–∏ (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞)

- [ ] –§–∞–∑–∞ 0.1: –¢–∏–ø–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º —Å–µ—Ä–≤–µ—Ä–∞ (`room: any` ‚Üí –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- [ ] –§–∞–∑–∞ 0.2: –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è mathUtils
- [ ] –§–∞–∑–∞ 1.1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ main.ts
- [ ] –§–∞–∑–∞ 1.2: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π
- [ ] –§–∞–∑–∞ 2.1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ AbilityManager –∏–∑ ArenaRoom
- [ ] –§–∞–∑–∞ 2.2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ CombatManager –∏–∑ ArenaRoom
- [ ] –§–∞–∑–∞ 3.1: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ config.ts –Ω–∞ –º–æ–¥—É–ª–∏
