# Progress
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á.

## –ö–æ–Ω—Ç—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **last_checked_commit**: –≤–µ—Ç–∫–∞ `main` –ø–æ—Å–ª–µ –º–µ—Ä–∂–∞ PR #4 (25 –¥–µ–∫–∞–±—Ä—è 2025)
- **–†–µ–∑—é–º–µ**: PR #4 —Å–º–µ—Ä–∂–µ–Ω. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞. –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ –æ—á–∏—â–µ–Ω.

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏
- **–°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Bitrix –∏–ª–∏ –∏–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤. –ü—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å—Ç—ã–º SPA –Ω–∞ Vite. UI —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.

## –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Memory Bank.
- [x] –ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
- [x] –ê–Ω–∞–ª–∏–∑ legacy-–∫–æ–¥–∞ –∏ –≤–Ω–µ—à–Ω–∏—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ CI/CD –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## –ó–∞–¥–∞—á–∞: –ü–ª–∞–≤–Ω–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è (–ó–ê–í–ï–†–®–ï–ù–ê ‚úì)
- [x] –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (F3) –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞.
- [x] –®–∞–≥ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–∞ —Å–Ω–∞–ø—à–æ—Ç–æ–≤ (–æ—Ç–∫–∞—Ç ‚Äî –ø–æ–¥—Ö–æ–¥ –±—ã–ª –Ω–µ–≤–µ—Ä–Ω—ã–º).
- [x] –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ U2 EntitySmoother ‚Äî –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç.
- [x] –®–∞–≥ 4: U2-—Å—Ç–∏–ª—å –ø—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è:
  - –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`visualPlayers`, `visualOrbs`)
  - `smoothStep()` ‚Äî dog–æ–Ω—è–Ω–∏–µ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∑–∞—Ç—É—Ö–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
  - –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å: `server_pos + velocity * lookAheadMs`
- [x] –®–∞–≥ 5: Flight-TZ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∏–∑ balance.json).
- [x] –®–∞–≥ 6: –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –æ—Ä–±–æ–≤ (`density`) –≤ —Ñ–∏–∑–∏–∫–µ.
- [x] –®–∞–≥ 7: –¢–µ—Å—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞ ‚Äî –ø—Ä–æ–π–¥–µ–Ω.
- [x] –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî "–Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ!"
- [x] –®–∞–≥ 9: –ö–æ–º–º–∏—Ç –∏ –ø—É—à –≤–µ—Ç–∫–∏.
- [x] –®–∞–≥ 10: PR #2 —Å–º–µ—Ä–∂–µ–Ω –≤ main.

## –ó–∞–¥–∞—á–∞: –£–ª—É—á—à–µ–Ω–∏–µ smoothStep (–ó–ê–í–ï–†–®–ï–ù–ê ‚úì)
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è velocity —Å –≤–µ—Å–æ–º `VELOCITY_WEIGHT = 0.7`
- [x] –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ ClientNetSmoothingConfig
- [x] –í–µ—Ç–∫–∞ `fix/smoothing-hermite-cleanup` —Å–æ–∑–¥–∞–Ω–∞ –∏ –∑–∞–ø—É—à–µ–Ω–∞

## –ó–∞–¥–∞—á–∞: PR #4 Gameplay/UI Improvements (‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê)

### –§–∏—á–∏ (10 –∑–∞–¥–∞—á)
- [x] **Results screen** ‚Äî overlay –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –º–∞—Ç—á–∞ (–ø–æ–±–µ–¥–∏—Ç–µ–ª—å, –ª–∏–¥–µ—Ä–±–æ—Ä–¥ 10, —Ç–∞–π–º–µ—Ä 3—Å–µ–∫)
- [x] **Name generator** ‚Äî –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å shared/src/nameGenerator.ts (—Ä—É—Å—Å–∫–∏–µ –∏–º–µ–Ω–∞ + —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å)
- [x] **PvP mass steal** ‚Äî –∫—Ä–∞–∂–∞ –º–∞—Å—Å—ã –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —É—Ä–æ–Ω—É (damagePct)
- [x] **Mouse control** ‚Äî agar.io —Å—Ç–∏–ª—å, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ balance.json (mouseDeadzone, mouseMaxDist)
- [x] **mathUtils** ‚Äî –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å shared/src/mathUtils.ts (clamp, lerp, wrapAngle, distance)
- [x] **Crown emoji** ‚Äî üëë –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º KING –≤ HUD –∏ Results overlay
- [x] **Leaderboard** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–æ 10 –∑–∞–ø–∏—Å–µ–π, HUD –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø-5
- [x] **Unique names** ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–º—ë–Ω –≤ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ
- [x] **Codex High fix** ‚Äî smoothing constants ‚Üí balance.json —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [x] **Codex Medium fix** ‚Äî —É–¥–∞–ª—ë–Ω snapshotBuffer, —Ç–æ–ª—å–∫–æ latestSnapshot

### Codex Review Fixes –†–∞—É–Ω–¥ 1 (7 issues)
- [x] HIGH: smoothing constants ‚Üí balance.json
- [x] MEDIUM: buffer optimization (latestSnapshot)
- [x] LOW: lastUpdateMs —É–¥–∞–ª—ë–Ω
- [x] LOW: "–ë–ª–æ–±" ‚Üí "–ö–∏—Å–µ–ª—å"
- [x] LOW: wrapAngle O(1)
- [x] LOW: matchMedia –∫—ç—à–∏—Ä–æ–≤–∞–Ω
- [x] LOW: Input priority –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

### Codex Review Fixes –†–∞—É–Ω–¥ 2 (4 issues)
- [x] MEDIUM: JoystickConfig.mode ‚Äî —É–±—Ä–∞–Ω "dynamic"
- [x] MEDIUM: –í–∞–ª–∏–¥–∞—Ü–∏—è smoothing params (velocityWeight [0..1], teleportThreshold >= 1)
- [x] LOW: –£–¥–∞–ª—ë–Ω snapshotBuffer –ø–æ–ª–Ω–æ—Å—Ç—å—é (U2-—Å—Ç–∏–ª—å)
- [x] LOW: lookAheadMs ‚Äî –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ —á–µ—Ä–µ–∑ getSmoothingConfig()

### Copilot Review Fixes –†–∞—É–Ω–¥ 1 (8 issues)
- [x] DRY: createLcg() helper
- [x] Safety: mass > 0 –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] Performance: Math.sqrt
- [x] DOM API: Results leaderboard
- [x] Unique names: generateUniqueName()
- [x] HTML escaping
- [x] Input priority
- [x] Shared exports

### Copilot Review Fixes –†–∞—É–Ω–¥ 2 (6 issues)
- [x] –£–¥–∞–ª—ë–Ω –≤–≤–æ–¥—è—â–∏–π –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π Math.sqrt vs Math.hypot
- [x] PvP –∫—Ä–∞–∂–∞ –º–∞—Å—Å—ã –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —É—Ä–æ–Ω—É (damagePct)
- [x] nameSeed –∏–∑ sessionId (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç RNG —Å–∏–º—É–ª—è—Ü–∏–∏)
- [x] –ë–∞–ª–∞–Ω—Å 50%/25% ‚Äî –æ—Å—Ç–∞–≤–ª–µ–Ω (–Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω: –º–∞—Å—Å–∞ "—Å–≥–æ—Ä–∞–µ—Ç")
- [x] Mouse control: mouseDeadzone, mouseMaxDist –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ balance.json
- [x] HUD: —Ç–æ–ø-3 ‚Üí —Ç–æ–ø-5, —Ç–µ–∫—Å—Ç "–õ–∏–¥–µ—Ä—ã:"

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- [x] npm run build PASS (0 errors, gzip 32.29 kB)
- [x] npm run test PASS (determinism)
- [x] 9 commits (0654687 HEAD):
  - 10b2949: feat: gameplay-ui improvements
  - 1ce75e8: fix: self-review
  - 97c5976: smoothing constants ‚Üí balance.json
  - 011199a: review fixes —Ä–∞—É–Ω–¥ 1
  - 05759b4: buffer optimization
  - 824be93: Copilot fixes —Ä–∞—É–Ω–¥ 1
  - 282835f: PvP balance
  - ca57dec: docs: Memory Bank
  - 0654687: fix: Codex/Copilot review —Ä–∞—É–Ω–¥ 2

## –ó–∞–¥–∞—á–∞: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è U2-—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è (–ó–ê–í–ï–†–®–ï–ù–ê ‚úì)
- [x] –°–æ–∑–¥–∞–Ω `.memory_bank/modules/U2-smoothing.md`
- [x] –û–±–Ω–æ–≤–ª—ë–Ω GDD –¥–æ v2.4.1 (—Ä–∞–∑–¥–µ–ª 0.11)
- [x] –û–±–Ω–æ–≤–ª—ë–Ω Architecture –¥–æ v1.5.1 (—Ä–∞–∑–¥–µ–ª 10)
- [x] –û–±–Ω–æ–≤–ª—ë–Ω Plan –¥–æ v1.8.1 (–æ—Ç–º–µ—á–µ–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º)
- [x] –û–±–Ω–æ–≤–ª—ë–Ω Flight-TZ –¥–æ v1.0.1 (—Ä–∞–∑–¥–µ–ª 13)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã activeContext.md –∏ progress.md

## –ó–∞–¥–∞—á–∞: –û—á–∏—Å—Ç–∫–∞ –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ (25 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê)

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (3 –∑–∞–¥–∞—á–∏)
- [x] **README.md**: –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
  - GDD: v2.3 ‚Üí v2_4
  - Architecture: v1.4 ‚Üí v1.5
  - Plan: v1.7 ‚Üí v1.8
- [x] **activeContext.md**: –°—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –º–µ—Ä–∂–∞ PR #4
- [x] **progress.md**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏

### –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (1 –∑–∞–¥–∞—á–∞)
- [x] **balance.json**: –£–¥–∞–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `movement`
  - baseSpeed, baseTurnRateDeg, turnDivisor ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
  - driftTurnRateDeg, driftThresholdAngleDeg ‚Äî drift –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
  - driftDurationSec, driftSpeedLoss, driftCooldownSec ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
  - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–≤–∏–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –≤ `slimeConfigs` —á–µ—Ä–µ–∑ FlightAssist
- [x] **ArenaRoom.ts**: –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  - driftDurationTicks (–æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
  - driftCooldownTicks (–æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)

## –ó–∞–¥–∞—á–∞: Mass-as-HP System (25 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê)

### Phase 0: –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- [x] –°–æ–∑–¥–∞–Ω–∞ `.memory_bank/modules/mass-as-hp-spec.md`

### Phase 1: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] **balance.json** ‚Äî –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã pvpBite*
- [x] **shared/src/config.ts** ‚Äî —Ç–∏–ø—ã –∏ default –∑–Ω–∞—á–µ–Ω–∏—è
- [x] –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `movement.*` ‚Äî –≤—Å—è —Å–µ–∫—Ü–∏—è
  - `combat.lastBreathDamageMult`
  - `combat.massStealPercent`
  - `combat.pvpBiteDamage*` (—Å—Ç–∞—Ä—ã–µ)
  - `combat.pvpVictimMassLossPct` (—Å—Ç–∞—Ä—ã–π)
  - `combat.pvpAttackerMassGainPct` (—Å—Ç–∞—Ä—ã–π)
  - `formulas.hp`
  - `classes.hunter.hpMult`
  - `classes.warrior.hpMult`

### Phase 2: –£–¥–∞–ª–µ–Ω–∏–µ HP
- [x] **GameState.ts** ‚Äî —É–¥–∞–ª–µ–Ω—ã `hp`, `maxHp` –∏–∑ Player
- [x] **ArenaRoom.ts** ‚Äî —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ hp/maxHp
- [x] **ArenaRoom.ts** ‚Äî —É–¥–∞–ª—ë–Ω –º–µ—Ç–æ–¥ `updateMaxHpForMass()`

### Phase 3: –ù–æ–≤—ã–π PvP Bite
- [x] **processCombat()** –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è mass-only
  - –ñ–µ—Ä—Ç–≤–∞ —Ç–µ—Ä—è–µ—Ç 20% –º–∞—Å—Å—ã
  - –ê—Ç–∞–∫—É—é—â–∏–π –ø–æ–ª—É—á–∞–µ—Ç 10%
  - Zone multiplier (tail = 1.5x, mouth = 0.5x)

### Phase 4: Scatter Orbs
- [x] **spawnPvPBiteOrbs()** ‚Äî –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  - 3 –æ—Ä–±–∞ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 200 –º/—Å
  - –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–±—Ä–æ—Å —É–≥–ª–∞ ¬±0.3 —Ä–∞–¥

### Phase 5: Results Freeze
- [x] **onTick()** ‚Äî –ø–æ–ª–Ω–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∞ –ø—Ä–∏ isMatchEnded
- [x] **updateOrbsVisual()** ‚Äî —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–±–æ–≤

### Phase 6: HUD Update
- [x] **SnapshotPlayer** ‚Äî —É–¥–∞–ª–µ–Ω—ã hp/maxHp
- [x] **HUD** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ú–æ—è –º–∞—Å—Å–∞: X –∫–≥"
- [x] **–¢–∞–ª–∞–Ω—Ç—ã** ‚Äî "Mass Boost +30%" –≤–º–µ—Å—Ç–æ "Vital Burst +30% HP"

### Phase 7: –¢–µ—Å—Ç—ã –∏ —Å–±–æ—Ä–∫–∞
- [x] **formulas.ts** ‚Äî —É–¥–∞–ª–µ–Ω—ã getSlimeHp, getSlimeMaxHp, getSlimeBiteDamage
- [x] **index.ts** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω —ç–∫—Å–ø–æ—Ä—Ç
- [x] **npm run build** ‚Äî PASS (0 errors, gzip 32.17 kB)
- [x] **npm run test** ‚Äî PASS (determinism)

### Phase 8: Memory Bank
- [x] **activeContext.md** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω
- [x] **progress.md** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (11)
1. `config/balance.json`
2. `shared/src/config.ts`
3. `shared/src/formulas.ts`
4. `shared/src/index.ts`
5. `server/src/rooms/schema/GameState.ts`
6. `server/src/rooms/ArenaRoom.ts`
7. `client/src/main.ts`
8. `.memory_bank/modules/mass-as-hp-spec.md` (—Å–æ–∑–¥–∞–Ω)
9. `.memory_bank/activeContext.md`
10. `.memory_bank/progress.md`

## –ó–∞–¥–∞—á–∞: –ë–∞–ª–∞–Ω—Å –æ—Ä–±–æ–≤, —Ñ–∏–∑–∏–∫–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∫–∞–º–µ—Ä–∞ (25 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê)

### –§–∏–∫—Å—ã –∫–∞–º–µ—Ä—ã –∏ –º—ã—à–∏ (25 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–´)
- [x] –ö–∞–º–µ—Ä–∞ –¥—ë—Ä–≥–∞–ª–∞—Å—å –Ω–∞ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç smoothedPlayer
- [x] –ú—ã—à—å –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞ ‚Üí –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –ø–æ–∑–∏—Ü–∏–∏ —Å–ª–∞–π–º–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- [x] –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É –∫—Ä–∞—è ‚Üí —Ä–µ—à–µ–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π smoothedPlayerX/Y
- [x] –ö–æ–º–º–∏—Ç—ã: ae5b0d0, 92da9f6
- [x] PR #5 —Å–æ–∑–¥–∞–Ω–∞

### Copilot Review Fixes (26 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–´)
- [x] damageMult –ø—Ä–∏–º–µ–Ω—è–ª—Å—è —Ç–æ–ª—å–∫–æ –∫ massLoss ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —Ç—Ä—ë–º –∑–Ω–∞—á–µ–Ω–∏—è–º
- [x] –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä _minRadius –≤ getOrbRadius ‚Üí —É–¥–∞–ª—ë–Ω
- [x] –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã –≤ GDD 3.5.3 ‚Üí —É–¥–∞–ª—ë–Ω
- [x] –ù–µ—Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ –∏–º–ø—É–ª—å—Å –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏—è –≤ GDD 3.5.4 ‚Üí —É–¥–∞–ª–µ–Ω–∞
- [x] GDD –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω: SlimeArena-GDD-v2_4.md ‚Üí SlimeArena-GDD-v2.5.md
- [x] –ö–æ–º–º–∏—Ç: 12cb70c

### Codex Review Fixes (26 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–´)
- [x] P2: Last Breath return before mass transfer ‚Üí fixed
- [x] Attacker now gains mass even when triggering Last Breath
- [x] Scatter orbs spawn before Last Breath activates
- [x] –ö–æ–º–º–∏—Ç: 4898261

### Merge —Å main (26 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)
- [x] –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã (balance.json, ArenaRoom.ts, Memory Bank)
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ Mass-as-HP —Å–∏—Å—Ç–µ–º–∞
- [x] –¢–µ—Å—Ç—ã –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞ –ø—Ä–æ–π–¥–µ–Ω—ã
- [x] –ö–æ–º–º–∏—Ç: 066a1f8

### Scatter Orbs Fix (26 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)
- [x] –ë–∞–≥: scatter orbs –Ω–µ —Å–ø–∞–≤–Ω–∏–ª–∏—Å—å –∏–∑-–∑–∞ maxCount –ª–∏–º–∏—Ç–∞ (15 –æ—Ä–±–æ–≤)
- [x] –†–µ—à–µ–Ω–∏–µ: forceSpawnOrb() ‚Äî scatter orbs –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –ª–∏–º–∏—Ç
- [x] –ë–∞–ª–∞–Ω—Å: —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑–ª—ë—Ç–∞ 200 ‚Üí 60 –º/—Å (—Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä)
- [x] –ö–æ–º–º–∏—Ç: c47fb73, d61c5f7

### GDD-v2.5 Update (26 –¥–µ–∫–∞–±—Ä—è 2025) (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û)
- [x] –†–∞–∑–¥–µ–ª "HP –∏ –º–∞—Å—Å–∞" ‚Üí "Mass-as-HP" (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è –º–æ–¥–µ–ª—å —É–¥–∞–ª–µ–Ω–∞)
- [x] –û–ø–∏—Å–∞–Ω PvP Bite: 20% –ø–æ—Ç–µ—Ä—è, 10% –∞—Ç–∞–∫—É—é—â–µ–º—É, 10% scatter
- [x] –û–ø–∏—Å–∞–Ω Last Breath: 0.5 —Å–µ–∫ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏
- [x] mass-as-hp-spec.md: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω orb bite —Å 50% –Ω–∞ 10%

## –ó–∞–¥–∞—á–∞: –ë–∞–ª–∞–Ω—Å –æ—Ä–±–æ–≤, —Ñ–∏–∑–∏–∫–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∫–∞–º–µ—Ä–∞ (–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è —á–∞—Å—Ç—å)

### –û—Ä–±—ã ‚Äî —á–µ—Å—Ç–Ω–∞—è —Ñ–∏–∑–∏–∫–∞
- [x] –§–æ—Ä–º—É–ª–∞ —Ä–∞–¥–∏—É—Å–∞: `radius = baseRadius √ó ‚àö(mass / baseMass / density)`
- [x] –ü–ª–æ—Ç–Ω–æ—Å—Ç–∏: green=0.2, blue=0.3, red=0.4, gold=0.5
- [x] Spawn counts: initialCount=10, maxCount=15
- [x] –í–µ—Å–∞: green=45%, blue=30%, red=20%, gold=5%

### –§–∏–∑–∏–∫–∞
- [x] environmentDrag = 0.01 (1% –∑–∞ —Ç–∏–∫, –µ–¥–∏–Ω—ã–π –¥–ª—è –≤—Å–µ—Ö)
- [x] orbLinearDamping = 0 (—É–±—Ä–∞–Ω –∫–∞–∫ –Ω–µ—Ñ–∏–∑–∏—á–µ—Å–∫–∏–π)
- [x] restitution = 0.9 (90% —ç–Ω–µ—Ä–≥–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (FlightAssist)
- [x] turnTorqueNm = 35000 (–±—ã–ª–æ 17500)
- [x] angularSpeedLimitDegps = 180 (–±—ã–ª–æ 80)
- [x] angularStopTimeS = 0.3 (–±—ã–ª–æ 1.0)
- [x] yawRateGain = 4.0 (–±—ã–ª–æ 2.0)

### –ü–æ–µ–¥–∞–Ω–∏–µ –æ—Ä–±–æ–≤
- [x] orbBitePctOfMass = 0.10 (10% –º–∞—Å—Å—ã —Å–ª–∞–π–º–∞)

### –ö–∞–º–µ—Ä–∞ (Agar.io —Å—Ç–∏–ª—å)
- [x] desiredView = 400√ó400 –º (–±—ã–ª–æ 200√ó200)
- [x] –ò–≥—Ä–æ–∫ –≤—Å–µ–≥–¥–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞
- [x] –£–±—Ä–∞–Ω–∞ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∫–∞–º–µ—Ä—ã

### GDD v2.5.0
- [x] –†–∞–∑–¥–µ–ª 2.5: FlightAssist params
- [x] –†–∞–∑–¥–µ–ª 2.7: WorldPhysicsConfig (environmentDrag)
- [x] –†–∞–∑–¥–µ–ª 2.7.1: Camera (–Ω–æ–≤—ã–π)
- [x] –†–∞–∑–¥–µ–ª 3.5.1: –¢–∏–ø—ã –æ—Ä–±–æ–≤ —Å —á–µ—Å—Ç–Ω–æ–π —Ñ–∏–∑–∏–∫–æ–π
- [x] –†–∞–∑–¥–µ–ª 3.5.3: Spawn params
- [x] –†–∞–∑–¥–µ–ª 3.5.4: Bite mechanics

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–æ—Å–Ω–æ–≤–Ω–∞—è –≤–æ–ª–Ω–∞ - 4)
1. `config/balance.json` ‚Äî –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. `client/src/main.ts` ‚Äî –∫–∞–º–µ—Ä–∞ (–ø–µ—Ä–≤–∏—á–Ω–∞—è –≤–µ—Ä—Å–∏—è)
3. `server/src/rooms/ArenaRoom.ts` ‚Äî tryEatOrb()
4. `docs/SlimeArena-GDD-v2_4.md` ‚Äî v2.5.0

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Ñ–∏–∫—Å—ã –∫–∞–º–µ—Ä—ã/–º—ã—à–∏ - 1)
1. `client/src/main.ts` ‚Äî 2 —Ñ–∏–∫—Å–∞—Ü–∏–∏ (–∫–∞–º–µ—Ä–∞ + –º—ã—à—å)

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (Copilot review - 4)
1. `server/src/rooms/ArenaRoom.ts` ‚Äî damageMult consistency
2. `shared/src/formulas.ts` ‚Äî getOrbRadius cleanup
3. `client/src/main.ts` ‚Äî orbMinRadius removed
4. `docs/SlimeArena-GDD-v2.5.md` ‚Äî renamed, fixed duplicate + incorrect description

## –ö–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ –æ—á–∏—Å—Ç–∫—É (Candidate-for-cleanup)
- `legacy/`: –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –ø–∞–π–ø–ª–∞–π–Ω–µ.
- `_ext/u2/`: –í–Ω–µ—à–Ω—è—è –ø–µ—Å–æ—á–Ω–∏—Ü–∞ Universe Unlimited, –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ Slime Arena.
- `local/`: –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ README, –∫–æ—Ç–æ—Ä—ã–π –¥—É–±–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
- `docker/docker-compose.yml`: –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç Dockerfiles).

## –ü–ª–∞–Ω—ã
- [x] **PR #4 –∑–∞–≤–µ—Ä—à–µ–Ω–∞** ‚Äî —Å–º–µ—Ä–∂–µ–Ω–∞ –≤ main
- [x] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ README
- [x] **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—á–∏—â–µ–Ω–∞** ‚Äî —É–¥–∞–ª—ë–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ movement
- [x] **Mass-as-HP —Å–∏—Å—Ç–µ–º–∞** ‚Äî HP —É–¥–∞–ª—ë–Ω, –º–∞—Å—Å–∞ = –∑–¥–æ—Ä–æ–≤—å–µ
- [ ] –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è `ArenaRoom.ts`.
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `main.ts` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.
- [ ] –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Protobuf (—Å–æ–≥–ª–∞—Å–Ω–æ `docs/PROTOBUF_ADOPTION_PLAN.md`).
