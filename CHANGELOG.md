# Журнал изменений

### v0.3.1 — Инфраструктура и стабильность (7 января 2026)

#### Резервное копирование и восстановление (PR #47)
- Реализована полноценная инфраструктура для работы с базой данных PostgreSQL.
- Добавлены автоматизированные сценарии для Windows (`.ps1`) и Linux (`.sh`).
- Проверена целостность данных после восстановления: 19 из 19 тестов Stage D пройдены успешно.

#### Интеграция игровых сервисов (PR #36, #45)
- Настроено взаимодействие между MatchServer и MetaServer.
- Реализована надежная отправка результатов матча с механизмом повторных попыток.
- Исправлено более 10 дефектов логики, включая ошибки в `ArenaRoom.ts` и `MatchResultService.ts`.

#### Мобильное управление и пилотирование (PR #39)
- Настроен помощник пилотирования (Flight Assist) для всех четырех классов персонажей.
- Внедрена поддержка мультитач (одновременное движение и использование способностей).
- Устранена задержка ввода: активация способностей переведена с события `click` на `pointerdown`.

#### Интерфейс и стабильность (PR #37)
- Исправлено 15 известных проблем пользовательского интерфейса версии v0.3.0.
- Добавлены динамические иконки способностей и индикаторы перезарядки.
- Оптимизирован экран результатов матча (ResultsScreen): исправлен порядок отображения и иконки классов.

#### Инфраструктура Docker и TypeScript
- Устранены критические ошибки компиляции `ArenaRoom.ts` в строгом режиме (strict mode).
- Оптимизирован процесс сборки: библиотека `shared` теперь компилируется до запуска основных сервисов.
- Присвоены фиксированные имена контейнерам: `slime-arena-server` и `slime-arena-client`.
- Клиентская часть зафиксирована на порту `5174`.

---

## Глоссарий

- **ArenaRoom**: Основной программный класс, управляющий логикой игрового матча на сервере.
- **Docker**: Система контейнеризации, обеспечивающая запуск игры в изолированной среде.
- **Flight Assist**: Система программной помощи игроку при управлении движением слайма (помощник пилотирования).
- **MatchServer**: Игровой сервер, отвечающий за симуляцию сражения в реальном времени.
- **MetaServer**: Сервер управления пользователями, профилями и статистикой.
- **PostgreSQL**: Система управления базами данных, используемая для хранения профилей игроков.
- **Shared**: Общий программный модуль, содержащий типы и логику, общую для сервера и клиента.
- **TypeScript**: Язык программирования, обеспечивающий проверку типов данных для повышения стабильности кода.

### v0.3.0 — Технологическая перестройка и новый UI (7 января 2026)
- **Полная миграция UI на Preact:** Интерфейс полностью переписан с использованием Preact и @preact/signals. Это позволило уйти от императивного управления DOM и перейти к декларативному, компонентному подходу.
- **Внедрение UIBridge:** Создан новый мост (`UIBridge`) для двунаправленного общения между игровым рендером на Canvas и интерфейсом на Preact.
- **Система управления экранами:** Реализован `ScreenManager` для управления жизненным циклом экранов (Главное меню, HUD, модальные окна).
- **Архитектурные улучшения:** Проведена полная реструктуризация проекта с использованием npm-воркспейсов (`client`, `server`, `shared`), что упростило управление зависимостями и общим кодом.
- **Оптимизация рендеринга HUD:** Частота обновления игрового интерфейса (HUD) снижена до 10 Гц для уменьшения нагрузки на CPU.
- **Критические исправления:** Устранены ошибки типа "race condition" при переподключении к серверу, а также проблема с "призрачными" игроками, которые оставались на арене после дисконнекта.

### v0.2.2 — Mobile & CI/CD (5 января 2026)
- **Mobile Input:** Исправлено залипание управления на тач-устройствах.
- **CI/CD:** Автоматизирована сборка и публикация Docker-образов через GitHub Actions.
