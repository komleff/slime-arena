@echo off
REM Bat —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
REM –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: scripts\stop-servers.bat

setlocal enabledelayedexpansion

echo.
echo ================================================================================
echo  ^^ SLIME ARENA ‚Äî –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
echo ================================================================================
echo.

set "PORTS=2567 5173"
set "KILLED=0"

for %%P in (%PORTS%) do (
    echo üîç –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É %%P...
    
    for /f "tokens=5" %%A in ('netstat -ano ^| findstr :%%P') do (
        if not "%%A"=="" (
            echo    –ù–∞–π–¥–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å —Å PID: %%A
            echo    –û—Å—Ç–∞–Ω–æ–≤–∫–∞...
            taskkill /PID %%A /F > nul 2>&1
            if !ERRORLEVEL! equ 0 (
                echo    ‚úì –ü—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                set "KILLED=1"
            ) else (
                echo    ‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
            )
        )
    )
    echo.
)

if !KILLED! equ 1 (
    echo ================================================================================
    echo ‚úÖ –í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
    echo ================================================================================
) else (
    echo ================================================================================
    echo ‚ÑπÔ∏è  –ù–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 2567, 5173
    echo ================================================================================
)

echo.
