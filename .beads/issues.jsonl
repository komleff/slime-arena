{"id":"slime-arena-07o","title":"Синхронизация REWARDS_CONFIG с balance.json","description":"Copilot/Gemini P1: Вынести REWARDS_CONFIG из matchResultsService.ts в balance.json для синхронизации с сервером. См. slime-arena-0v2.","status":"open","priority":2,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T21:18:27.317573+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:18:27.317573+07:00"}
{"id":"slime-arena-0ba","title":"[P0] Оптимизация ассетов: \u003c5MB для Telegram MiniApp","description":"Критическая проблема: текущие ассеты занимают ~82MB при лимите \u003c5MB для Telegram MiniApp.\n\n**Проблемные файлы:**\n- bg_main_menu.png: 5.9MB (превышает весь лимит!)\n- icon_menu_skins.png: 5.8MB\n- bg_loading_screen.png: 4.0MB\n- sprites/slimes/base/*.png: 31MB (21 файл по ~1.5MB)\n\n**Требуется:**\n1. Конвертация в WebP с сжатием (quality 80-85)\n2. Уменьшение разрешения больших фонов (max 2048px)\n3. Спрайт-атлас для слаймов или lazy loading с CDN\n4. Цель: client/dist \u003c 5MB\n\n**Ссылка:** AGENT_ROLES.md P0 ограничение","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T04:03:03.3734714+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T19:01:34.06071+07:00","closed_at":"2026-01-18T19:01:34.06071+07:00","close_reason":"Завершено в релизе 0.5.1. Размер client/dist уменьшен с 73MB до 1.9MB через WebP конвертацию и assets-dist."}
{"id":"slime-arena-0hg","title":"Баг: гостевой claimToken не проверяет принадлежность матча","description":"**Местоположение:**\n- Файл: server/src/meta/routes/matchResults.ts\n- Строки: 271-284\n\n**Требование из ТЗ:**\n\u003e claimToken должен выдаваться только если match_results.guest_subject_id = guestSubjectId и claim_consumed_at IS NULL.\n\n**Проблема:**\nДля гостя проверка `guest_subject_id` заменяется fallback на первого гостя в playerResults. При отсутствии guest_subject_id любой guestToken может получить claimToken для любого матча с гостем.\n\n**Последствия:**\n- Нарушение авторизации (чужой guest может забрать claimToken)\n- Возможность создания аккаунта/начисления рейтинга на чужой матч\n\n**Решение:**\n- Записывать guest_subject_id при submit (нужен guestSubjectId в MatchSummary)\n- В claim строго проверять guest_subject_id == subjectId и возвращать 403 иначе\n\n**Связанные компоненты:**\n- server/src/meta/routes/matchResults.ts\n- server/src/db/migrations/008_meta_gameplay_columns.sql (guest_subject_id)\n- shared/src/types.ts (MatchSummary)","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-26T03:13:28.4313987+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-27T22:59:37.5963252+07:00","closed_at":"2026-01-27T22:59:37.5963252+07:00","close_reason":"Fixed in PR #109 (Sprint 13 Phase 2)"}
{"id":"slime-arena-0ih","title":"P1: visual теряется в resolveBalanceConfig","description":"**Источник:** Codex ревью PR #82\n\n**Проблема:**\n`resolveBalanceConfig()` не передаёт секцию `visual` в resolved объект. Сервер отправляет `ResolvedBalanceConfig` клиенту через `client.send(\"balance\", this.balance)`, но visual отсутствует.\n\n**Последствия:**\n- `balanceConfig.visual?.mouthSector?.enabled` всегда false\n- Визуализация сектора рта и стрелки ввода не работает\n\n**Файлы:**\n- shared/src/config.ts:1690 — resolveBalanceConfig()\n- server/src/rooms/ArenaRoom.ts:424 — client.send(\"balance\")\n\n**Решение:**\nДобавить visual в resolved объект в resolveBalanceConfig()","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T00:35:17.2551238+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T00:53:28.7923582+07:00","closed_at":"2026-01-17T00:53:28.7923582+07:00","close_reason":"PR #84 merged. visual передаётся через resolveBalanceConfig."}
{"id":"slime-arena-0nu","title":"ConfirmModal - Модальное окно подтверждения","description":"Реализовать ConfirmModal для подтверждения действий (выход из матча, покупка). Кнопки: Да/Отмена. Z-index: 90. Источник: UI-TZ §8.2","notes":"Пока нечего подтверждать","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T21:46:52.2669628+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:32.3260441+07:00"}
{"id":"slime-arena-0qa","title":"[P0] fix: infinite logout loop on 401","description":"When onUnauthorized callback called logout(), the logout request itself would fail with 401 and trigger onUnauthorized again, causing an infinite loop.","notes":"Fixed in cfcf2fe: skip onUnauthorized callback for /logout paths","status":"closed","priority":0,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-29T02:00:42.6061761+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T02:00:47.3296886+07:00","closed_at":"2026-01-29T02:00:47.3296886+07:00","close_reason":"Fixed in commit cfcf2fe - skip onUnauthorized callback for /logout paths"}
{"id":"slime-arena-0v2","title":"Move REWARDS_CONFIG to balance.json","status":"open","priority":2,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T03:09:01.9697634+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T03:09:01.9697634+07:00"}
{"id":"slime-arena-17m","title":"Tech Debt: валидация visual секции в resolveBalanceConfig","description":"**Источник:** Copilot ревью PR #84\n\n**Текущее состояние:**\nvisual передаётся через `as BalanceConfig[\"visual\"]` без валидации.\n\n**Рекомендация:**\nСоздать функцию валидации наподобие readNumber()/readString() для проверки структуры visual (mouthSector, inputArrow, keyboardMixWeight).\n\n**Файл:** shared/src/config.ts:3040","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-17T00:50:26.0078001+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T00:50:26.0078001+07:00"}
{"id":"slime-arena-1fs","title":"AUTH-1: GET /api/v1/auth/config","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:35.4414488+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:35.4414488+07:00"}
{"id":"slime-arena-1ik","title":"SettingsScreen - Экран настроек","description":"Реализовать SettingsScreen: звук/музыка (переключатели), выбор языка (ru/en), userId для поддержки, согласия (только чтение), кнопка Удалить данные -\u003e InfoModal. Источник: UI-TZ §6.2","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:34.177742+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:34.177742+07:00","dependencies":[{"issue_id":"slime-arena-1ik","depends_on_id":"slime-arena-hbl","type":"blocks","created_at":"2026-01-09T21:48:28.832252+07:00","created_by":"unknown"}]}
{"id":"slime-arena-1s8","title":"Баг: markClaimConsumed без проверки subjectId/claim_consumed_at","description":"**Местоположение:**\n- Файл: server/src/meta/services/AuthService.ts\n- Строки: 391-401\n\n**Требование из ТЗ:**\n\u003e claim_consumed_at должен выставляться один раз, с проверкой claim_consumed_at IS NULL и принадлежности subjectId.\n\n**Проблема:**\nmarkClaimConsumed обновляет match_results только по match_id без проверки claim_consumed_at и subjectId. При повторном использовании claimToken создаётся пользователь до фиксации потребления.\n\n**Последствия:**\n- Возможен повторный upgrade с тем же claimToken (гонка)\n- Создание нескольких аккаунтов на один матч\n\n**Решение:**\n- Обновлять с условием `WHERE match_id = $1 AND claim_consumed_at IS NULL AND (guest_subject_id = $2 OR user_id = $2)`\n- Проверять rowCount и возвращать ошибку если уже потреблено\n- Выполнить в транзакции вместе с upgrade\n\n**Связанные компоненты:**\n- server/src/meta/services/AuthService.ts\n- server/src/meta/routes/auth.ts","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-26T03:13:39.5025838+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-27T22:59:37.5894491+07:00","closed_at":"2026-01-27T22:59:37.5894491+07:00","close_reason":"Fixed in PR #109 (Sprint 13 Phase 2)"}
{"id":"slime-arena-1t8","title":"FinalCountdownOverlay - Финальный отсчёт матча","description":"Реализовать FinalCountdownOverlay для последних 10 секунд матча. Крупный пульсирующий таймер, красный цвет. Z-index: 70. Источник: UI-TZ §9.3","notes":"Не критично для demo flow","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:46:55.9660857+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:31.467457+07:00"}
{"id":"slime-arena-1wl","title":"A/B: метрики для mobile controls","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T21:22:41.7050131+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T21:22:41.7050131+07:00","comments":[{"id":4,"issue_id":"slime-arena-1wl","author":"komle","text":"Связана с задачей slime-arena-4p4\nНо хотелось бы расширить на возможность A/B-тестирования любых вариантов конфигов.\nПри создании профиля нового игрока в зависимости от стратегии (чет-нечет, случайный, по когортам) присваивать ему A или B версию конфига игры, в которых могут отличаться тестируемые параметры.","created_at":"2026-01-08T14:53:30Z"},{"id":7,"issue_id":"slime-arena-1wl","author":"komle","text":"Sprint-Next-Mobile-Controls-Plan.md\nв этом документе указаны параметры для AB-теста. если есть возможность, то хечется добавить и третий вариант C с текущими настройками управления.","created_at":"2026-01-09T00:53:00Z"}]}
{"id":"slime-arena-2j6","title":"[P1] Yandex JWT верификация подписи","description":"Реализовать верификацию JWT подписи через Yandex API. Файл: YandexAuthProvider.ts. Документация: https://yandex.ru/dev/games/doc/dg/sdk/sdk-player.html","status":"open","priority":1,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-30T00:43:26.7132034+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-30T00:43:26.7132034+07:00"}
{"id":"slime-arena-2wq","title":"UI Refactoring Phase 2 - UIBridge интеграция","description":"Интеграция UIBridge с Preact компонентами. Текущий фокус из GitHub Project.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T19:19:49.5930526+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:46:14.663374+07:00","closed_at":"2026-01-09T21:46:14.663374+07:00","close_reason":"UI Refactoring Phase 2 завершена. UIBridge интегрирован, все Preact компоненты готовы (PR #50 merged)."}
{"id":"slime-arena-37t","title":"[Epic] UI P1 Screens - Критичные для софт-лонча","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-09T21:47:27.8997189+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:27.8997189+07:00"}
{"id":"slime-arena-38q","title":"Рефакторинг main.ts: разделение UI, рендеринга и сетей","description":"**Местоположение:**\n- Файл: client/src/main.ts (4958 строк)\n\n**Требование из ТЗ:**\n\u003e Раздел Architecture Part 1: Чёткое разделение ответственности: клиент (ввод), рендеринг (отрисовка), сеть (синхронизация)\n\n**Проблема:**\nmain.ts смешивает Canvas рендеринг, UI логику, обработку сетевых событий и управление состоянием. Невозможно переиспользовать компоненты.\n\n**Последствия:**\n- Сложность поддержки и расширения\n- Дублирование кода при добавлении новых режимов\n- Сложность тестирования отдельных систем\n\n**Воспроизведение:**\nПопытайся выделить렌 отдельный класс для сетевой синхронизации → придётся распутывать 500+ строк interdependencies\n\n**Связанные компоненты:**\n- client/src/rendering/\n- client/src/input/\n- client/src/services/","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T16:17:50.7706921+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T01:46:35.085591+07:00","closed_at":"2026-01-09T01:46:35.085591+07:00","close_reason":"PR #58 merged. InputManager интегрирован в main.ts (−416 строк).","comments":[{"id":5,"issue_id":"slime-arena-38q","author":"FRACTAL-XL\\komle","text":"Sprint 11 progress: InputManager module created (client/src/input/InputManager.ts, 550 строк). Commit c518372. Integration into main.ts deferred - requires global state refactor.","created_at":"2026-01-08T17:15:21Z"}]}
{"id":"slime-arena-3lx","title":"DisconnectModal - Модальное окно потери соединения","description":"Реализовать DisconnectModal с таймером переподключения 15 сек. Кнопка В меню. Z-index: 100. Источник: Architecture §5.3.1, ScreenMap §2.4","notes":"Полезно, но не блокер для demo","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:46:51.0887521+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:33.2022045+07:00"}
{"id":"slime-arena-3o8","title":"Стрелка движения: рисовать под слаймом","description":"**Файл:** client/src/main.ts\n\n**Текущее поведение:** Стрелка-указатель направления рисуется поверх слайма.\n\n**Требуемое:** Рисовать стрелку под слаймом (изменить порядок слоёв рендеринга).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T01:07:00.5032756+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T01:16:13.7052273+07:00","closed_at":"2026-01-17T01:16:13.7052273+07:00","close_reason":"Реализовано в PR #85"}
{"id":"slime-arena-3op","title":"PlatformLimitModal - Модальное окно ограничений платформы","description":"Реализовать PlatformLimitModal для случаев paymentsEnabled=false, adsRewardEnabled=false. Текст Временно недоступно. Кнопка OK. Источник: UI-TZ §8.5","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:30.499609+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:30.499609+07:00"}
{"id":"slime-arena-3q9","title":"Server: CrazyGamesAuthProvider + GameDistributionAuthProvider","description":"Создать серверные провайдеры авторизации для CrazyGames (JWT верификация) и GameDistribution (гостевой режим). Зарегистрировать в AuthProviderFactory.","status":"closed","priority":1,"issue_type":"feature","owner":"komleff@gmail.com","created_at":"2026-01-30T00:16:38.6474981+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-30T00:21:52.7683822+07:00","closed_at":"2026-01-30T00:21:52.7683822+07:00","close_reason":"Реализована полная интеграция платформ в PR#112"}
{"id":"slime-arena-473","title":"RewardModal - Модальное окно наград","description":"Реализовать RewardModal для отображения полученных наград. Заголовок + список наград (иконка, название, количество). Кнопка Забрать. Анимация появления. Источник: UI-TZ §8.1","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:29.1581035+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:29.1581035+07:00"}
{"id":"slime-arena-4le","title":"ProfileScreen - Экран профиля","description":"Реализовать ProfileScreen: аватар, ник, уровень, валюты, статистика (игр, побед, рейтинг), сетка скинов (активен/доступен/закрыт). Источник: UI-TZ §5.7","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:35.4399458+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:35.4399458+07:00"}
{"id":"slime-arena-4md","title":"[Epic] Лидерборды","description":"**Требование:** TZ 5.10\n\n**Текущее состояние:** Только таблица БД player_ratings с индексом\n\n**Необходимо реализовать:**\n1. LeaderboardService с методами:\n   - getLeaderboard(seasonId, mode, page)\n   - getPlayerRank(userId, seasonId, mode)\n   - updateRatings(matchResult)\n2. Алгоритм Glicko-2 (systemId=glicko2, initialRating=1500)\n3. API маршрут GET /api/v1/leaderboards\n4. Redis кеширование для оптимизации\n5. Конфиг config/leaderboards.json\n6. Интеграция с MatchResultService для пересчёта рейтинга\n7. UI на клиенте (экран лидерборда)","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T08:05:38.6005748+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T08:05:38.6005748+07:00"}
{"id":"slime-arena-4n8","title":"Сектор рта: уменьшить радиус с 1.5 до 1.3","description":"**Файл:** config/balance.json (visual.mouthSector.radiusMultiplier)\n\n**Текущее:** radiusMultiplier: 1.5\n\n**Требуемое:** radiusMultiplier: 1.3","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T01:07:02.8947184+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T01:16:13.7164094+07:00","closed_at":"2026-01-17T01:16:13.7164094+07:00","close_reason":"Реализовано в PR #85"}
{"id":"slime-arena-4p4","title":"A/B: интеграция выбора варианта на уровне матча","description":"**Местоположение:**\n- Файл: server/src/meta/services/MatchmakingService.ts\n- Связанные: config/experiments/mobile-controls-ab.json\n\n**Требование из плана:**\n\u003e Sprint-Next-Mobile-Controls-Plan.md Section 4.4 Step 2\n\n**Решение:**\n1. При создании матча определить A/B вариант через ABTestService\n2. Передать вариант в MatchServer\n3. Применить override параметров к BalanceConfig\n4. Зафиксировать вариант на весь матч","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-08T21:23:05.0195967+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T21:23:05.0195967+07:00","comments":[{"id":3,"issue_id":"slime-arena-4p4","author":"komle","text":"Предлагаю помимо двух новых вариантов добавить третий - текущие настройки управления. \nНазавать это ABC-тестированием управления.\nПозволить игроку перед матчем выбирать один из трех вариантов - A-B-C (кнопку выбора добавить в лобби рядом с выбором класса).","created_at":"2026-01-08T14:49:17Z"}]}
{"id":"slime-arena-4sf","title":"WebP конвертация спрайтов слаймов","description":"**Текущее состояние:**\n- Спрайты слаймов занимают 27MB (21 файл по 1.2-2MB)\n- Цель: \u003c5MB для Telegram MiniApp\n\n**Требуется:**\n1. Установить sharp или cwebp для конвертации\n2. Создать скрипт build-assets.js\n3. Конвертировать PNG → WebP (quality 85)\n4. Обновить код клиента для WebP с PNG fallback\n\n**Ожидаемый результат:**\n- 27MB → ~5MB (80% сжатие)\n- Общий dist: 32MB → ~10MB\n\n**Связано:** slime-arena-0ba","notes":"Критично для размера бандла: 27MB → ~5MB","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-18T14:19:46.2039795+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:15.7256916+07:00"}
{"id":"slime-arena-4vy","title":"AUTH-7: Яндекс ID сервер","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:49.8117585+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:49.8117585+07:00"}
{"id":"slime-arena-4xh","title":"Баг: талант Вампир не даёт долю массы по GDD","description":"**Местоположение:**\n- Файл: server/src/rooms/ArenaRoom.ts\n- Метод: processCombat (участок 1469-1531)\n\n**Требование из ТЗ:**\n\u003e GDD-Talents: \"Вампир — Доля массы от укуса: бок 10%→20%, хвост 15%→25%\"\n\n**Проблема:**\nТекущая логика `vampireBite` только переносит часть `scatterMass` в `attackerGain`. Из-за этого доля зависит от массы жертвы и часто ниже 20%/25% от массы атакующего.\n\n**Последствия:**\n- Талант слабее заявленного\n- Баланс не соответствует GDD\n\n**Решение:**\n- Рассчитать `attackerGain` по процентам вампира от массы атакующего\n- Согласовать перерасчёт `scatterMass` и инвариант `massLoss = attackerGain + scatterMass`\n- Обновить тесты при необходимости\n\n**Связанные компоненты:**\n- server/src/rooms/ArenaRoom.ts\n- config/balance.json\n- docs/gdd/GDD-Talents.md","notes":"Все таланты будут пересматриваться в комплексе","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-18T21:44:02.7462771+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:06.5503549+07:00","dependencies":[{"issue_id":"slime-arena-4xh","depends_on_id":"slime-arena-8q9","type":"blocks","created_at":"2026-01-18T21:45:14.1010162+07:00","created_by":"unknown"}]}
{"id":"slime-arena-54d","title":"[Epic] UI P2 Features - Желательные (после софт-лонча)","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T21:48:00.6707882+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:48:00.6707882+07:00"}
{"id":"slime-arena-5ix","title":"Полупрозрачные окна выбора умений и талантов","description":"**Файлы:** client/src/main.ts или client/src/ui/\n\n**Текущее:** Окна выбора умений, талантов и плашки выпадения талантов из сундуков — непрозрачные.\n\n**Требуемое:** Сделать полупрозрачными, чтобы не перекрывали видимость поля боя.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T01:07:04.0473774+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T01:16:13.7211688+07:00","closed_at":"2026-01-17T01:16:13.7211688+07:00","close_reason":"Реализовано в PR #85"}
{"id":"slime-arena-5qa","title":"A/B Testing System (Epic)","description":"**Местоположение:**\n- ТЗ: docs/soft-launch/TZ-ABTesting-ClaudeOpus-v1.3.md\n- Сервер: server/src/meta/services/\n- Конфиг: config/abtests.json (создать)\n\n**Требование из ТЗ:**\n\u003e TZ-ABTesting-ClaudeOpus-v1.3 — полная спецификация системы A/B тестирования\n\n**Описание:**\nАрхитектура Base+Overlay для экспериментов с параметрами баланса, управления, монетизации.\n- Детерминированное назначение вариантов (SHA-256 hash)\n- Уровни применения: profile, session, match\n- Разделение очередей матчмейкинга по matchConfigKey\n- Guardrails для автоматической остановки\n\n**Фазы внедрения:**\n1. MVP: схема БД, ConfigResolver, AssignmentService, API\n2. Расширение: admin UI, переопределения, guardrails\n3. Масштабирование: сегментация, автозавершение\n\n**Первый эксперимент:**\nmobile-controls-v1 (два варианта настроек управления)\n\n**Связанные задачи:**\n- slime-arena-4p4: интеграция выбора варианта на уровне матча\n- slime-arena-1wl: метрики для mobile controls","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T01:42:26.758296+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T01:42:26.758296+07:00"}
{"id":"slime-arena-60x","title":"WASD как относительные рули (W-вперёд, A/D-поворот)","description":"## Текущее поведение\nWASD двигает слайм в абсолютных направлениях (Север-Запад-Юг-Восток).\n\n## Требуемое поведение\nWASD работает как относительные рули управления:\n- **W** — максимальное ускорение вперёд (по текущему курсу/направлению взгляда)\n- **A** — поворот налево относительно текущего курса\n- **S** — максимальное ускорение назад (реверс)\n- **D** — поворот направо относительно текущего курса\n\n## Реализация\nФайл: client/src/input/InputManager.ts\n\nНужно:\n1. Получать текущее направление слайма (heading/rotation)\n2. W/S — ускорение вдоль/против heading\n3. A/D — изменение heading (угловая скорость)\n4. Отправлять на сервер результирующий вектор движения\n\n## Зависимости\n- Нужен доступ к текущему rotation/heading игрока в InputManager\n- Возможно потребуется новый тип команды для поворота","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-17T02:23:07.2072832+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T03:05:28.6211653+07:00","closed_at":"2026-01-17T03:05:28.6211653+07:00","close_reason":"Откат: функционал отменён пользователем"}
{"id":"slime-arena-66m","title":"Тесты идемпотентности для Stage D","description":"**Местоположение:**\n- server/tests/meta-stage-d.test.ts\n- server/tests/determinism.test.js\n\n**Требование из ТЗ:**\n\u003e Раздел Architecture Part 3: Все операции MetaServer должны быть идемпотентными (повторные запросы = нет побочных эффектов)\n\n**Проблема:**\nНужны автоматические тесты для проверки:\n- Дублирование submit matchResults не создаёт двойные награды\n- Повторная транзакция кошелька не обрабатывается дважды\n- Повторный claim приза не даёт двойное количество\n\n**Последствия:**\n- Без тестов невозможно гарантировать защиту от network retries\n- Риск потери данных или двойных платежей\n\n**Связанные компоненты:**\n- server/src/meta/services/WalletService.ts\n- server/src/meta/routes/matchResults.ts\n- server/src/services/MatchResultService.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T16:18:18.0253689+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T16:54:03.7791389+07:00","closed_at":"2026-01-08T16:54:03.7791389+07:00","close_reason":"Добавлены тесты 6.3 (ads claim idempotency) и 6.4 (shop purchase idempotency). TypeScript компилируется."}
{"id":"slime-arena-6hn","title":"Добавить LEVEL_THRESHOLDS в balance.json","description":"**Местоположение:**\nФайл: client/src/ui/components/GameHUD.tsx\nФайл: config/balance.json\n\n**Требование из ТЗ:**\nРаздел Баланс: Все числовые параметры должны быть в конфиге, не в коде\n\n**Проблема:**\nLEVEL_THRESHOLDS (пороги уровней) жёстко закодированы в GameHUD.tsx. Это усложняет балансировку и отладку.\n\n**Последствия:**\n- Невозможно менять пороги уровней без редактирования кода\n- Нарушение принципа конфигурируемости баланса\n\n**Решение:**\nПеренести в config/balance.json и загружать через loadBalanceConfig\n\n**Связанные компоненты:**\n- server/src/config/loadBalanceConfig.ts\n- shared/src/config.ts\n- client/src/services/configService.ts","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T16:17:54.6138986+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T22:01:34.9026227+07:00","closed_at":"2026-01-08T22:01:34.9026227+07:00","close_reason":"PR #54 + commit 7804a12 merged to main"}
{"id":"slime-arena-6su","title":"Баг: skinGenerator не находит skins.json в dist","description":"**Местоположение:**\n- Файл: server/src/utils/generators/skinGenerator.ts\n- Строка: 30\n\n**Проблема:**\nПуть `join(__dirname, '../../../../config', 'skins.json')` корректен для src, но в dist ищет `server/dist/config/skins.json`, которого нет. В прод‑сборке генератор падает.\n\n**Воспроизведение:**\n```bash\nnode -e \"const g=require('./server/dist/server/src/utils/generators/skinGenerator.js'); g.getBasicSkins()\"\n```\nОшибка: ENOENT ... `server/dist/config/skins.json`.\n\n**Последствия:**\n- Срыв выдачи базового скина в meta‑сервере\n- Ошибка при регистрации/создании профиля в прод‑сборке\n\n**Решение:**\n- Вычислять путь до корня проекта корректно и для src, и для dist (например, через проверку существования файла и fallback), или вынести путь в конфиг/ENV.\n\n**Связанные компоненты:**\n- server/src/utils/generators/skinGenerator.ts\n- config/skins.json","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-26T02:11:38.3406501+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-26T02:33:11.0582817+07:00","closed_at":"2026-01-26T02:33:11.0582817+07:00","close_reason":"Fixed in commit 4d50c4f (multi-path resolution for src+dist)"}
{"id":"slime-arena-6u0","title":"Реализовать IAdsProvider на клиенте","description":"**Требование:** TZ 5.8.1 — Реклама с наградой\n\n**Местоположение:**\n- client/src/platform/\n\n**Проблема:**\nНет интерфейса для показа рекламы на клиенте. PlatformManager управляет только IAuthAdapter, но не IAdsProvider.\n\n**Последствия:**\n- Невозможно показать rewarded ads пользователю\n- Функционал рекламы с наградой недоступен в софт-лонче\n\n**Решение:**\n1. Создать client/src/platform/IAdsProvider.ts с методами showRewardedAd(), isAdReady()\n2. Реализовать TelegramAdsProvider (Telegram Ads API)\n3. Реализовать YandexAdsProvider (Yandex Games SDK)\n4. Реализовать PokiAdsProvider (Poki SDK)\n5. Интегрировать в PlatformManager\n6. Добавить UI кнопку 'Смотреть рекламу' с обработкой\n\n**Связанные компоненты:**\n- server/src/meta/services/AdsService.ts\n- server/src/meta/routes/ads.ts\n- client/src/platform/PlatformManager.ts","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-09T08:03:42.03906+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T09:24:20.4427118+07:00","closed_at":"2026-01-09T09:24:20.4427118+07:00","close_reason":"IAdsProvider реализован, PR #60 merged"}
{"id":"slime-arena-6xo","title":"[Epic] Боевой пропуск и достижения","description":"**Требование:** TZ 5.9\n\n**Текущее состояние:** Только таблицы БД (battlepass_progress, mission_progress, achievements)\n\n**Необходимо реализовать:**\n1. BattlepassService с логикой прогресса по уровням\n2. AchievementsService с логикой разблокировки\n3. API маршруты:\n   - GET /api/v1/battlepass/status\n   - POST /api/v1/battlepass/claim\n   - GET /api/v1/achievements\n4. Конфиги config/battlepass.json, config/achievements.json\n5. Интеграция с MatchResultService для обновления прогресса после матча\n6. UI на клиенте (экран боевого пропуска, отображение достижений)","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T08:05:37.6401528+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T08:05:37.6401528+07:00"}
{"id":"slime-arena-7cq","title":"LeaderboardScreen - Экран рейтингов","description":"Реализовать LeaderboardScreen: вкладки режимов/сезонов, таблица (место, ник, рейтинг), выделение позиции игрока. Скрывается при features.leaderboard=false. Источник: UI-TZ §7.2","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:48:03.1122132+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:48:03.1122132+07:00"}
{"id":"slime-arena-7f2","title":"Типизировать AdsShowResult.reward.type как union","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T09:24:36.6340925+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T09:24:36.6340925+07:00"}
{"id":"slime-arena-7fg","title":"[Epic] Stage D - Testing и Polish","description":"Финальный этап перед релизом: тестирование, полировка, bug fixes.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T19:20:02.3317311+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T19:20:02.3317311+07:00"}
{"id":"slime-arena-7w8","title":"Система уведомлений (Toast)","description":"Реализовать систему Toast-уведомлений: убийство, уровень, усиление. Очередь с приоритетами. Не более 2 одновременно на экране. Источник: UI-TZ §10","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:48:05.687663+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:48:05.687663+07:00"}
{"id":"slime-arena-7za","title":"Stage D: Smoke Tests для полного flow","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T16:17:14.2111092+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T16:22:41.3887567+07:00","closed_at":"2026-01-08T16:22:41.3887567+07:00","close_reason":"Дубликат"}
{"id":"slime-arena-8cv","title":"AUTH-8: UI выбора OAuth провайдера","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:51.0338883+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:51.0338883+07:00"}
{"id":"slime-arena-8e3","title":"Сервер возвращает place в personalStats","description":"Gemini P2: Для игроков вне топ-10 сервер должен возвращать точное место в personalStats, а не использовать fallback на клиенте. См. slime-arena-isf.","status":"open","priority":2,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T21:18:28.5470913+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:18:28.5470913+07:00"}
{"id":"slime-arena-8gk","title":"CrazyGamesAdapter: авторизация и SDK интеграция","description":"**Источник:** TZ-PlatformAdapters-v1.0, секция 4\n\n**Файлы:**\n- client/src/platform/CrazyGamesAdapter.ts — СОЗДАТЬ\n- client/src/platform/CrazyGamesAdsProvider.ts — СОЗДАТЬ\n- client/src/platform/PlatformManager.ts — обновить\n- client/src/platform/index.ts — экспорт\n\n**Scope:**\n- IAuthAdapter: isAvailable(), getCredentials(), getNickname(), requestAuth()\n- Проверка: window.CrazyGames?.SDK\n- Auth: SDK.user.getUserToken() → JWT\n- Гостевой режим если getUser() === null\n- События: gameplayStart(), gameplayStop(), happyTime()\n\n**Ads Provider:**\n- showRewarded(): SDK.ad.requestAd('rewarded', callbacks)\n- showInterstitial(): SDK.ad.requestAd('midgame', callbacks)\n- Callbacks: adStarted, adFinished, adError","status":"closed","priority":1,"issue_type":"feature","owner":"komleff@gmail.com","created_at":"2026-01-29T23:47:27.1258156+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T23:58:31.5405995+07:00","closed_at":"2026-01-29T23:58:31.5405995+07:00","close_reason":"Реализованы адаптеры CrazyGames и GameDistribution, исправлены P0/P1 замечания code review"}
{"id":"slime-arena-8k7","title":"Fix platformData format: YandexAdapter signed JWT","description":"YandexAdapter отправляет playerId:playerName, а сервер ожидает JWT. Нужно использовать getPlayer({ signed: true }) или изменить серверную валидацию.","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-30T00:16:39.9332668+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-30T00:21:52.7720143+07:00","closed_at":"2026-01-30T00:21:52.7720143+07:00","close_reason":"Реализована полная интеграция платформ в PR#112"}
{"id":"slime-arena-8n2","title":"BattlePassScreen - Экран боевого пропуска","description":"Реализовать BattlePassScreen: сезон, уровень, XP, горизонтальный список уровней, награды Free/Premium, кнопка Забрать -\u003e RewardModal. Скрывается при features.battlepass=false. Источник: UI-TZ §7.1","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:48:01.9357298+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:48:01.9357298+07:00","dependencies":[{"issue_id":"slime-arena-8n2","depends_on_id":"slime-arena-473","type":"blocks","created_at":"2026-01-09T21:48:28.9601873+07:00","created_by":"unknown"}]}
{"id":"slime-arena-8p1","title":"AUTH-4: Google OAuth клиент","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:38.9303659+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:38.9303659+07:00"}
{"id":"slime-arena-8q9","title":"Баланс: формула потерь массы при укусе в PvP","description":"**Местоположение:**\n- Файл: server/src/rooms/ArenaRoom.ts\n- Метод: processCombat (строки 1434-1535)\n\n**Требование из ТЗ:**\n\u003e При укусе атакующий откусывает у жертвы 10% от своей массы. Жертва дополнительно теряет 10% своей массы в виде пузырей.\n\n**Проблема:**\nСейчас massLoss, attackerGain и scatterMass считаются от массы жертвы (pvpBiteVictimLossPct / pvpBiteAttackerGainPct / pvpBiteScatterPct), что не соответствует требуемой формуле и искажает баланс.\n\n**Последствия:**\n- Неверная механика укуса в PvP\n- Баланс отклоняется от утверждённого поведения\n- Сложно прогнозировать итоговую потерю массы\n\n**Решение:**\n- Пересчитать атакующую награду от массы атакующего (10% его массы с модификаторами)\n- Пересчитать потери жертвы в пузырях от массы жертвы (10%)\n- Итоговая потеря жертвы = attackerGain + bubbleLoss, с учётом Last Breath и minSlimeMass\n- Обновить/переименовать параметры в config/balance.json и shared/src/config.ts, если текущие названия больше не отражают смысл\n- Сохранить детерминизм и инварианты (massLoss = attackerGain + scatterMass)\n\n**Связанные компоненты:**\n- server/src/rooms/ArenaRoom.ts\n- config/balance.json\n- shared/src/config.ts\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T17:46:51.6938513+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T21:50:10.3977238+07:00","closed_at":"2026-01-18T21:50:10.3977238+07:00","close_reason":"PR #94 merged - PvP bite formula fixed"}
{"id":"slime-arena-8uv","title":"AUTH-10: Диалог 409 конфликта","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:53.4001941+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:53.4001941+07:00"}
{"id":"slime-arena-8yh","title":"[Epic] UI P0 Core - Обязательные компоненты для софт-лонча","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-09T21:46:31.0871704+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:46:31.0871704+07:00"}
{"id":"slime-arena-8yz","title":"Исправление: имя не обновляется при повторе матча","description":"**Местоположение:**\n- Файл: client/src/main.ts (функция onPlayAgain)\n- Файл: client/src/ui/components/MainMenu.tsx\n\n**Требование из ТЗ:**\n\u003e Раздел Progress: Известная проблема X-5\n\n**Проблема:**\nКогда игрок меняет имя в MainMenu и нажимает 'Играть снова', новое имя не передаётся на MatchServer. Отправляется старое имя.\n\n**Последствия:**\n- Неконсистентное имя в игре и на экране результатов\n- Игрок видит свой старый nickname вместо нового\n\n**Воспроизведение:**\n1. Закончи матч (Results Screen)\n2. Измени имя в поле ввода\n3. Нажми 'В бой' (Play Again)\n4. Проверь имя в лидерборде → показывает старое\n\n**Решение:**\nСинхронизировать signal playerName перед отправкой selectClass команды\n\n**Связанные компоненты:**\n- client/src/ui/signals/gameState.ts (playerName signal)\n- client/src/main.ts (onPlayAgain function)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T16:18:10.6062896+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T22:01:34.8895577+07:00","closed_at":"2026-01-08T22:01:34.8895577+07:00","close_reason":"PR #54 + commit 7804a12 merged to main"}
{"id":"slime-arena-92g","title":"Исправить обработку ошибок MetaServer (ERR_CONNECTION_REFUSED)","description":"**Местоположение:**\n- Файлы: client/src/api/metaServerClient.ts, client/src/services/configService.ts\n\n**Проблема:**\nПри запуске клиента на http://192.168.77.122:5174 (мобильное устройство в локальной сети) консоль засоряется ошибками:\n```\nGET http://192.168.77.122:3000/api/v1/config/runtime net::ERR_CONNECTION_REFUSED\n```\n\nПричина: metaServerClient.ts автоматически подставляет window.location.hostname:3000, что даёт 192.168.77.122:3000 на мобильных устройствах, но MetaServer работает только на localhost.\n\n**Последствия:**\n- Засорение консоли разработчика ошибками сети\n- Непонятно, является ли MetaServer обязательным для работы игры\n- configService.loadConfig() возвращает null при отсутствии кэша и MetaServer\n- Нет fallback конфигурации для offline режима\n\n**Решение:**\n1. Убрать автоопределение URL через window.location.hostname — использовать только VITE_META_SERVER_URL из .env.local\n2. Добавить DEFAULT_RUNTIME_CONFIG как fallback для offline режима\n3. Изменить runtimeConfig signal — инициализировать дефолтом вместо null\n4. Обновить типы vite-env.d.ts — сделать VITE_META_SERVER_URL опциональным\n5. Создать .env.local с примером конфигурации\n6. Обновить README.md — добавить документацию по MetaServer\n\n**Связанные компоненты:**\n- client/src/api/metaServerClient.ts (автоопределение URL)\n- client/src/services/configService.ts (fallback логика)\n- client/src/services/defaultRuntimeConfig.ts (новый файл)\n- client/src/vite-env.d.ts (типы env-переменных)\n- .env.local (пример конфигурации)\n- README.md (документация)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-12T19:50:33.43161+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-14T02:02:53.9405394+07:00","closed_at":"2026-01-14T02:02:53.9405394+07:00","close_reason":"Исправлено в PR #79: добавлены обработчики uncaughtException/unhandledRejection с exit(1) и перезапуском через supervisord"}
{"id":"slime-arena-99u","title":"Исправить arena.css: убрать CSS-градиенты (performance)","description":"**Местоположение:**\n- Файл: client/src/styles/arena.css (строки 44-67)\n\n**Требование из GDD-Art-Architecture v2.0:**\n\u003e NO CSS Gradients: Запрещено использовать сложные процедурные градиенты (radial-gradient) на весь экран в requestAnimationFrame. Это убивает батарею. Используем запеченные текстуры.\n\n**Проблема:**\nВ `.arena-background::after` используются `radial-gradient` и `linear-gradient` для сетки. Это нарушает правила mobile-оптимизации.\n\n**Решение:**\n1. Удалить `::after` псевдоэлемент с градиентами\n2. Использовать запечённую текстуру сетки (требуется ассет от Art Director)\n3. ИЛИ оставить только `::before` с тайловой текстурой без overlay\n\n**Связанные документы:**\n- docs/soft-launch/SlimeArena-GDD-Art-Architecture.md (п. 3.1)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T01:56:13.43433+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-12T02:00:35.1634756+07:00","closed_at":"2026-01-12T02:00:35.1634756+07:00","close_reason":"Исправлено: удалены CSS-градиенты из arena.css. Оставлен только ::before с тайловой текстурой."}
{"id":"slime-arena-9o2","title":"PokiAdapter - адаптер авторизации для Poki","status":"closed","priority":1,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T21:46:02.9697429+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:54:02.9291113+07:00","closed_at":"2026-01-29T21:54:02.9291113+07:00","close_reason":"Реализованы и прошли код-ревью (1 итерация, APPROVED)"}
{"id":"slime-arena-9tv","title":"Локализация UI строк (i18n)","description":"Gemini P2: Вынести хардкод строки из MainScreen.tsx и других компонентов в файлы локализации. Подготовить инфраструктуру для i18n.","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T21:18:26.1064969+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:18:26.1064969+07:00"}
{"id":"slime-arena-a3n","title":"AchievementsScreen - Экран достижений","description":"Реализовать AchievementsScreen: список карточек с прогрессом, состояния locked/unlocked/claimed, кнопка Забрать -\u003e RewardModal. Скрывается при features.achievements=false. Источник: UI-TZ §7.3","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:48:04.4339019+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:48:04.4339019+07:00","dependencies":[{"issue_id":"slime-arena-a3n","depends_on_id":"slime-arena-473","type":"blocks","created_at":"2026-01-09T21:48:29.0870248+07:00","created_by":"unknown"}]}
{"id":"slime-arena-aph","title":"temp","description":"temp","status":"closed","priority":4,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-25T23:54:22.0993233+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-25T23:54:36.2547316+07:00","closed_at":"2026-01-25T23:54:36.2547316+07:00","close_reason":"Техническая проверка bd create"}
{"id":"slime-arena-ar1","title":"Декомпозиция God-объекта ArenaRoom.ts","description":"ArenaRoom.ts — God-объект ~3700 строк. Цель: вынести AbilitySystem, CombatSystem, PhaseSystem в отдельные модули. План: .memory_bank/workplans/arena-room-refactor-plan.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T21:45:36.7246916+07:00","created_by":"Claude Opus","updated_at":"2026-01-20T23:33:25.094515+07:00","closed_at":"2026-01-20T23:33:25.094515+07:00","close_reason":"Sprint 12 завершён: 8 модулей извлечено, v0.6.0 выпущен","labels":["refactor","server","tech-debt"]}
{"id":"slime-arena-b6s","title":"[Tech Debt] Убрать sys.path хаки из tools/*.py","description":"**Источник:** PR #110, ревьювер: Copilot\n\n**Замечание:**\n\u003e В модулях tools/consensus.py и tools/test_orchestrator.py меняется sys.path на уровне импорта. Это даёт побочный эффект для любого кода, который просто импортирует модуль.\n\n**Причина отложения:**\nНе блокирует функциональность. Требует рефакторинга структуры пакетов.\n\n**Файлы:** tools/consensus.py:18, tools/test_orchestrator.py:17","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T01:19:16.5567684+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T01:19:16.5567684+07:00"}
{"id":"slime-arena-b97","title":"AUTH-9: Mobile redirect + state restore","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:52.2288708+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:52.2288708+07:00"}
{"id":"slime-arena-bac","title":"Визуализация управления: сектор рта и стрелка ввода","description":"**PR:** #82\n\n**Добавлено:**\n- Сектор рта слайма (120° конус направления взгляда/атаки)\n- Стрелка направления ввода (показывает вектор управления)\n- Смешанное управление (WASD корректирует направление мыши с весом 50%)\n\n**Файлы:**\n- client/src/input/InputManager.ts — логика смешивания ввода\n- client/src/main.ts — рендеринг визуализации\n- config/balance.json — параметры visual.mouthSector, visual.inputArrow\n- shared/src/config.ts — типы\n- docs/gdd/GDD-UI.md — документация\n\n**Статус:** Код готов, проходит ревью.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-17T00:25:22.281344+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T00:54:21.5967841+07:00","closed_at":"2026-01-17T00:54:21.5967841+07:00","close_reason":"PR #82 + #84 merged. Визуализация управления реализована."}
{"id":"slime-arena-bi6","title":"Ассеты UI организованы с правильным альфа-каналом","description":"**Выполнено:**\nОрганизованы ассеты в папке assets/:\n\n**Новые файлы:**\n- backgrounds/bg_gameplay_floor_tile.png (512x512, тайл арены)\n- backgrounds/bg_gameplay_floor_tile_2.png (альтернативный тайл)\n- buttons/btn_close_red.png\n- hud/hud_avatar_frame_cookie_bottom.png\n- hud/hud_avatar_frame_cookie_top.png  \n- panels/panel_modal_cookie.png (новая папка panels/)\n- skins/lobby/hero_skin_kolobok.png\n\n**Обновлённые файлы (исправлен альфа-канал):**\n- hud/hud_avatar_hero_01.png, hud_avatar_hero_02.png\n- hud/hud_avatar_frame_cookie.png, hud_profile_base_chocolate.png\n- icons/icon_*.png (все иконки)\n- skins/lobby/hero_skin_current.png\n\n**Ветка:** feature/graphics-arena-bg\n**Коммит:** c647c5a","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-12T22:26:56.8872917+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-12T22:27:03.5534332+07:00","closed_at":"2026-01-12T22:27:03.5534332+07:00","close_reason":"Выполнено в коммите c647c5a"}
{"id":"slime-arena-bjp","title":"Обновить документацию: /ads/claim вместо /ads/reward/claim","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T09:24:37.6192566+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T09:24:37.6192566+07:00"}
{"id":"slime-arena-bw7","title":"AUTH-5: Google OAuth сервер","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:40.0864264+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:40.0864264+07:00"}
{"id":"slime-arena-caf","title":"Add @types/uuid to fix build error","description":"**Местоположение:**\n- Файл: server/src/meta/routes/auth.ts:2\n\n**Проблема:**\nСборка проекта падает с ошибкой:\n```\nerror TS7016: Could not find a declaration file for module 'uuid'.\n```\n\n**Решение:**\n```bash\nnpm i --save-dev @types/uuid --workspace=server\n```\n\n**Обнаружено:** PR #111 review (pre-existing issue в main)","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-28T02:41:15.0325454+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:55:36.0145386+07:00","closed_at":"2026-01-29T21:55:36.0145386+07:00","close_reason":"Уже исправлено в main (PR#111)"}
{"id":"slime-arena-cec","title":"Исправить англицизмы в комментариях IAdsProvider","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T09:24:35.647322+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T09:24:35.647322+07:00"}
{"id":"slime-arena-cok","title":"Реализовать onBootRetry callback для BootScreen","description":"**Местоположение:**\n- Файл: client/src/main.ts (строка ~3873)\n- Компонент: uiCallbacks\n\n**Проблема:**\nUICallbacks определяет onBootRetry, но реализация отсутствует в объекте uiCallbacks. При ошибке загрузки BootScreen покажет кнопку 'Повторить', которая не будет работать.\n\n**Решение:**\nДобавить реализацию onBootRetry, которая перезапускает initializeServices.\n\n**Источник:** Copilot review PR #89 (suppressed comment, low confidence)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-18T04:39:50.167345+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T04:39:50.167345+07:00"}
{"id":"slime-arena-d0f","title":"[P2] normalizeNickname() защита от null/undefined","description":"Источник: Codex ревью PR #109 (P2)\n\nМестоположение:\nФайл: server/src/utils/generators/nicknameValidator.ts\nФункции: normalizeNickname(), validateAndNormalize()\n\nПроблема:\nПри name=null вернёт string 'null', при name=undefined вернёт string 'undefined'. Эти строки пройдут валидацию как корректные ники.\n\nПоследствия:\n- Игрок может иметь nickname='null' или nickname='undefined'\n- Невозможно отличить отсутствие имени от буквального значения\n- Нарушение принципа надёжности валидации\n\nРешение:\nДобавить ранний чек в normalizeNickname() или validateAndNormalize():\n- Проверка: if (!name || typeof name !== 'string') throw Error\n- Возврат ошибки перед нормализацией\n\nФайлы для изменения:\n- server/src/utils/generators/nicknameValidator.ts\n- server/src/meta/routes/auth.ts\n\nPR для исправления: Sprint 14+","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T02:25:51.8790532+07:00","updated_at":"2026-01-28T02:09:22.8817506+07:00","closed_at":"2026-01-28T02:09:22.8817506+07:00","close_reason":"Fixed in commit 69ead92 (sprint-14/meta-integration)","labels":["meta-gameplay","reliability","review-feedback"]}
{"id":"slime-arena-d0s","title":"Реализовать логику союзников для mouthSector","description":"TODO в main.ts:3133. Цвет ally уже в конфиге, но не используется. Реализовать при добавлении командных арен.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-17T00:25:55.1142513+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T00:25:55.1142513+07:00","labels":["teams","visual"]}
{"id":"slime-arena-d2p","title":"Баг: loadBalanceConfig ломает dev из-за пути к balance.json","description":"**Местоположение:**\n- Файл: server/src/config/loadBalanceConfig.ts\n- Строка: 4\n\n**Проблема:**\nТекущий путь `path.resolve(__dirname, \"..\", \"..\", \"..\", \"..\", \"..\", \"config\", \"balance.json\")` корректен для dist, но в dev‑режиме (ts-node-dev) уводит за пределы репозитория.\n\n**Воспроизведение (dev‑контекст):**\n```js\npath.resolve('d:/slime-arena/server/src/config', '..','..','..','..','..','config','balance.json')\n// =\u003e d:/config/balance.json\n```\nФайл не найден.\n\n**Последствия:**\n- `npm run dev --workspace=server` не стартует (balance.json не найден)\n\n**Решение:**\n- Сделать путь, работающий и в src, и в dist: искать `config/balance.json` относительно корня проекта по факту существования файла, либо использовать переменную окружения.\n\n**Связанные компоненты:**\n- server/src/config/loadBalanceConfig.ts\n- config/balance.json","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-26T02:11:49.0586014+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-26T02:33:11.0603686+07:00","closed_at":"2026-01-26T02:33:11.0603686+07:00","close_reason":"Fixed in commit 4d50c4f (multi-path resolution for src+dist)"}
{"id":"slime-arena-dc8","title":"[Tech Debt] Исправить комментарий о дедупликации в consensus.py","description":"**Источник:** PR #110, ревьювер: Copilot\n\n**Замечание:**\n\u003e Комментарий говорит «дедупликация по файлу и строке», но ключ включает ещё issue.problem[:50]. Это приводит к дубликатам одной и той же проблемы при разной формулировке у ревьюверов.\n\n**Причина отложения:**\nКосметика. Либо поправить комментарий, либо изменить логику дедупликации.\n\n**Файл:** tools/consensus.py:72","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T01:19:24.2235721+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T01:19:24.2235721+07:00"}
{"id":"slime-arena-dm5","title":"Настроить хуки автосинхронизации демона","description":"**Местоположение:**\n.beads/config.yaml\n\n**Требование из ТЗ:**\nРаздел Beads: Демон должен автоматически коммитить и пушить изменения\n\n**Проблема:**\nДемон запущен без флагов auto-commit и auto-push. Это замедляет workflow при распределённой работе (multi-clone).\n\n**Текущее состояние:**\n- bd daemon запущен с auto-pull: true\n- auto-commit: false (нужно вручную коммитить)\n- auto-push: false (нужно вручную пушить)\n\n**Последствия:**\n- Изменения в bd не синхронизируются автоматически\n- Медленный обмен задачами между клонами\n\n**Решение:**\n1. Перезапустить демон с флагами: bd daemon --restart --auto-commit --auto-push\n2. Добавить в .beads/config.yaml: auto-commit: true, auto-push: true\n\n**Связанные компоненты:**\n- bd daemon\n- Git sync branch (beads-sync)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T16:18:45.0519529+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T00:21:28.9170186+07:00","closed_at":"2026-01-09T00:21:28.9170186+07:00","close_reason":"Merged in PR #56"}
{"id":"slime-arena-duo","title":"Интеграция параллакс-фона арены в main.ts","description":"**Местоположение:**\n- CSS: client/src/styles/arena.css (уже создан Art Director)\n- Интеграция: client/src/main.ts\n\n**Требование:**\nПодключить готовый CSS фона арены к игровому клиенту.\n\n**Что нужно сделать:**\n\n1. Добавить импорт CSS:\n   ```typescript\n   import './styles/arena.css';\n   ```\n\n2. Создать DOM-элемент фона после инициализации документа:\n   ```typescript\n   const arenaBackground = document.createElement('div');\n   arenaBackground.className = 'arena-background';\n   document.body.appendChild(arenaBackground);\n   ```\n\n3. В игровом цикле (рендер) обновлять CSS-переменные камеры:\n   ```typescript\n   // После расчёта позиции камеры\n   const bgX = -camera.x % 512;\n   const bgY = camera.y % 512;\n   arenaBackground.style.setProperty('--cam-x', bgX + 'px');\n   arenaBackground.style.setProperty('--cam-y', bgY + 'px');\n   ```\n\n**ОБНОВЛЕНО:** Виньетка удалена (Mobile Optimization). Только один DOM-элемент .arena-background.\n\n**Ассет:**\nТребуется текстура `client/assets/bg_gameplay_floor_tile.png` (512x512).\nПока ассета нет — будет виден только мятный фон.\n\n**Связанные компоненты:**\n- client/src/styles/arena.css\n- client/src/main.ts (функция connectToServer, игровой цикл)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T00:57:23.1182553+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-12T02:02:19.9833619+07:00"}
{"id":"slime-arena-e0p","title":"GameDistributionAdapter: гостевой режим и реклама","description":"**Источник:** TZ-PlatformAdapters-v1.0, секция 5\n\n**Файлы:**\n- client/src/platform/GameDistributionAdapter.ts — СОЗДАТЬ\n- client/src/platform/GameDistributionAdsProvider.ts — СОЗДАТЬ\n- client/src/platform/PlatformManager.ts — обновить\n- client/src/platform/index.ts — экспорт\n\n**Scope:**\n- IAuthAdapter: isAvailable(), getCredentials(), getNickname()\n- Проверка: window.gdsdk или window.GD_OPTIONS\n- ТОЛЬКО гостевой режим — GD не поддерживает авторизацию\n- requestAuth(): return false\n\n**Ads Provider:**\n- showRewarded(): gdsdk.showAd(AdType.Rewarded)\n- showInterstitial(): gdsdk.showAd(AdType.Interstitial)\n- События: SDK_GAME_PAUSE, SDK_GAME_START, SDK_REWARDED_WATCH_COMPLETE\n\n**SDK Configuration:**\nwindow.GD_OPTIONS = { gameId, onEvent }","status":"closed","priority":1,"issue_type":"feature","owner":"komleff@gmail.com","created_at":"2026-01-29T23:47:28.3951528+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T23:58:31.5462901+07:00","closed_at":"2026-01-29T23:58:31.5462901+07:00","close_reason":"Реализованы адаптеры CrazyGames и GameDistribution, исправлены P0/P1 замечания code review"}
{"id":"slime-arena-ee5","title":"Настроить Beads MCP Server для Claude","description":"**Местоположение:**\nИнтеграция: ~/.claude/settings.json\n\n**Требование из ТЗ:**\nРаздел Beads: Для полной интеграции с Claude нужен MCP (Model Context Protocol) сервер\n\n**Проблема:**\nСейчас Beads интегрирован через CLI-only mode (хуки SessionStart/PreCompact). Это минимум для работы, но без слэш-команд.\n\n**Последствия:**\n- Нет слэш-команд вроде /map, /issues в Claude\n- Контекст загружается медленнее\n- Сложнее взаимодействовать с задачами\n\n**Решение:**\nУстановить Beads MCP Server согласно https://github.com/steveyegge/beads/blob/main/docs/PLUGIN.md\n\n**Связанные компоненты:**\n- Beads CLI\n- Claude Code settings\n- MCP protocol","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T16:18:35.9341115+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T07:36:47.1406935+07:00","closed_at":"2026-01-09T07:36:47.1406935+07:00","close_reason":"Настроен Beads MCP Server для VS Code через глобальный mcp.json. Сервер Running, инструменты bd_* доступны в Copilot Chat.","comments":[{"id":1,"issue_id":"slime-arena-ee5","author":"FRACTAL-XL\\komle","text":"Blocked: Claude Code не поддерживает /plugin команды. MCP интеграция недоступна. CLI hooks работают как fallback.","created_at":"2026-01-08T13:54:40Z"},{"id":2,"issue_id":"slime-arena-ee5","author":"FRACTAL-XL\\komle","text":"BLOCKED: Claude Code (VSCode extension) не поддерживает команды /plugin marketplace и /plugin install. Документация Beads предполагает функционал, которого нет в текущей версии Claude Code. CLI-интеграция через hooks (SessionStart/PreCompact → bd prime) работает как fallback. Задача вернётся в работу когда Anthropic добавит поддержку MCP плагинов.","created_at":"2026-01-08T14:10:57Z"}]}
{"id":"slime-arena-eg7","title":"Рефакторинг ArenaRoom: извлечение боевой системы","description":"**Местоположение:**\n- Файл: server/src/rooms/ArenaRoom.ts (4026 строк, 126+ методов)\n\n**Требование из ТЗ:**\n\u003e Раздел Architecture Part 1: Декомпозиция God Objects для поддерживаемости\n\n**Проблема:**\nArenaRoom монолит с прямым доступом ко всем системам боя. Нарушает SOLID принципы, сложно расширять.\n\n**Последствия:**\n- Высокая сложность кода (легко регрессии)\n- Сложность добавления новых способностей/механик\n- Плохая тестируемость боевой логики\n\n**Воспроизведение:**\nПопытайся добавить новый класс с уникальной способностью → понадобится переписывать ArenaRoom\n\n**Связанные компоненты:**\n- server/src/rooms/schema/GameState.ts\n- server/src/utils/combat/\n- server/src/utils/physics/","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T16:17:36.3917536+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T00:49:33.2434868+07:00","closed_at":"2026-01-09T00:49:33.2434868+07:00","close_reason":"Merged in PR #57","comments":[{"id":6,"issue_id":"slime-arena-eg7","author":"FRACTAL-XL\\komle","text":"Sprint 11 progress: Talent System module created (server/src/rooms/systems/talent/). TalentModifierCalculator.ts + TalentGenerator.ts extracted. Commit 0d90e7e. Integration into ArenaRoom deferred.","created_at":"2026-01-08T17:15:22Z"}]}
{"id":"slime-arena-ek3","title":"ShopScreen - Экран магазина","description":"Реализовать ShopScreen: панель валют, вкладки витрин, сетка офферов, покупка -\u003e RewardModal, реклама -\u003e /ads/grant -\u003e /ads/claim -\u003e RewardModal, paymentsEnabled=false -\u003e PlatformLimitModal. Источник: UI-TZ §6.1","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:36.6526946+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:36.6526946+07:00","dependencies":[{"issue_id":"slime-arena-ek3","depends_on_id":"slime-arena-473","type":"blocks","created_at":"2026-01-09T21:48:28.4198921+07:00","created_by":"unknown"},{"issue_id":"slime-arena-ek3","depends_on_id":"slime-arena-vbp","type":"blocks","created_at":"2026-01-09T21:48:28.5560696+07:00","created_by":"unknown"},{"issue_id":"slime-arena-ek3","depends_on_id":"slime-arena-3op","type":"blocks","created_at":"2026-01-09T21:48:28.7017183+07:00","created_by":"unknown"}]}
{"id":"slime-arena-erh","title":"Improve guest nickname format (add space)","description":"Copilot P3: Гостевые никнеймы генерируются без пробела ('БыстрыйОхотник123'). Рекомендуется формат 'Быстрый Охотник 123' для лучшей читаемости. Файл: client/src/services/authService.ts:282","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T03:58:21.7497497+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T03:58:21.7497497+07:00"}
{"id":"slime-arena-fbp","title":"AUTH-2: GeoIP сервис определения региона","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:36.6186828+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:36.6186828+07:00"}
{"id":"slime-arena-fn5","title":"AUTH-6: Яндекс ID клиент","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:48.5992078+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:48.5992078+07:00"}
{"id":"slime-arena-foh","title":"Исправление рассинхрона частоты HUD (10Hz vs 5Hz)","description":"**Местоположение:**\n- Файл: client/src/ui/components/GameHUD.tsx\n- Файл: client/src/main.ts\n\n**Требование из ТЗ:**\n\u003e Раздел Progress: Известная проблема G-3\n\n**Проблема:**\nGameHUD обновляется на 10 Hz (100ms), а остальные сигналы на 5 Hz (200ms). Это создаёт рассинхрон и мигание на экране.\n\n**Последствия:**\n- Визуальное мигание HUD элементов\n- Несинхронизированные обновления с игровым состоянием\n\n**Воспроизведение:**\n1. Запусти игру\n2. Посмотри на счётчик уровня и массы — видны неконстантные обновления\n\n**Решение:**\nЛибо сделать GameHUD реактивным на signals, либо унифицировать частоту 10Hz везде\n\n**Связанные компоненты:**\n- client/src/ui/signals/gameState.ts\n- client/src/rendering/canvas.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T16:18:05.6468005+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T00:21:28.9301735+07:00","closed_at":"2026-01-09T00:21:28.9301735+07:00","close_reason":"Merged in PR #56"}
{"id":"slime-arena-fwm","title":"[Tech Debt] Оптимизировать CSS-инъекцию в модальных окнах","description":"**Источник:** PR #111, ревьювер: Gemini\n\n**Замечание:**\n\u003e injectStyles для каждого модального окна может привести к дублированию CSS. Рассмотреть CSS-in-JS библиотеку или традиционные CSS файлы.\n\n**Файл:** client/src/ui/components/LeaderboardScreen.tsx:50","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T02:26:48.364206+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T02:26:48.364206+07:00"}
{"id":"slime-arena-g5s","title":"A/B: QA override для переключения вариантов","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T21:22:40.9508607+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T01:43:08.239181+07:00","closed_at":"2026-01-09T01:43:08.239181+07:00","close_reason":"Дубль: QA override покрыт в TZ-ABTesting-ClaudeOpus-v1.3.md Фаза 2 (Переопределение для отладки). Включено в epic slime-arena-5qa."}
{"id":"slime-arena-hbl","title":"InfoModal - Информационное модальное окно","description":"Реализовать InfoModal для отображения информации. Текст + Копировать ID + Закрыть. Контекст: инструкция удаления данных. Источник: UI-TZ §8.6","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:31.7326617+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:31.7326617+07:00"}
{"id":"slime-arena-hp5","title":"Tech debt: стабилизировать Play Again при Results (arenaWaitTime)","description":"**Местоположение:**\n- Файл: client/src/main.ts\n- Блоки: connectToServer (ветка serverPhase === \\Results\\), uiCallbacks.onPlay/onPlayAgain\n\n**Проблема:**\nПри повторном входе во время серверной фазы Results игрок может попадать в старую арену, возвращаться в лобби с таймером и застревать в состоянии, где запуск матча не срабатывает. Причины: попытка joinOrCreate во время Results и неконсистентный UI-стейт (phase/canvas/viewport) при goToLobby из ветки Results.\n\n**Последствия:**\n- Пустой экран/зависший таймер ожидания арены\n- Повторный заход в уже завершённый матч\n- Нестабильный UX кнопки «Играть ещё»\n\n**Решение (варианты):**\n1) Guard на повторный вход, пока arenaWaitTime \u003e 0:\n   - Блокировать onPlay/onPlayAgain на уровне UI и в обработчиках.\n2) Перенести setPhase('connecting') до/после проверки serverPhase:\n   - Устанавливать 'connecting' только если serverPhase !== 'Results'.\n3) В ветке serverPhase === 'Results' сбрасывать UI:\n   - setPhase('menu'), setGameViewportLock(false), canvas.style.display = 'none', setConnecting(false).\n4) Очищать arenaWaitInterval при смене фаз и при leaveRoom.\n\n**Связанные компоненты:**\n- client/src/main.ts\n- client/src/ui/components/MainMenu.tsx\n- client/src/ui/signals/gameState.ts\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-18T20:34:30.0012339+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T20:34:30.0012339+07:00"}
{"id":"slime-arena-iqv","title":"Стрелка движения: уменьшить размер в 2 раза","description":"**Файл:** config/balance.json (visual.inputArrow)\n\n**Текущее:** minLength: 30, maxLength: 80\n\n**Требуемое:** Уменьшить в 2 раза, сделать размер как у стрелок на сундуки за пределами экрана.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T01:07:01.69411+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T01:16:13.711042+07:00","closed_at":"2026-01-17T01:16:13.711042+07:00","close_reason":"Реализовано в PR #85"}
{"id":"slime-arena-iry","title":"BootScreen - Экран загрузки приложения","description":"Реализовать BootScreen (SplashScreen + LoadingScreen). Состояния: initializing -\u003e authenticating -\u003e loadingConfig -\u003e ready/error. Автоматический ретрай до 3 попыток. Источник: UI-TZ §5.1, ScreenMap §2.1","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-09T21:46:53.5088195+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T02:18:40.9976729+07:00","closed_at":"2026-01-18T02:18:40.9976729+07:00","close_reason":"BootScreen implemented with cookie-style progress bar"}
{"id":"slime-arena-isf","title":"Server should return place in personalStats","status":"open","priority":2,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T03:09:03.2158877+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T03:09:03.2158877+07:00"}
{"id":"slime-arena-iu4","title":"Баг: determinism.test.js указывает неверный путь к ArenaRoom.js","description":"**Местоположение:**\n- Файл: server/tests/determinism.test.js\n- Строка: 6\n\n**Требование из процесса:**\n\u003e Тесты должны подтверждать детерминизм на сервере (npm run test).\n\n**Проблема:**\nТест ожидает файл server/dist/rooms/ArenaRoom.js, но сборка складывает его в server/dist/server/src/rooms/ArenaRoom.js.\n\n**Последствия:**\n- npm run test падает\n- Детерминизм не подтверждается автоматикой\n\n**Решение:**\n- Исправить путь в тесте на фактический outDir\n- Или привести tsconfig/outDir к пути, который ожидает тест\n\n**Связанные компоненты:**\n- server/tests/determinism.test.js\n- server/tsconfig.json","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-25T23:54:58.6406351+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-26T01:53:50.0685511+07:00","closed_at":"2026-01-26T01:53:50.0685511+07:00","close_reason":"Fixed: corrected TypeScript compiled paths (commit 580570c)"}
{"id":"slime-arena-j2j","title":"Нагрузочное тестирование k6 (CCU=500)","description":"**Местоположение:**\n- tests/load/soft-launch.js\n\n**Требование из ТЗ:**\n\u003e Раздел Stage D: Валидация стабильности при CCU=500 с нулевыми ошибками\n\n**Проблема:**\nНужны k6 нагрузочные тесты для проверки инфраструктуры Soft Launch под нагрузкой (500 одновременных пользователей).\n\n**Последствия:**\n- Без тестов нагрузки невозможно предсказать поведение в production\n- Риск краша при первый день запуска\n\n**Диагностические данные:**\n- Текущий статус: тесты существуют (tests/load/soft-launch.js)\n- Требуемый результат: 87k+ requests, 0% errors\n\n**Связанные компоненты:**\n- MetaServer API endpoints\n- PostgreSQL connection pooling\n- Redis queue (Matchmaking)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T16:18:32.8069558+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T17:02:27.4203023+07:00","closed_at":"2026-01-08T17:02:27.4203023+07:00","close_reason":"k6 тесты существуют и правильно настроены (tests/load/soft-launch.js). Stages до 500 CCU, thresholds p99\u003c2000ms, errors\u003c1%. T-02/T-03 fixes применены. Готово к ручному запуску: k6 run tests/load/soft-launch.js"}
{"id":"slime-arena-k6s","title":"AuthService: интеграция с платформенными адаптерами","description":"Реализовать loginViaYandex/Poki/CrazyGames/GameDistribution в AuthService клиента. Текущий login() ведёт все платформы кроме Telegram в loginAsGuest().","status":"closed","priority":1,"issue_type":"feature","owner":"komleff@gmail.com","created_at":"2026-01-30T00:16:37.3613746+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-30T00:21:52.764135+07:00","closed_at":"2026-01-30T00:21:52.764135+07:00","close_reason":"Реализована полная интеграция платформ в PR#112"}
{"id":"slime-arena-k7h","title":"Configure AI auto-sync daemon hooks","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T16:18:33.316625+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T16:22:41.4116215+07:00","closed_at":"2026-01-08T16:22:41.4116215+07:00","close_reason":"Дубликат"}
{"id":"slime-arena-kfh","title":"Вынести inline-стили MainScreen в отдельный CSS","description":"**Местоположение:**\n- Файл: client/src/ui/components/MainScreen.tsx\n\n**Проблема:**\nВсе стили MainScreen (550+ строк) определены inline. Файл содержит ~70% CSS и только 30% логики компонента.\n\n**Решение:**\n1. Создать client/src/styles/main-screen.css\n2. Перенести стили из const styles в CSS-файл\n3. Импортировать CSS в компонент\n\n**Приоритет:** P4 (backlog) — не критично для функциональности\n\n**Источник:** Code review PR #89","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-18T04:39:52.6502213+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T04:39:52.6502213+07:00"}
{"id":"slime-arena-knf","title":"fetchProfile после finishUpgrade","description":"Gemini P2: После /auth/upgrade userId остаётся пустым до перезапуска. Нужно вызывать fetchProfile() сразу после finishUpgrade() для синхронизации профиля.","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T21:18:29.8171703+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:18:29.8171703+07:00"}
{"id":"slime-arena-kse","title":"Fix TelegramAdapter comment referencing non-existent method","description":"Copilot P3: TelegramAdapter.ts содержит комментарий, ссылающийся на несуществующий метод authService.upgradeWithClaimToken(). Нужно обновить комментарий или реализовать метод.","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T03:58:14.9558929+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T03:58:14.9558929+07:00"}
{"id":"slime-arena-l4z","title":"Вынести inline-стили BootScreen в отдельный CSS","description":"**Местоположение:**\n- Файл: client/src/ui/components/BootScreen.tsx\n\n**Проблема:**\nВсе стили BootScreen определены inline в компоненте (const styles). Это нарушает паттерн разделения стилей и логики.\n\n**Решение:**\n1. Создать client/src/styles/boot-screen.css\n2. Перенести стили из const styles в CSS-файл\n3. Импортировать CSS в компонент\n\n**Приоритет:** P4 (backlog) — не критично для функциональности\n\n**Источник:** Code review PR #89","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-18T04:39:51.3869468+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T04:39:51.3869468+07:00"}
{"id":"slime-arena-laj","title":"YandexAdapter - адаптер авторизации для Yandex Games","status":"closed","priority":1,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-29T21:46:01.5539994+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-29T21:54:02.9228164+07:00","closed_at":"2026-01-29T21:54:02.9228164+07:00","close_reason":"Реализованы и прошли код-ревью (1 итерация, APPROVED)"}
{"id":"slime-arena-lhb","title":"Stage D: Smoke tests for complete flow","description":"**Местоположение:**\n- Stage D тестирование (Soft Launch)\n\n**Требование из ТЗ:**\n\u003e Раздел Stage D: Полный flow тестирование (auth → matchmaking → game → results)\n\n**Проблема:**\nНужны smoke-тесты для проверки полного жизненного цикла игровой сессии, включая интеграцию с MetaServer.\n\n**Последствия:**\n- Без тестов невозможно валидировать стабильность Soft Launch\n- Риск регрессий при развёртывании\n\n**Связанные компоненты:**\n- MatchServer, MetaServer, Auth, Matchmaking, Results submission","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T16:17:21.4638176+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T16:51:04.7548097+07:00","closed_at":"2026-01-08T16:51:04.7548097+07:00","close_reason":"Тесты уже реализованы в Sprint 3 (meta-stage-d.test.ts, 19 тестов). TypeScript компилируется. Runner run-stage-d.ps1 готов."}
{"id":"slime-arena-llf","title":"Удалить неиспользуемый widthTip из visual.inputArrow","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-17T00:25:49.0876671+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-19T21:40:59.8840643+07:00","closed_at":"2026-01-19T21:40:59.8840643+07:00","close_reason":"widthTip уже удалён из codebase","labels":["cleanup","tech-debt"]}
{"id":"slime-arena-mt1","title":"Декомпозиция God-объекта main.ts","description":"main.ts — God-объект ~5000 строк. Цель: разделить на RenderingSystem, NetworkManager, GameStateManager, UIController.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-19T21:45:36.7246916+07:00","created_by":"Claude Opus","updated_at":"2026-01-20T23:33:25.1013281+07:00","closed_at":"2026-01-20T23:33:25.1013281+07:00","close_reason":"Sprint 12 завершён: 8 модулей извлечено, v0.6.0 выпущен","labels":["client","refactor","tech-debt"]}
{"id":"slime-arena-mtw","title":"Баг: модификаторы укуса применяются несимметрично","description":"**Местоположение:**\n- Файл: server/src/rooms/ArenaRoom.ts\n- Метод: processCombat (участок 1469-1531)\n\n**Требование из ТЗ (slime-arena-8q9):**\n\u003e attackerGain = attacker.mass × 10% × modifiers\n\u003e scatterMass  = defender.mass × 10% × modifiers\n\n**Проблема:**\nСейчас набор модификаторов разделён: `attackerGain` получает `damageBonusMult`/`classStats.damageMult`/`zoneMultiplier`, а `scatterMass` получает `damageTakenMult` и `biteResistPct`. Это не соответствует формулировке \"× modifiers\" и меняет силу талантов/классов.\n\n**Последствия:**\n- Несогласованная работа талантов (`biteDamageBonus`, `biteResistBonus`, `ambushDamage`)\n- Сложно прогнозировать эффект укуса\n\n**Решение:**\n- Зафиксировать список модификаторов для обеих частей формулы\n- Применить их симметрично к `attackerGain` и `scatterMass` (или задокументировать исключения)\n- Обновить комментарии и тесты при необходимости\n\n**Связанные компоненты:**\n- server/src/rooms/ArenaRoom.ts\n- config/balance.json\n- shared/src/config.ts","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-18T21:44:13.1446629+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T21:44:13.1446629+07:00","dependencies":[{"issue_id":"slime-arena-mtw","depends_on_id":"slime-arena-8q9","type":"blocks","created_at":"2026-01-18T21:45:14.2930884+07:00","created_by":"unknown"}]}
{"id":"slime-arena-n5p","title":"Мини-карта - HUD элемент в BattleScreen","description":"Реализовать мини-карту для BattleScreen: границы арены, игрок, враги, сундуки, Король. Безопасные зоны в финале. ~15% ширины экрана. Источник: UI-TZ §5.4.3","notes":"Рабочая версия есть. Новая заблокирована выбором стиля","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:46:57.165097+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:30.5565207+07:00"}
{"id":"slime-arena-o4y","title":"[Tech Debt] Уточнить именование generateGuestNickname/SkinId","description":"**Источник:** PR #111, ревьювер: Gemini\n\n**Замечание:**\n\u003e Название generateRandom... может создавать впечатление, что никнейм будет новым при каждом сеансе. Рекомендация: переименовать в assignGuestNicknameOnce.\n\n**Файл:** client/src/services/authService.ts:182","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T02:26:46.5469464+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T02:26:46.5469464+07:00"}
{"id":"slime-arena-ocn","title":"Boot screen: загрузка первым без JS bundle","description":"Текущий Boot screen загружается как часть JS bundle. Нужно: 1) Boot screen inline в HTML 2) Lazy load основного приложения 3) Реальный прогресс загрузки. Приоритет P3 - после презентации.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-18T03:42:01.2708558+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T19:02:41.9230638+07:00","closed_at":"2026-01-18T19:02:41.9230638+07:00","close_reason":"Реализовано в релизе 0.5.1. Inline boot screen добавлен в index.html (CSS + HTML до загрузки JS bundle)."}
{"id":"slime-arena-on8","title":"AUTH-11: POST /auth/oauth/resolve","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:54.6030558+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:54.6030558+07:00"}
{"id":"slime-arena-pgf","title":"Включить лимиты просмотра рекламы","description":"**Требование:** TZ 5.8 (лимиты)\n\n**Проблема:** Таблица daily_rewards.ads_watched_today не используется в логике сервиса\n\n**Решение:**\n1. В AdsService.generateGrant() проверять лимит из economy.json\n2. В AdsService.claimReward() инкрементировать счётчик ads_watched_today\n3. Добавить cron-задачу для ежедневного сброса счётчика\n4. Возвращать ошибку при превышении лимита","notes":"Реклама пока не подключена, не блокер","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-09T08:05:36.6897138+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:04.8011884+07:00"}
{"id":"slime-arena-q90","title":"[P2] Math.random() в skinGenerator нарушает детерминизм","description":"Источник: Codex ревью PR #109 (P2)\n\nМестоположение:\nФайл: server/src/utils/generators/skinGenerator.ts\nСтрока: ~72 в generateRandomBasicSkin()\n\nПроблема:\nВ server-коде запрещён Math.random() - нужна Rng из server/src/utils/rng.ts для детерминизма.\n\nПоследствия:\n- Нарушение детерминизма при генерации скинов\n- Риск несоответствия баланса между записями и реальными матчами\n- Нарушение архитектурного правила\n\nРешение:\n1. Вынести generateRandomBasicSkin() требующей Rng параметр\n2. В сервере использовать: generateRandomBasicSkin(rng) где rng из инстанса комнаты\n3. Добавить ESLint правило для запрета Math.random() в server/**\n\nФайлы для изменения:\n- server/src/utils/generators/skinGenerator.ts\n- server/src/meta/services/ (использование функции)\n- .eslintrc.json (добавить правило)\n\nPR для исправления: Sprint 14+","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T02:25:48.0475538+07:00","updated_at":"2026-01-28T02:09:22.878096+07:00","closed_at":"2026-01-28T02:09:22.878096+07:00","close_reason":"Fixed in commit 69ead92 (sprint-14/meta-integration)","labels":["determinism","meta-gameplay","review-feedback","security","server"]}
{"id":"slime-arena-qf9","title":"Баг: неверный путь к config/skins.json в skinGenerator","description":"**Местоположение:**\n- Файл: server/src/utils/generators/skinGenerator.ts\n- Строка: 30\n\n**Требование из ТЗ:**\n\u003e Генерация скина: случайный выбор из config/skins.json (tier: basic).\n\n**Проблема:**\nИспользуется путь через process.cwd(), из-за чего при запуске meta-сервера из каталога server/ файл config/skins.json не находится.\n\n**Последствия:**\n- Ошибка чтения конфигурации скинов (ENOENT)\n- Сбой регистрации гостя/первичного профиля\n\n**Решение:**\n- Использовать путь относительно файла (через __dirname) или передавать абсолютный путь через переменные окружения\n\n**Связанные компоненты:**\n- server/src/utils/generators/skinGenerator.ts\n- config/skins.json","status":"closed","priority":1,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-25T23:54:48.0467592+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-26T01:53:50.061283+07:00","closed_at":"2026-01-26T01:53:50.061283+07:00","close_reason":"Fixed: corrected TypeScript compiled paths (commit 580570c)"}
{"id":"slime-arena-qxj","title":"Валидация joinToken в ArenaRoom","description":"**Местоположение:**\n- Файл: server/src/rooms/ArenaRoom.ts\n- Метод: onAuth()\n\n**Требование из ТЗ:**\n\u003e Раздел Sprint 2.5: joinToken validation отложено до Stage D\n\n**Проблема:**\nArenaRoom должен валидировать JWT токен перед подключением клиента. Сейчас валидация не реализована.\n\n**Последствия:**\n- Уязвимость безопасности: любой может подключиться к матчу, зная ID комнаты\n- Нарушение контракта MatchServer ↔ MetaServer\n\n**Связанные компоненты:**\n- server/src/meta/services/AuthService.ts (JWT генерация)\n- server/src/rooms/ArenaRoom.ts (onAuth validation)\n- client/src/services/matchmakingService.ts (joinToken получение)","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-08T16:18:14.807773+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T17:01:33.4748655+07:00","closed_at":"2026-01-08T17:01:33.4748655+07:00","close_reason":"Реализована полная JWT-валидация: JoinTokenService для генерации/верификации, интеграция в MatchmakingService (токены при создании матча), onAuth в ArenaRoom (валидация при подключении). Dev mode поддерживается через JOIN_TOKEN_REQUIRED env."}
{"id":"slime-arena-rj4","title":"Setup Beads MCP Server for Claude integration","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T16:18:33.0685376+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-08T16:22:41.416268+07:00","closed_at":"2026-01-08T16:22:41.416268+07:00","close_reason":"Дубликат"}
{"id":"slime-arena-tja","title":"UI Refactoring Phase 3 - Legacy cleanup + Safe Area","description":"Очистка legacy кода и адаптация Safe Area. После Phase 2.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T19:19:56.4245178+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T19:19:56.4245178+07:00","dependencies":[{"issue_id":"slime-arena-tja","depends_on_id":"slime-arena-2wq","type":"blocks","created_at":"2026-01-09T19:25:25.7050255+07:00","created_by":"unknown"}]}
{"id":"slime-arena-tn7","title":"ResultsScreen — правая кнопка возврата на Main","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-18T01:18:13.6115001+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T02:36:02.0506108+07:00","closed_at":"2026-01-18T02:36:02.0506108+07:00","close_reason":"MainScreen и ResultsScreen реализованы"}
{"id":"slime-arena-tux","title":"Баг: WASD кнопки управления не работают","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T02:01:15.3461203+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-17T02:25:25.8637118+07:00","closed_at":"2026-01-17T02:25:25.8637118+07:00","close_reason":"Исправлено в PR #86 - WASD работает при нулевой интенсивности мыши","comments":[{"id":8,"issue_id":"slime-arena-tux","author":"komle","text":"А должны были работать как относительные рули управления:\n\nW - максимальное ускореине вперед\nA - поворот налево относительно текущего курса\nS - максимальное ускорение назад\nD - поворот направо относительно текущего курса","created_at":"2026-01-16T19:38:16Z"}]}
{"id":"slime-arena-u1r","title":"[P1] CrazyGames JWT верификация подписи","description":"Реализовать верификацию JWT подписи через публичный ключ CrazyGames. Код подготовлен в CrazyGamesAuthProvider.ts (раскомментировать getPublicKey). Ключ: https://sdk.crazygames.com/publicKey.json. Кэшировать на 1 час.","status":"open","priority":1,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-30T00:43:25.8895831+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-30T00:43:25.8895831+07:00"}
{"id":"slime-arena-uor","title":"P2 fixes: PokiAdsProvider race condition, trim, comments","description":"1) PokiAdsProvider: таймаут не отменяется при успехе. 2) YandexAdapter: playerName без trim(). 3) PokiAdapter: нет комментария про Math.random(). 4) Все адаптеры: символ : в nickname.","status":"closed","priority":2,"issue_type":"bug","owner":"komleff@gmail.com","created_at":"2026-01-30T00:16:41.2567967+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-30T00:21:52.7761739+07:00","closed_at":"2026-01-30T00:21:52.7761739+07:00","close_reason":"Реализована полная интеграция платформ в PR#112"}
{"id":"slime-arena-vbp","title":"ErrorModal - Модальное окно ошибок","description":"Реализовать ErrorModal для отображения ошибок (недостаток валюты, сетевая, серверная). Кнопки: Повторить/OK. Z-index: 100. Источник: UI-TZ §8.3","notes":"Полезно, но не блокер для demo","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T21:46:49.8711305+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:34.0556314+07:00"}
{"id":"slime-arena-vjn","title":"Docker: multi-platform build (ARM64 + AMD64)","description":"**Проблема:**\nОбразы Docker собираются только для linux/amd64 (x86_64).\nНа macOS M1/M2/M3/M4 (Apple Silicon ARM64) контейнеры не запускаются без эмуляции.\n\n**Источник:**\nPerplexity AI chat: проблема запуска на Mac M3\n\n**Симптом:**\n```\nno matching manifest for linux/arm64\n```\n\n**Текущее состояние:**\n- publish-containers.yml: нет параметра `platforms:`\n- Все Dockerfile используют node:18-alpine (устарел)\n- Нет документации по запуску на ARM\n\n**Решение:**\n1. Добавить `platforms: linux/amd64,linux/arm64` в publish-containers.yml\n2. Обновить базовый образ на node:20-alpine (LTS до 2026)\n3. Обновить README с инструкциями для Apple Silicon\n4. Добавить docker-compose.arm64.yml для нативной сборки\n\n**Файлы:**\n- .github/workflows/publish-containers.yml\n- docker/*.Dockerfile (5 файлов)\n- docker/docker-compose.*.yml\n- README.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T01:58:31.1292308+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T06:34:20.3656978+07:00","closed_at":"2026-01-09T06:34:20.3656978+07:00","close_reason":"Multi-platform Docker support released in v0.4.0"}
{"id":"slime-arena-w9y","title":"MainScreen — реализация по макету main.html","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-18T01:18:12.4231695+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-18T02:36:02.0442175+07:00","closed_at":"2026-01-18T02:36:02.0442175+07:00","close_reason":"MainScreen и ResultsScreen реализованы"}
{"id":"slime-arena-ww8","title":"Защита от race condition при конвертации гостя в AuthService","description":"В AuthService.ts возможен race condition при guest-to-registered конвертации. Рекомендуется SELECT FOR UPDATE.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T02:25:55.8108445+07:00","updated_at":"2026-01-28T02:09:22.8897114+07:00","closed_at":"2026-01-28T02:09:22.8897114+07:00","close_reason":"Fixed in commit 69ead92 (sprint-14/meta-integration)","labels":["meta-gameplay","reliability","review-feedback"]}
{"id":"slime-arena-x33","title":"PauseOverlay - Меню паузы в матче","description":"Реализовать PauseOverlay с кнопками: Продолжить, Звук, Покинуть. Не останавливает симуляцию. Z-index: 70. Зависит от ConfirmModal. Источник: UI-TZ §9.2","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-09T21:46:54.7422431+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:40.6043559+07:00","closed_at":"2026-01-20T23:51:40.6043559+07:00","close_reason":"Не применимо: реалтайм PvP без паузы","dependencies":[{"issue_id":"slime-arena-x33","depends_on_id":"slime-arena-0nu","type":"blocks","created_at":"2026-01-09T21:48:28.2885875+07:00","created_by":"unknown"}]}
{"id":"slime-arena-xta","title":"[Tech Debt] Разделить отображение ошибки клейма от таймера в ResultsScreen","description":"**Источник:** PR #111, ревьювер: Gemini (iteration 2)\n\n**Замечание:**\n\u003e Логика для текста кнопки сложна. Стоит разделить вывод сообщения об ошибке клейма от состояния таймера.\n\n**Файл:** client/src/ui/components/ResultsScreen.tsx:210","status":"open","priority":2,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T02:29:24.3888984+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T02:29:24.3888984+07:00"}
{"id":"slime-arena-y60","title":"AUTH-3: Фабрика OAuth провайдеров","status":"open","priority":0,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-31T01:46:37.7825225+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-31T01:46:37.7825225+07:00"}
{"id":"slime-arena-y63","title":"ClassSelectModal - Детальный выбор класса","description":"Реализовать ClassSelectModal для детального просмотра класса. Иконка, название, пассивка, стартовое умение. Кнопки: Выбрать, закрыть. Источник: UI-TZ §8.7","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-09T21:47:32.957955+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-09T21:47:32.957955+07:00"}
{"id":"slime-arena-yij","title":"[Tech Debt] Кэшировать auth-данные в сигналах вместо прямого чтения localStorage","description":"**Источник:** PR #111, ревьювер: Gemini\n\n**Замечание:**\n\u003e Методы getJoinToken(), isAuthenticated() напрямую читают из localStorage при каждом вызове. Рассмотреть возможность кэширования в сигналах.\n\n**Файл:** client/src/services/authService.ts:167","status":"open","priority":2,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T02:26:44.7815388+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T02:26:44.7815388+07:00"}
{"id":"slime-arena-ytx","title":"Use consistent platformType for guest users","description":"Copilot P3: В loginAsGuest() используется platformType: 'dev' вместо 'standalone' или 'guest'. Рекомендуется использовать platformManager.getPlatformType() для консистентности. Файл: client/src/services/authService.ts:194","status":"open","priority":3,"issue_type":"task","owner":"komleff@gmail.com","created_at":"2026-01-28T03:58:28.1684808+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T03:58:28.1684808+07:00"}
{"id":"slime-arena-zmf","title":"Фикс: адаптивный джойстик не должен смещать базу","description":"**Местоположение:**\n- Файл: client/src/input/joystick.ts\n- Метод: updateJoystickFromPointer (строки 94-124)\n- Связано: client/src/input/InputManager.ts (инициализация baseX/baseY при pointerdown)\n\n**Требование из ТЗ:**\n\u003e Виртуальный адаптивный джойстик не должен смещаться по экрану вслед за пальцем.\n\n**Проблема:**\nВ режиме adaptive база джойстика двигается за указателем (followSpeed), из-за чего весь джойстик «уплывает» во время удержания.\n\n**Последствия:**\n- Нестабильное управление на мобильных\n- Потеря ориентации относительно области ввода\n- Сложно удерживать направление в динамичных ситуациях\n\n**Решение:**\n- В adaptive режиме фиксировать baseX/baseY в точке активации\n- Убрать смещение базы в updateJoystickFromPointer\n- Оставить ограничение хода knob радиусом и deadzone\n\n**Связанные компоненты:**\n- client/src/input/joystick.ts\n- client/src/input/InputManager.ts\n- config/balance.json (controls.joystickMode/joystickFollowSpeed — при необходимости уточнить поведение)\n","notes":"Критично: джойстик перекрывает обзор","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-18T17:46:40.7548995+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-20T23:51:05.7108603+07:00"}
{"id":"slime-arena-zwe","title":"Расширить список banned words в nicknameValidator","description":"В nicknameValidator.ts список BANNED_WORDS неполный. Отсутствуют: slime, arena, dev, staff, gm, gamemaster. Риск: игроки могут выдавать себя за официальных представителей.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T02:25:43.1840271+07:00","updated_at":"2026-01-28T02:09:22.8859179+07:00","closed_at":"2026-01-28T02:09:22.8859179+07:00","close_reason":"Fixed in commit 69ead92 (sprint-14/meta-integration)","labels":["meta-gameplay","review-feedback","security"]}
{"id":"slime-arena-zwe2","title":"[P2] oauth_links metadata JSONB для будущих provider данных","description":"Источник: Gemini 3 Pro ревью PR #109 (P2)\n\nМестоположение:\nФайлы:\n- server/src/db/migrations/007_meta_gameplay_columns.sql\n- server/src/meta/models/OAuth.ts\n- server/src/meta/routes/auth.ts\n\nПроблема:\nТекущая схема oauth_links не предусматривает хранение дополнительных данных OAuth провайдера:\n- refresh_token (для Telegram Bot API, YandexGames)\n- scope (какие права были запрошены)\n- email (если провайдер вернул)\n- expires_at (для токенов с TTL)\n\nПоследствия:\n- При смене версии OAuth API потребуется миграция БД\n- Невозможно реализовать автоматическое обновление refresh_token\n- Сложнее отлаживать проблемы с OAuth\n- Будущие расширения потребуют миграции\n\nРешение:\nСоздать Migration 009 добавляющую JSONB колонку metadata с индексом GIN\n\nФайлы для изменения:\n- server/src/db/migrations/009_oauth_links_metadata.sql (создать)\n- server/src/meta/models/OAuth.ts (добавить metadata field)\n- server/src/meta/services/AuthService.ts (обновлять metadata)\n- server/src/meta/routes/auth.ts (сохранять поля)\n\nЗависимость: Migration 008 (должна быть выполнена)\nPR для реализации: Sprint 14+","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T12:00:00+07:00","created_by":"Dmitriy Komlev","updated_at":"2026-01-28T01:11:35.6727863+07:00","labels":["database","review-feedback","server"]}
