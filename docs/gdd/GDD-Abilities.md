# Slime Arena — Abilities

**Версия:** 3.3.2  
**Дата:** 03.01.2026  
**Зависимости:** GDD-Core.md (GCD, классы)  
**Глоссарий:** [GDD-Glossary.md](GDD-Glossary.md)

---

## 1. Общие правила

### 1.1. Стоимость

- Базовая стоимость умений выражается в процентах от текущей массы.
- Итоговая стоимость может изменяться талантами и улучшениями.
- Умение нельзя активировать, если после оплаты масса станет меньше 50 кг.

### 1.2. Глобальная перезарядка

| Параметр | Значение |
|---|---|
| `gcdTicks` | 3 (см. GDD-Core.md) |
| Длительность | 100 мс при 30 Гц |

- Между любыми умениями: `gcdTicks`.
- Между умением и укусом: `gcdTicks`.
- Очередь: максимум 1 умение.

### 1.3. Слоты умений

| Слот | Момент получения | Содержимое |
|---|---|---|
| Первый | Старт матча | Классовое умение (без выбора) |
| Второй | Уровень 3 (300 кг) | Выбор 1 из 3 новых |
| Третий | Уровень 5 (800 кг) | Выбор 1 из 3 новых |

---

## 2. Стартовые умения классов

### 2.1. Рывок (Охотник)

Мгновенное перемещение в направлении движения.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Дистанция `dashDistanceM` | 80 м | 80 м | 104 м |
| Длительность `dashDurationSec` | 0.3 сек | 0.3 сек | 0.3 сек |
| Стоимость `abilityCostMassPercent` | 3% | 3% | 3% |
| Перезарядка `cooldownSec` | 5 сек | 4 сек | 4 сек |

**Улучшения:**
- Уровень 2: −20% к перезарядке (5 → 4 сек)
- Уровень 3: +30% к дистанции (80 → 104 м)

**Особенности:**
- Можно поглощать пузыри во время рывка.
- Доступен только Охотнику.

---

### 2.2. Щит (Воин)

Блокирует весь входящий урон на время действия.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Длительность `shieldDurationSec` | 2.5 сек | 2.5 сек | 2.5 сек |
| Блокировка урона | 100% | 100% | 100% |
| Отражение урона атакующему | — | 30% | 30% |
| Волна отталкивания при снятии | — | — | 40 м |
| Стоимость `abilityCostMassPercent` | 4% | 4% | 4% |
| Перезарядка `cooldownSec` | 8 сек | 8 сек | 8 сек |

**Улучшения:**
- Уровень 2: Отражение 30% полученного урона атакующему
- Уровень 3: При окончании щита — волна отталкивания в радиусе 40 м

**Особенности:**
- Не снимается при атаке.
- Можно кусать под щитом.
- Доступен только Воину.

---

### 2.3. Замедление (Общий пул)

Создаёт зону замедления вокруг слайма. Доступно всем классам через карточки.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Радиус `slowRadiusM` | 80 м | 100 м | 100 м |
| Длительность `slowDurationSec` | 2 сек | 2 сек | 2 сек |
| Сила замедления `slowPct` | 30% | 30% | 40% |
| Стоимость `abilityCostMassPercent` | 2% | 2% | 2% |
| Перезарядка `cooldownSec` | 7 сек | 7 сек | 7 сек |

**Улучшения:**
- Уровень 2: +20 м к радиусу (80 → 100 м)
- Уровень 3: +10% к силе замедления (30% → 40%)

**Особенности:**
- Влияет только на вражеских слаймов.
- Доступен только Собирателю.

---

## 3. Общий пул умений

Доступны всем классам при открытии слотов 2 и 3.

**Урон умений:** процент от текущей массы цели в момент попадания. Применяются модификаторы урона атакующего.

---

### 3.1. Притяжение

Притягивает пузыри к слайму.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Радиус `pullRadiusM` | 120 м | 150 м | 150 м |
| Скорость притяжения | 50 м/с | 50 м/с | 70 м/с |
| Стоимость `abilityCostMassPercent` | 2% | 2% | 2% |
| Перезарядка `cooldownSec` | 7 сек | 7 сек | 7 сек |

**Улучшения:**
- Уровень 2: +30 м к радиусу (120 → 150 м)
- Уровень 3: +20 м/с к скорости притяжения (50 → 70 м/с)

**Особенности:**
- Влияет только на пузыри.
- Не влияет на слаймов и сундуки.

---

### 3.2. Выброс

Одиночный снаряд на дальнюю дистанцию.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Дальность `projectileRangeM` | 300 м | 300 м | 300 м |
| Скорость `projectileSpeedMps` | 400 м/с | 400 м/с | 400 м/с |
| Урон `damagePctOfTargetMass` | 15% | 18% | 18% |
| Стоимость `abilityCostMassPercent` | 2% | 2% | 2% |
| Перезарядка `cooldownSec` | 3 сек | 3 сек | 3 сек |

**Улучшения:**
- Уровень 2: +20% к урону (15% → 18%)
- Уровень 3: пробивание первой цели (60% урона второй)

---

### 3.3. Плевок

Веер из нескольких снарядов.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Количество снарядов | 3 | 4 | 4 |
| Угол веера | 30° | 30° | 30° |
| Урон каждого `damagePctOfTargetMass` | 8% | 8% | 9.2% |
| Стоимость `abilityCostMassPercent` | 3% | 3% | 3% |
| Перезарядка `cooldownSec` | 4 сек | 4 сек | 4 сек |

**Улучшения:**
- Уровень 2: +1 снаряд (3 → 4)
- Уровень 3: +15% к урону каждого (8% → 9.2%)

---

### 3.4. Бомба

Медленный снаряд с зоной поражения.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Скорость снаряда | 200 м/с | 200 м/с | 200 м/с |
| Зона поражения | 50 м | 70 м | 70 м |
| Урон `damagePctOfTargetMass` | 12% | 12% | 12% |
| Стоимость `abilityCostMassPercent` | 4% | 4% | 4% |
| Перезарядка `cooldownSec` | 6 сек | 6 сек | 5 сек |

**Улучшения:**
- Уровень 2: +20 м к зоне поражения (50 → 70 м)
- Уровень 3: −1 сек к перезарядке (6 → 5 сек)

---

### 3.5. Отталкивание

Волна, отбрасывающая всех вокруг.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Радиус | 80 м | 100 м | 100 м |
| Базовый импульс `pushImpulseBase` | 50000 Н·с | 50000 Н·с | 65000 Н·с |
| Мин. скорость отброса `pushMinSpeedMps` | 30 м/с | 30 м/с | 30 м/с |
| Макс. скорость отброса `pushMaxSpeedMps` | 120 м/с | 120 м/с | 150 м/с |
| Урон | — | — | — |
| Стоимость `abilityCostMassPercent` | 3% | 3% | 3% |
| Перезарядка `cooldownSec` | 6 сек | 6 сек | 6 сек |

**Улучшения:**
- Уровень 2: +20 м к радиусу (80 → 100 м)
- Уровень 3: +30% к импульсу, +25% к макс. скорости

**Расчёт скорости отброса:**
```
скорость = clamp(impulse / mass, minSpeed, maxSpeed)
```

Лёгкие слаймы отлетают быстрее, но не выше `maxSpeed`. Тяжёлые слаймы отлетают медленнее, но не ниже `minSpeed`.

**Особенности:**
- Не наносит урона.
- Отбрасывает слаймов, пузыри и сундуки.

---

### 3.6. Мина

Ловушка, устанавливаемая на землю.

| Параметр | Уровень 1 | Уровень 2 | Уровень 3 |
|---|---:|---:|---:|
| Время жизни | 20 сек | 20 сек | 20 сек |
| Максимум мин | 1 | 2 | 2 |
| Урон при контакте `damagePctOfTargetMass` | 15% | 15% | 20% |
| Стоимость `abilityCostMassPercent` | 2% | 2% | 2% |
| Перезарядка `cooldownSec` | 10 сек | 10 сек | 10 сек |

**Улучшения:**
- Уровень 2: +1 мина одновременно (1 → 2)
- Уровень 3: +5% к урону (15% → 20%)

**Механика установки двух мин (уровень 2+):**
- Мины устанавливаются последовательно по ходу движения слайма.
- Интервал между минами: 15 м (примерно 1.5 радиуса слайма 100 кг).
- Мины не разлетаются веером — выстраиваются в линию за слаймом.
- Цель: преследователь не может проскочить между минами.

**Особенности:**
- Мина видна всем игрокам.
- Мина не срабатывает на владельца.

---

## 4. Механика «Двойная активация»

Талант эпической редкости, позволяющий активировать умение дважды подряд.

### 4.1. Алгоритм

1. Игрок активирует умение и платит обычную стоимость (100%).
2. Перезарядка не начинается.
3. В течение 1.0 сек можно активировать повторно.
4. При повторной активации:
   - Умение срабатывает второй раз.
   - Стоимость 80% от базовой.
5. Если повторной активации не было — перезарядка начинается как обычно.

### 4.2. Итоговая стоимость

Суммарная стоимость двойного срабатывания: 180% от базовой.

**Пример:**

Рывок (стоимость 3%):
- Первая активация: 3%
- Вторая активация: 2.4% (80% от 3%)
- Итого: 5.4% массы

---

## 5. Сводная таблица умений

| Умение | Стоимость | Перезарядка | Ключевой параметр | Доступность |
|---|---:|---:|---|---|
| Рывок | 3% | 5 сек | 80 м | Только Охотник |
| Щит | 4% | 8 сек | 2.5 сек | Только Воин |
| Притяжение | 2% | 7 сек | 120 м, 50 м/с | Только Собиратель |
| Замедление | 2% | 7 сек | 80 м, −30% | Общий пул |
| Выброс | 2% | 3 сек | 300 м, 15% урона | Общий пул |
| Плевок | 3% | 4 сек | 3 снаряда, 8% урона | Общий пул |
| Бомба | 4% | 6 сек | 50 м зона, 12% урона | Общий пул |
| Отталкивание | 3% | 6 сек | 80 м, без урона | Общий пул |
| Мина | 2% | 10 сек | 20 сек, 15% урона | Общий пул |

---

## 6. Сводная таблица улучшений

| Умение | Уровень 2 | Уровень 3 |
|---|---|---|
| Рывок | −20% к перезарядке | +30% к дистанции |
| Щит | Отражение 30% урона атакующему | Волна отталкивания 40 м при снятии |
| Замедление | +20 м к радиусу | +10% к силе замедления |
| Притяжение | +30 м к радиусу | +20 м/с к скорости |
| Выброс | +20% к урону | Пробивание первой цели |
| Плевок | +1 снаряд | +15% к урону каждого |
| Бомба | +20 м к зоне | −1 сек к перезарядке |
| Отталкивание | +20 м к радиусу | +30% к силе отброса |
| Мина | +1 мина одновременно | +5% к урону |

---

## 7. Правила улучшений

### 7.1. Условие появления

Улучшения умений появляются в карточках только когда все три слота заняты.

### 7.2. При открытии нового слота

Показываются только новые умения, которых у игрока ещё нет. Улучшения не показываются.

### 7.3. Смешивание с талантами

При формировании набора из 3 карточек система гарантирует минимум 1 талант. Остальные 2 карточки — случайный выбор между доступными талантами и улучшениями.

### 7.4. Гарантия классовых карточек

При каждом выборе (таланты или умения) система гарантирует хотя бы 1 карточку, специфичную для класса игрока:
- Для талантов: хотя бы 1 классовый талант (если доступен).
- Для умений: не применяется (классовое умение получено на старте).

---

## Связанные документы

- [GDD-Core.md](GDD-Core.md) — основные правила
- [GDD-Combat.md](GDD-Combat.md) — бой и механики
- [GDD-Talents.md](GDD-Talents.md) — таланты
