# План тестирования v0.8.1-pre

**Дата:** 2026-02-05
**Версия:** v0.8.1-pre
**Тестировщик:** Claude Opus 4.5 (PM)

---

## 1. Smoke Test — Запуск контейнера

| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 1.1 | Pull образа | Образ скачивается без ошибок |
| 1.2 | Запуск контейнера | Контейнер стартует, все сервисы up |
| 1.3 | Health endpoint | GET /health → 200 OK |
| 1.4 | PostgreSQL | Подключение к БД работает |
| 1.5 | Redis | Подключение к Redis работает |

## 2. Игровой клиент

| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 2.1 | Загрузка главного меню | Меню отображается, версия v0.8.1 |
| 2.2 | Guest авторизация | guestToken выдаётся |
| 2.3 | Matchmaking | Подключение к комнате работает |
| 2.4 | Игровой процесс | Слайм управляется, orbs собираются |

## 3. Admin Dashboard

### 3.1 Авторизация
| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 3.1.1 | Login страница | Форма отображается |
| 3.1.2 | Вход с валидными данными | JWT выдаётся, редирект |
| 3.1.3 | Вход с неверным паролем | 401 Unauthorized |
| 3.1.4 | Rate limiting | После 5 попыток — 429 |

### 3.2 Dashboard (метрики)
| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 3.2.1 | GET /api/v1/admin/stats | CPU, RAM, uptime возвращаются |
| 3.2.2 | UI отображение | Карточки метрик видны |
| 3.2.3 | Polling | Данные обновляются каждые 5 сек |
| 3.2.4 | Статус сервера | Online/Degraded корректно |

### 3.3 Rooms (список комнат)
| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 3.3.1 | GET /api/v1/admin/rooms | Список комнат возвращается |
| 3.3.2 | UI отображение | Карточки комнат видны |
| 3.3.3 | Tick stats | avgMs, maxMs отображаются |

### 3.4 Audit Log
| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 3.4.1 | GET /api/v1/admin/audit | Записи возвращаются |
| 3.4.2 | Пагинация | Load more работает |
| 3.4.3 | Human-readable actions | "Вход", "Выход" и т.д. |

### 3.5 Server Restart
| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 3.5.1 | POST /api/v1/admin/restart | 202 Accepted, файл создаётся |
| 3.5.2 | Audit log | server_restart_requested записан |

## 4. API Endpoints

| # | Endpoint | Метод | Ожидаемый результат |
|---|----------|-------|---------------------|
| 4.1 | /health | GET | 200 OK |
| 4.2 | /api/v1/admin/stats | GET | 200 + метрики |
| 4.3 | /api/v1/admin/rooms | GET | 200 + список |
| 4.4 | /api/v1/admin/audit | GET | 200 + записи |
| 4.5 | /api/v1/admin/restart | POST | 202 Accepted |

## 5. Регрессия

| # | Тест | Ожидаемый результат |
|---|------|---------------------|
| 5.1 | Leaderboard | Работает корректно |
| 5.2 | Match results | Сохраняются в БД |
| 5.3 | Skins | Отображаются корректно |

---

## Критерии прохождения

- **PASS:** Все smoke tests пройдены, критичные тесты (1.x, 2.x, 3.1.x, 3.2.x) работают
- **FAIL:** Любой smoke test или критичный тест не проходит
- **PARTIAL:** Некритичные тесты (пагинация, restart) имеют проблемы

---

## Результаты

*Заполняется после тестирования*
