# –ü–ª–∞–Ω Sprint-15: Platform Adapters Extension

**–î–∞—Ç–∞:** 29 —è–Ω–≤–∞—Ä—è 2026  
**PM:** Claude Opus 4.5  
**–í–µ—Ç–∫–∞:** `sprint-15/platform-adapters`  
**–¶–µ–ª—å:** –†–∞—Å—à–∏—Ä–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—É—é –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –¥–ª—è CrazyGames –∏ GameDistribution  
**–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ø—Ä–∏–Ω—Ç:** Sprint-14 (Meta Integration)

---

## 1. –†–µ–∑—é–º–µ

### 1.1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| TelegramAdapter | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
| StandaloneAdapter | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
| YandexAdapter | üî≤ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω (P2) |
| PokiAdapter | üî≤ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω (P2) |
| CrazyGamesAdapter | üÜï –ù–æ–≤—ã–π (Sprint-15) |
| GameDistributionAdapter | üÜï –ù–æ–≤—ã–π (Sprint-15) |

### 1.2. –¶–µ–ª–∏ Sprint-15

| ID | –¶–µ–ª—å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|------|-----------|
| G1 | –ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ CrazyGames —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π | P1 |
| G2 | –ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ GameDistribution (–≥–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º) | P1 |
| G3 | –†–µ–∫–ª–∞–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö | P1 |
| G4 | –°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è | P1 |
| G5 | –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ QA-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º | P1 |

### 1.3. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------------|
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ SDK | < 500ms |
| –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã | > 95% |
| –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ CG | Baseline (–ø–µ—Ä–≤—ã–π –∑–∞–º–µ—Ä) |
| –û—à–∏–±–∫–∏ SDK | < 0.1% —Å–µ—Å—Å–∏–π |

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2.1. –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         PlatformManager                          ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  detectPlatform() ‚Üí IPlatformAdapter                             ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:                                          ‚îÇ
‚îÇ  1. Telegram.WebApp.initData ‚Üí TelegramAdapter                   ‚îÇ
‚îÇ  2. CrazyGames.SDK ‚Üí CrazyGamesAdapter        ‚Üê NEW             ‚îÇ
‚îÇ  3. gdsdk / GD_OPTIONS ‚Üí GameDistributionAdapter ‚Üê NEW          ‚îÇ
‚îÇ  4. YaGames ‚Üí YandexAdapter                                      ‚îÇ
‚îÇ  5. PokiSDK ‚Üí PokiAdapter                                        ‚îÇ
‚îÇ  6. else ‚Üí StandaloneAdapter                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                       ‚îÇ                       ‚îÇ
        ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ IAuthProvider ‚îÇ    ‚îÇ IAdsProvider     ‚îÇ    ‚îÇ ISocialProvider      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TG: initData  ‚îÇ    ‚îÇ TG: Telegram Ads ‚îÇ    ‚îÇ TG: Invites, Stories ‚îÇ
‚îÇ CG: JWT Token ‚îÇ    ‚îÇ CG: CG Ads       ‚îÇ    ‚îÇ CG: Invite Links     ‚îÇ
‚îÇ GD: Guest     ‚îÇ    ‚îÇ GD: IMA SDK      ‚îÇ    ‚îÇ GD: ‚Äî                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | Telegram | CrazyGames | GameDistribution |
|-------------|----------|------------|------------------|
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | initData | JWT | –ù–µ—Ç |
| –†–µ–π—Ç–∏–Ω–≥ | –î–∞ | –î–∞ | –ù–µ—Ç |
| –†–µ–∫–ª–∞–º–∞ Interstitial | –î–∞ | –î–∞ | –î–∞ |
| –†–µ–∫–ª–∞–º–∞ Rewarded | –î–∞ | –î–∞ | –î–∞ |
| –ë–∞–Ω–Ω–µ—Ä—ã | –ù–µ—Ç | –î–∞ | –ù–µ—Ç |
| –ü–ª–∞—Ç–µ–∂–∏ | Stars | Xsolla | –ù–µ—Ç |
| –ò–Ω–≤–∞–π—Ç—ã | –î–∞ | –î–∞ | –ù–µ—Ç |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | –ë–î | Data Module | localStorage |

---

## 3. –ë–ª–æ–∫ 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–î–µ–Ω—å 1)

### 3.1. –ó–∞–¥–∞—á–∏

| ID | –ó–∞–¥–∞—á–∞ | –§–∞–π–ª—ã | –û—Ü–µ–Ω–∫–∞ |
|----|--------|-------|--------|
| INF-1 | –û–±–Ω–æ–≤–∏—Ç—å `PlatformManager` | `client/src/platform/PlatformManager.ts` | 2—á |
| INF-2 | –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º | `client/src/platform/types.ts` | 1—á |
| INF-3 | –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥–∏ –≤ `features.json` | `config/features.json`, `server/src/config/` | 1—á |
| INF-4 | –°–æ–∑–¥–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ | `client/src/platform/*.ts` | 2—á |

### 3.2. INF-1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PlatformManager

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. `[MUST]` –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ CrazyGames –ø–æ `window.CrazyGames?.SDK`
2. `[MUST]` –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ GameDistribution –ø–æ `window.gdsdk` –∏–ª–∏ `window.GD_OPTIONS`
3. `[MUST]` –°–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Telegram > CrazyGames > GD > ...)
4. `[MUST]` –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –≤ –∫–æ–Ω—Å–æ–ª—å

### 3.3. INF-2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ types.ts

–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã:

```
type RuntimePlatform = 
  | 'telegram' 
  | 'crazygames' 
  | 'gamedistribution'
  | 'yandex' 
  | 'poki' 
  | 'standalone';

type AuthProvider = 
  | 'telegram' 
  | 'crazygames'
  | 'google' 
  | 'yandex';
```

### 3.4. INF-3: –§–ª–∞–≥–∏ features.json

| –§–ª–∞–≥ | –¢–∏–ø | Default | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|---------|----------|
| `platformCrazyGamesEnabled` | boolean | false | –í–∫–ª—é—á–∏—Ç—å CrazyGames |
| `platformGameDistributionEnabled` | boolean | false | –í–∫–ª—é—á–∏—Ç—å GameDistribution |
| `crazyGamesAuthEnabled` | boolean | true | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è CG |
| `crazyGamesPaymentsEnabled` | boolean | false | –ü–ª–∞—Ç–µ–∂–∏ Xsolla |

### 3.5. INF-4: –ó–∞–≥–ª—É—à–∫–∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã:
- `client/src/platform/CrazyGamesAdapter.ts`
- `client/src/platform/GameDistributionAdapter.ts`

–ö–∞–∂–¥—ã–π –∞–¥–∞–ø—Ç–µ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç `IPlatformAdapter` —Å –º–µ—Ç–æ–¥–∞–º–∏-–∑–∞–≥–ª—É—à–∫–∞–º–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–º–∏ –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

---

## 4. –ë–ª–æ–∫ 2: CrazyGames Integration (–î–Ω–∏ 2-3)

### 4.1. –ó–∞–¥–∞—á–∏

| ID | –ó–∞–¥–∞—á–∞ | –§–∞–π–ª—ã | –û—Ü–µ–Ω–∫–∞ |
|----|--------|-------|--------|
| CG-1 | –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK | `client/src/platform/CrazyGamesAdapter.ts` | 2—á |
| CG-2 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `CrazyGamesAuthProvider` | `client/src/platform/providers/` | 4—á |
| CG-3 | –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è JWT –Ω–∞ MetaServer | `server/src/services/AuthService.ts` | 4—á |
| CG-4 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `CrazyGamesAdsProvider` | `client/src/platform/providers/` | 3—á |
| CG-5 | –°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ | `CrazyGamesAdapter.ts` | 2—á |

### 4.2. CG-1: –ó–∞–≥—Ä—É–∑–∫–∞ SDK

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. `[MUST]` –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `window.CrazyGames?.SDK` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
2. `[MUST]` –í—ã–∑–≤–∞—Ç—å `init()` –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
3. `[MUST]` –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `getEnvironment()` ‚Äî —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ `local` –∏–ª–∏ `crazygames`
4. `[MUST]` –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–°—Ä–µ–¥—ã:**

| –°—Ä–µ–¥–∞ | `getEnvironment()` | –ü–æ–≤–µ–¥–µ–Ω–∏–µ |
|-------|-------------------|-----------|
| localhost | `local` | –î–µ–º–æ-—Ä–µ–∫–ª–∞–º–∞, mock-–¥–∞–Ω–Ω—ã–µ |
| crazygames.com | `crazygames` | –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |
| –î—Ä—É–≥–∏–µ –¥–æ–º–µ–Ω—ã | `disabled` | SDK –æ—Ç–∫–ª—é—á—ë–Ω |

### 4.3. CG-2: CrazyGamesAuthProvider

**–ú–µ—Ç–æ–¥—ã:**

| –ú–µ—Ç–æ–¥ | –õ–æ–≥–∏–∫–∞ |
|-------|--------|
| `tryRestoreSession()` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å localStorage `cg_session`, –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ MetaServer |
| `trySilentAuth()` | `SDK.user.getUser()` ‚Äî –µ—Å–ª–∏ –Ω–µ null, –≤—ã–∑–≤–∞—Ç—å `loginViaCrazyGames()` |
| `startLogin()` | `SDK.user.showAuthPrompt()` |
| `loginViaCrazyGames()` | `getUserToken()` ‚Üí `POST /auth/verify` ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å `accessToken` |

**Flow –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CrazyGames Auth Flow                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. SDK.init()
       ‚îÇ
       ‚ñº
2. SDK.user.getUser()
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚ñ∂ null ‚Üí –ì–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º ‚Üí POST /auth/guest
       ‚îÇ
       ‚îî‚îÄ‚îÄ‚ñ∂ user ‚Üí SDK.user.getUserToken()
                       ‚îÇ
                       ‚ñº
              3. POST /auth/verify { platformType: 'crazygames', token }
                       ‚îÇ
                       ‚ñº
              4. MetaServer –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç JWT
                       ‚îÇ
                       ‚ñº
              5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç accessToken
```

### 4.4. CG-3: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è JWT –Ω–∞ MetaServer

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. `[MUST]` –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Å `https://sdk.crazygames.com/publicKey.json`
2. `[MUST]` –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –Ω–∞ 1 —á–∞—Å
3. `[MUST]` –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–±—Ä–æ—Å–∏—Ç—å –∫—ç—à –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
4. `[MUST]` –ò–∑–≤–ª–µ—á—å `userId`, `username`, `profilePictureUrl` –∏–∑ payload
5. `[MUST]` –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `users` —Å `auth_provider = 'crazygames'`
6. `[MUST]` –í–µ—Ä–Ω—É—Ç—å `accessToken`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT payload:**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `userId` | string | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è CG |
| `gameId` | string | ID –∏–≥—Ä—ã |
| `username` | string | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è |
| `profilePictureUrl` | string | URL –∞–≤–∞—Ç–∞—Ä–∫–∏ |
| `iat` | number | –í—Ä–µ–º—è –≤—ã–ø—É—Å–∫–∞ |
| `exp` | number | –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è |

### 4.5. CG-4: CrazyGamesAdsProvider

**–ú–µ—Ç–æ–¥—ã:**

| –ú–µ—Ç–æ–¥ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-------|------------|
| `showInterstitial()` | `SDK.ad.requestAd('midgame', callbacks)` |
| `showRewarded()` | `SDK.ad.requestAd('rewarded', callbacks)` |
| `isAvailable()` | `getEnvironment() !== 'disabled'` |

**Callbacks:**

```
{
  adStarted: () => {
    // –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É
    // –û—Ç–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫
    gameplayStop()
  },
  adFinished: () => {
    // –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É
    gameplayStart()
    // –î–ª—è rewarded ‚Äî –≤—ã–¥–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É
  },
  adError: (error, errorData) => {
    // –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
    // –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –Ω–∞–≥—Ä–∞–¥—ã
  }
}
```

### 4.6. CG-5: –°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

| –°–æ–±—ã—Ç–∏–µ | –ú–µ—Ç–æ–¥ SDK | –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å |
|---------|-----------|----------------|
| –ù–∞—á–∞–ª–æ –≥–µ–π–º–ø–ª–µ—è | `SDK.game.gameplayStart()` | –°—Ç–∞—Ä—Ç –º–∞—Ç—á–∞, –≤—ã—Ö–æ–¥ –∏–∑ –º–µ–Ω—é |
| –ö–æ–Ω–µ—Ü –≥–µ–π–º–ø–ª–µ—è | `SDK.game.gameplayStop()` | –ö–æ–Ω–µ—Ü –º–∞—Ç—á–∞, –≤—Ö–æ–¥ –≤ –º–µ–Ω—é, –ø–∞—É–∑–∞ |
| –°—á–∞—Å—Ç–ª–∏–≤—ã–π –º–æ–º–µ–Ω—Ç | `SDK.game.happyTime()` | –ü–æ–±–µ–¥–∞, –Ω–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥ |

---

## 5. –ë–ª–æ–∫ 3: GameDistribution Integration (–î–µ–Ω—å 3)

### 5.1. –ó–∞–¥–∞—á–∏

| ID | –ó–∞–¥–∞—á–∞ | –§–∞–π–ª—ã | –û—Ü–µ–Ω–∫–∞ |
|----|--------|-------|--------|
| GD-1 | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ SDK | `client/src/platform/GameDistributionAdapter.ts` | 2—á |
| GD-2 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `GameDistributionAdsProvider` | `client/src/platform/providers/` | 3—á |
| GD-3 | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è SDK | `GameDistributionAdapter.ts` | 2—á |

### 5.2. GD-1: –ó–∞–≥—Ä—É–∑–∫–∞ SDK

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. `[MUST]` –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `GD_OPTIONS` –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π SDK
2. `[MUST]` –£–∫–∞–∑–∞—Ç—å `gameId` –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. `[MUST]` –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `onEvent` callback –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
4. `[MUST]` –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–±—ã—Ç–∏—è `SDK_READY` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```
window.GD_OPTIONS = {
  gameId: config.GAMEDISTRIBUTION_GAME_ID,
  onEvent: (event) => {
    GameDistributionAdapter.handleEvent(event);
  }
};
```

### 5.3. GD-2: GameDistributionAdsProvider

**–ú–µ—Ç–æ–¥—ã:**

| –ú–µ—Ç–æ–¥ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-------|------------|
| `showInterstitial()` | `gdsdk.showAd(AdType.Interstitial)` |
| `showRewarded()` | `gdsdk.showAd(AdType.Rewarded)` |
| `preloadRewarded()` | `gdsdk.preloadAd(AdType.Rewarded)` |
| `isAvailable()` | SDK –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |

### 5.4. GD-3: –°–æ–±—ã—Ç–∏—è SDK

| –°–æ–±—ã—Ç–∏–µ | –ö–æ–¥ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|-----|----------|
| SDK –≥–æ—Ç–æ–≤ | `SDK_READY` | –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º—ã |
| –ò–≥—Ä–∞ –Ω–∞ –ø–∞—É–∑–µ | `SDK_GAME_PAUSE` | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É |
| –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è | `SDK_GAME_START` | –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É |
| Rewarded –∑–∞–≤–µ—Ä—à—ë–Ω | `SDK_REWARDED_WATCH_COMPLETE` | –í—ã–¥–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É |
| –û—à–∏–±–∫–∞ | `SDK_ERROR` | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å |

**–í–∞–∂–Ω–æ:** –ù–∞ GameDistribution –≤—Å–µ –∏–≥—Ä–æ–∫–∏ ‚Äî –≥–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `POST /auth/guest`.

---

## 6. –ë–ª–æ–∫ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–µ–Ω—å 4)

### 6.1. –ó–∞–¥–∞—á–∏

| ID | –ó–∞–¥–∞—á–∞ | –û—Ü–µ–Ω–∫–∞ |
|----|--------|--------|
| TEST-1 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CrazyGames –≤ QA Tool | 2—á |
| TEST-2 | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GameDistribution –≤ iframe | 2—á |
| TEST-3 | –§–∏–∫—Å—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | 2—á |
| TEST-4 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | 2—á |

### 6.2. TEST-1: CrazyGames QA Tool

**–ß–µ–∫–ª–∏—Å—Ç:**

- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É –≤ Developer Portal
- [ ] –û—Ç–∫—Ä—ã—Ç—å Preview
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é SDK
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (showAuthPrompt)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å interstitial —Ä–µ–∫–ª–∞–º—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rewarded —Ä–µ–∫–ª–∞–º—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å gameplayStart/gameplayStop
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å happyTime –ø—Ä–∏ –ø–æ–±–µ–¥–µ

### 6.3. TEST-2: GameDistribution iframe

**–ß–µ–∫–ª–∏—Å—Ç:**

- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É –≤ Developer Portal
- [ ] –û—Ç–∫—Ä—ã—Ç—å –≤ iframe —á–µ—Ä–µ–∑ Upload tab
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `SDK_READY` —Å–æ–±—ã—Ç–∏–µ
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `SDK_GAME_PAUSE`/`SDK_GAME_START`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `SDK_REWARDED_WATCH_COMPLETE`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º

---

## 7. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Sprint-15

### 7.1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (P0)

- [ ] `PlatformManager` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç CrazyGames –∏ GameDistribution
- [ ] CrazyGames SDK –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] CrazyGames –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (JWT –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è)
- [ ] CrazyGames —Ä–µ–∫–ª–∞–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- [ ] GameDistribution SDK –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- [ ] GameDistribution —Ä–µ–∫–ª–∞–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- [ ] GameDistribution –≥–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `npm run build` —É—Å–ø–µ—à–µ–Ω
- [ ] `npm run test` –ø—Ä–æ—Ö–æ–¥–∏—Ç

### 7.2. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (P1)

- [ ] CrazyGames Data Module –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω (–∫—ç—à)
- [ ] CrazyGames Invite Links —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ë–∞–Ω–Ω–µ—Ä—ã CrazyGames –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- [ ] Preload rewarded —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ GameDistribution

### 7.3. –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ (P2)

- [ ] CrazyGames Xsolla –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º

---

## 8. –ö–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É
git checkout -b sprint-15/platform-adapters

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev:client  # —Ç–µ—Ä–º–∏–Ω–∞–ª 1
npm run dev:server  # —Ç–µ—Ä–º–∏–Ω–∞–ª 2

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run test
npm run build

# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CrazyGames –ª–æ–∫–∞–ª—å–Ω–æ
# –î–æ–±–∞–≤–∏—Ç—å ?useLocalSdk=true –∫ URL

# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è GameDistribution
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GD_OPTIONS —Å gameId
```

---

## 9. –†–∏—Å–∫–∏

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|-----------|
| SDK CrazyGames –∏–∑–º–µ–Ω–∏—Ç API | –°—Ä–µ–¥–Ω—è—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å v3 SDK, —Å–ª–µ–¥–∏—Ç—å –∑–∞ changelog |
| –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á CG –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –ù–∏–∑–∫–∞—è | –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 1 —á–∞—Å, fallback |
| GameDistribution –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã | –°—Ä–µ–¥–Ω—è—è | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º—É –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç SDK | –ù–∏–∑–∫–∞—è | –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π SDK |
| QA Tools –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã | –ù–∏–∑–∫–∞—è | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ localhost —Å –º–æ–∫–∞–º–∏ |

---

## 10. –†–µ—Å—É—Ä—Å—ã

### 10.1. CrazyGames

| –†–µ—Å—É—Ä—Å | URL |
|--------|-----|
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | https://docs.crazygames.com/ |
| Developer Portal | https://developer.crazygames.com/ |
| SDK v3 | https://docs.crazygames.com/sdk/intro/ |
| –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á | https://sdk.crazygames.com/publicKey.json |

### 10.2. GameDistribution

| –†–µ—Å—É—Ä—Å | URL |
|--------|-----|
| GitHub Wiki | https://github.com/GameDistribution/GD-HTML5/wiki |
| Developer Portal | https://developer.gamedistribution.com/ |

---

## 11. –ü–æ—Å–ª–µ Sprint-15

| –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ø—Ä–∏–Ω—Ç |
|--------|-----------|--------|
| YandexAdapter | P2 | Sprint-16 |
| PokiAdapter | P2 | Sprint-16 |
| CrazyGames Xsolla | P2 | Sprint-17 |
| A/B —Ç–µ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | P1 | Sprint-16 |

---

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|--------|------|-----------|
| 1.0 | 29 —è–Ω–≤–∞—Ä—è 2026 | –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
