# Git Hooks для защиты ветки main

Эта директория содержит git hooks для локальной защиты ветки main от прямых изменений.

## Hooks

### pre-commit
Блокирует попытки создания коммитов напрямую в ветку main. При попытке коммита в main выдается ошибка с инструкциями по созданию feature-ветки.

### pre-push  
Блокирует попытки push напрямую в ветку main. Перехватывает команду push и проверяет целевую ветку перед отправкой.

### prepare-commit-msg
Выдает предупреждение при работе в ветке main. Помогает разработчику заметить, что он находится в защищенной ветке.

## Установка

Hooks устанавливаются автоматически при запуске `npm install` через скрипт `postinstall`.

Для ручной установки используйте:
```bash
npm run install-hooks
```

## Принцип работы

Скрипты установки создают символические ссылки (Linux/macOS) или копируют файлы (Windows) из `.githooks/` в `.git/hooks/`. Это позволяет:
- Версионировать hooks в репозитории
- Автоматически устанавливать их для всех разработчиков
- Обновлять hooks через git pull

## Обход защиты (только для экстренных случаев)

В исключительных случаях можно обойти локальную защиту с помощью флага `--no-verify`:
```bash
git commit --no-verify -m "Emergency fix"
git push --no-verify origin main
```

**Внимание:** Даже при обходе локальной защиты, GitHub Actions и branch protection rules на сервере все равно заблокируют прямой push в main.
